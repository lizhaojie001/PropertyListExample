(this.webpackJsonp=this.webpackJsonp||[]).push([[0],Array(19).concat([function(e,t,a){var n=a(5);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(a(610)),i=a(624),r=a(625),l=a(626),s=a(627),u=n(a(628)),c=n(a(629)),d=n(a(630)),f=n(a(631)),p={Tool:o.default,pdf:i.pdf,answer:l.answer,book:r.book,home:s.home,MicState:u.default,RosterMicState:c.default,ClassType:f.default,UpWall:d.default};t.default=p},,,,,,function(e,t,a){var n=a(5);Object.defineProperty(t,"__esModule",{value:!0}),t.api=void 0;var o,i,r,l,s,u,c,d=n(a(140)),f=n(a(46)),p=n(a(41)),h=n(a(60)),m=n(a(7)),g=n(a(61)),_=(n(a(62)),n(a(587))),E=a(16),v=n(a(119)),S=n(a(52)),y=new(o=function e(){var t=this,a=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(0,m.default)(this,e),this.verbose=!1,(0,h.default)(this,"bufferSend",i,this),(0,h.default)(this,"bufferRecv",r,this),(0,h.default)(this,"messageCount",l,this),(0,h.default)(this,"messageSize",s,this),this.messageCountLast=0,(0,h.default)(this,"msgDensity",u,this),this.listenedCallbacks={},this.cache={},this.isCacheDisabled=!1,this.counter=S.default._throttleLast(function(e,a){t.msgDensity=e-a,t.messageCountLast=e},1e3),(0,h.default)(this,"send",c,this),this.emit=function(e,a){t.bufferRecv.push({type:e,status:"succ",retryTimes:0,payload:a,param:a})},this.request=function(e,a,n){return new Promise(function(o,i){var r=(new Date).getTime().toString();!n&&a&&(n=a.payload),a&&delete a.payload;var l,s={type:e,param:a||{},payload:n||{},requestId:r,status:"new",retryTimes:0};l=setTimeout(function(){console.warn("<"+e+"> request timeout 30s.["+r+"]"),t.bufferRecv.push((0,p.default)({},s,{type:s.type+"Rsp",status:"fail"}))},3e4),t.send(s,o,i,l).then(function(){console.log("send succ.")}).catch(function(){console.log("send fail."),clearTimeout(l),i()})})},this.listen=function(e,a){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},o=arguments.length>3?arguments[3]:void 0;t.listenedCallbacks&&!t.listenedCallbacks[e]&&(t.listenedCallbacks[e]={});var i=v.default.v4();return(0,f.default)(t.listenedCallbacks[e],(0,d.default)({},i,function(r){r.type!==e||r.requestId!==o&&o||("fail"===r.status&&n(r,r.payload),("succ"===r.status||0===r.statusCode)&&a(r,r.payload),o&&t.unlisten(e,i))})),{cancel:function(){t.unlisten(e,i)}}},this.unlisten=function(e,a){t.listenedCallbacks&&t.listenedCallbacks[e]&&Object.keys(t.listenedCallbacks[e]).length>0&&delete t.listenedCallbacks[e][a]},this.isListen=function(e){return t.listenedCallbacks&&t.listenedCallbacks[e]&&Object.keys(t.listenedCallbacks[e]).length>0},this.recall=function(e){t.isCacheDisabled||t.cache[e]&&t.cache[e].length>0&&(t.cache[e].forEach(function(e){t.bufferRecv.push(e)}),t.cache[e]=[])},this.verbose=!!a,this.isCacheDisabled=!!n,(0,E.reaction)(function(){return t.bufferSend.length},function(e){if(0!==e){var a=t.bufferSend.shift();if(a&&a.retryTimes>=3)t.bufferRecv.push((0,p.default)({},a,{type:a.type+"Ack",status:"fail"}));else{t.verbose&&console.info("[buffer Out] <"+(a&&a.type)+"> send buffer is going send",(0,E.toJS)(a,{detectCycles:!1,recurseEverything:!1}));try{window.Js_get_encode&&window.Js_get_encode(_.default.encode(JSON.stringify([{type:a.type,value:a}]))),window.android&&window.android.Js_get_encode(_.default.encode(JSON.stringify([{type:a.type,value:a}]))),window.webkit&&window.webkit.messageHandlers.web2MacClient&&window.webkit.messageHandlers.web2MacClient.postMessage(_.default.encode(JSON.stringify([{type:a.type,value:a}]))),a&&t.bufferRecv.push((0,p.default)({},a,{type:a.type+"Ack",status:"succ"}))}catch(n){setTimeout(function(){a&&a.retryTimes++,a&&t.bufferSend.push(a)},300)}}}}),(0,E.reaction)(function(){return t.bufferRecv.length},function(e){if(0!==e){var a=t.bufferRecv.shift();a&&t.listenedCallbacks[a.type]&&Object.keys(t.listenedCallbacks[a.type]).length?(Object.keys(t.listenedCallbacks[a.type])||[]).map(function(e){return a?t.listenedCallbacks[a.type][e]:null}).forEach(function(e){a&&e&&e(a)}):a&&!t.isCacheDisabled&&(!t.cache[a.type]&&(t.cache[a.type]=[]),t.cache[a.type].push(a),console.info("cached <"+a.type+">",(0,E.toJS)(a)))}}),window.comm_type_get_encode=function(e,a){console.info("[diguest recv] entry "+e);var n=JSON.parse(_.default.decode(a));Array.isArray(n)?(t.messageCount+=n.length,t.messageSize+=a.length,t.counter(t.messageCount,t.messageCountLast),console.info("[diguest recv] length "+n.length),n.forEach(function(e){e.value?(t.verbose&&console.info("[buffer In ] <"+(e.value&&(e.value.type||e.type))+"> recived buffer is going receive",e.value),t.bufferRecv.push((0,p.default)({type:e.type,retryTimes:0,status:"fail"===e.value.status||e.value.statusCode&&e.value.statusCode>0?"fail":"succ"},e.value))):console.warn("value was absent.")})):console.warn("data from c++ is not array, please check.")},window.emit=this.emit},i=(0,g.default)(o.prototype,"bufferSend",[E.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),r=(0,g.default)(o.prototype,"bufferRecv",[E.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),l=(0,g.default)(o.prototype,"messageCount",[E.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),s=(0,g.default)(o.prototype,"messageSize",[E.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),u=(0,g.default)(o.prototype,"msgDensity",[E.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),c=(0,g.default)(o.prototype,"send",[E.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t,a,n,o){return new Promise(function(i,r){e.listen(t.type+"Ack",i,r,t.requestId),e.listen(t.type+"Rsp",function(e){a(e),clearTimeout(o)},function(e){n(e),clearTimeout(o)},t.requestId),e.bufferSend.push(t)})}}}),o)(!0);t.api=y},,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){var n=a(5);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(a(38)),i=n(a(7)),r=new function e(){var t=this;(0,i.default)(this,e),this.throttle=function(e,a){var n=!0;return function(){for(var o=arguments.length,i=new Array(o),r=0;r<o;r++)i[r]=arguments[r];var l=t;n&&(n=!1,setTimeout(function(){e.apply(l,[].concat(i)),n=!0},a))}},this._throttle=function(e,t){var a=!0;return function(){for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];a&&(a=!1,setTimeout(function(){e.apply(void 0,o),a=!0},t))}},this._throttleLast=function(e,t){var a,n=!0,i=!0;return function(){for(var r=arguments.length,l=new Array(r),s=0;s<r;s++)l[s]=arguments[s];a=l,i&&(e.apply(void 0,(0,o.default)(a)),i=!1),n&&(n=!1,setTimeout(function(){e.apply(void 0,(0,o.default)(a)),n=!0},t))}},this.debounce=function(e,a){var n=null;return function(){for(var o=arguments.length,i=new Array(o),r=0;r<o;r++)i[r]=arguments[r];var l=t;null!==n&&clearTimeout(n),n=setTimeout(function(){e.apply(l,[].concat(i))},a)}},this._debounce=function(e,t){var a=null;return function(){for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];null!==a&&clearTimeout(a),a=setTimeout(function(){e.apply(void 0,o)},t)}},this.loadScript=function(e,t){return new Promise(function(a,n){document||n(new Error("Document was not defined"));var o=document.createElement("script");o.async=t,o.type="text/javascript",o.src=e,o.onreadystatechange=function(){o.onload=o.onreadystatechange=null,a(o)},o.onload=o.onreadystatechange,o.onerror=function(e){n(new Error("Error loading script."))},o.onabort=function(e){n(new Error("Script loading aboirted."))},document.body.appendChild(o)})}};t.default=r},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){var n=a(5);Object.defineProperty(t,"__esModule",{value:!0}),t.intersects2Line=y,t._getLineEquation=w,t._get2LineCorssPoint=function(e,t,a,n,o,i,r,l){var s=w(e,t,a,n),u=s.a,c=s.b,d=s.c,f=w(o,i,r,l),p=f.a,h=f.b,m=f.c,g=u*h-p*c;return{x:(c*m-h*d)/g,y:(p*d-u*m)/g}},t.PencilCompare=t.PencilInkStroke=t.PencilStrokeOrigin=t.PencilStroke=t.isPointAroundLine=t.distanceP2L=t.distance=void 0;var o=n(a(12)),i=n(a(13)),r=n(a(14)),l=n(a(46)),s=n(a(7)),u=n(a(8)),c=n(a(38)),d=n(a(41)),f=n(a(274)),p=n(a(19)),h=a(275),m=n(a(718)),g=function(e,t,a,n){var o,i=_(t,a),r=_(e,t),l=r+i;return o=r||i?r?i?[r/l,i/l]:[1,0]:[0,1]:[.5,.5],{cp1:{x:t.x+n*o[0]*(e.x-a.x),y:t.y+n*o[0]*(e.y-a.y)},cp2:{x:t.x-n*o[1]*(e.x-a.x),y:t.y-n*o[1]*(e.y-a.y)}}},_=function(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))};t.distance=_;var E=function(e,t,a,n,o,i){return a===o&&n===i?_({x:e,y:t},{x:a,y:n}):Math.abs((i-n)*e-(o-a)*t+o*n-i*a)/_({x:a,y:n},{x:o,y:i})};t.distanceP2L=E;var v=function(e,t,a,n,o,i,r){var l=_({x:a,y:n},{x:o,y:i})+r;return E(e,t,a,n,o,i)<r&&_({x:e,y:t},{x:a,y:n})<l&&_({x:e,y:t},{x:o,y:i})<l};function S(e,t){return e*t>0}function y(e,t,a,n,o,i,r,l){var s,u,c,d;if(e===a&&t===n||o===r&&i===l)return!1;var f=w(e,t,a,n),p=f.a,h=f.b,m=f.c;if(d=p*r+h*l+m,0!==(c=p*o+h*i+m)&&0!==d&&S(c,d))return!1;var g=w(o,i,r,l),_=g.a,E=g.b,v=g.c;return u=_*a+E*n+v,(0===(s=_*e+E*t+v)||0===u||!S(s,u))&&(p*E-_*h,!0)}function w(e,t,a,n){return{a:n-t,b:e-a,c:a*t-e*n}}function A(e){return function(t){for(var a=e;a.length>1;a=o)for(var n=0,o=[];n<a.length-1;n++)o[n]={x:a[n].x*(1-t)+a[n+1].x*t,y:a[n].y*(1-t)+a[n+1].y*t};return a[0]}}function I(e,t){return(0,d.default)({},A(e)(t/(e.length-1)),{p:e[t].p||0})}function T(e,t){return e.map(function(t,a){var n=Math.max(0,a-2),o=Math.min(e.length,n+4);return I(e.slice(n,o),a-n)}).filter(function(e){return e})}t.isPointAroundLine=v;var b=function(){function e(t,a){var n=this;(0,s.default)(this,e),this.id="",this.userId=p.default.Tool.userId,this.nickName=p.default.Tool.nickName,this.svcId=0,this.line=[],this.color="yellow",this.originPts=[],this.simplePts=[],this.width=2.5,this.tool="pencil",this.isHover=!1,this.mergeMethod="append",this._updateLine=function(e){var t=n.originPts.length,a=e.slice(t),o=(0,f.default)(a.slice(),.8/p.default.book.scale);n.line=function(e){var t=[];if(2===e.length){var a=e[0],n=e[1];t.push({x0:a.x,y0:a.y,x1:n.x,y1:n.y,cp1x:a.x+(-a.x+n.x)/3,cp1y:a.y+(-a.y+n.y)/3,cp2x:a.x+2*(-a.x+n.x)/3,cp2y:a.y+2*(-a.y+n.y)/3,ps0:a.p,ps1:n.p})}else if(e.length>2){var o=g(e[0],e[0],e[1],.15).cp2,i=g(e[0],e[1],e[2],.3),r=i.cp1,l=i.cp2;t.push({x0:e[0].x,y0:e[0].y,x1:e[1].x,y1:e[1].y,cp1x:o.x,cp1y:o.y,cp2x:r.x,cp2y:r.y,ps0:e[0].p,ps1:e[1].p}),o=l,e.forEach(function(a,n){if(n>1&&n<e.length-1){var i=g(e[n-1],a,e[n+1],.3),r=i.cp1,l=i.cp2;t.push({x0:e[n-1].x,y0:e[n-1].y,x1:a.x,y1:a.y,cp1x:o.x,cp1y:o.y,cp2x:r.x,cp2y:r.y,ps0:e[n-1].p,ps1:a.p}),o=l}});var s=e.length;r=g(e[s-2],e[s-1],e[s-1],.15).cp1,t.push({x0:e[s-2].x,y0:e[s-2].y,x1:e[s-1].x,y1:e[s-1].y,cp1x:o.x,cp1y:o.y,cp2x:r.x,cp2y:r.y,ps0:e[s-2].p,ps1:e[s-1].p})}return t}(T([].concat((0,c.default)(n.simplePts),(0,c.default)(o)))),e.length-n.originPts.length>=5&&(n.simplePts=n.simplePts.concat(o),n.originPts=e.slice())},this.updateLine=this._updateLine,this.update=this._updateLine,this.clone=function(e){var t=n.getNewInstance(e);return t.line=JSON.parse(JSON.stringify(n.line)),t.color=n.color,t.width=n.width,t.tool=n.tool,t.svcId=e?0:n.svcId,t.userId=n.userId,t.nickName=n.nickName,t.mergeMethod=n.mergeMethod,t},this.assign=function(e){(0,l.default)(n,e)},this.transform=function(e,t){var a=e[e.length-1].x-e[0].x,o=e[e.length-1].y-e[0].y,i=n.clone(t&&t.newId);return i.line.forEach(function(e){["x0","x1","cp1x","cp2x"].forEach(function(t){e[t]+=a}),["y0","y1","cp1y","cp2y"].forEach(function(t){e[t]+=o})}),i},this.hitCheck=function(e,t){return n.line.some(function(a){return v(e,t,a.x0,a.y0,a.x1,a.y1,8/p.default.book.scale)})},this.intersectCheck=function(e,t,a,o){return n.line.some(function(n,i){return y(e,t,a,o,n.x0,n.y0,n.x1,n.y1)})||n.hitCheck(e,t)||n.hitCheck(a,o)},this.intersectDel=function(e,t,a,o){return n.line=n.line.filter(function(n,i){return!y(e,t,a,o,n.x0,n.y0,n.x1,n.y1)}),n.line.length<=0},this.magnify=function(e){var t=[];if(e.line.every(function(e){return"string"===typeof e}))for(;e.line.length>0;)t.push(e.line.splice(0,10));(0,l.default)(n,e,{line:t.map(function(e){return e.map(function(e){return parseFloat(e)})}).map(function(e){return{x0:e[0],y0:e[1],x1:e[2],y1:e[3],cp1x:e[4],cp1y:e[5],cp2x:e[6],cp2y:e[7],ps0:e[8],ps1:e[9]}})})},this.minify=function(){var e=[].concat.apply([],n.line.map(function(e){return[e.x0,e.y0,e.x1,e.y1,e.cp1x,e.cp1y,e.cp2x,e.cp2y,e.ps0,e.ps1].map(function(e){return e?e.toFixed(4):"0"})}));return(0,d.default)({},n,{line:e})},this.drawController=function(e){n.line.forEach(function(t,a){e.beginPath(),e.lineWidth=1,e.fillStyle="cyan",e.arc(t.x0,t.y0,1/p.default.book.scale,0,2*Math.PI),e.fill(),e.beginPath(),e.arc(t.x1,t.y1,1/p.default.book.scale,0,2*Math.PI),e.fill()})},a&&a.id?this.id=a.id:this.id=h.idGen.getId(),a&&a.userId?this.userId=a.userId:p.default.Tool.userId,a&&a.nickName?this.nickName=a.nickName:p.default.Tool.nickName,a&&a.tool&&(this.tool=a.tool),!t||t.length<=0||(this.simplePts=(0,f.default)(t.slice(),.8/p.default.book.scale),a&&(this.color=a.color),this.width=p.default.Tool.prompt.paintBrush.option[0].value/p.default.book.scale||2.5)}return(0,u.default)(e,[{key:"getNewInstance",value:function(t){return new e([],t?{}:{id:this.id})}},{key:"draw",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.beginPath();var t=(0,m.default)(this.color,.6);e.strokeStyle=this.isHover?t:this.color||"",e.lineCap="round",e.lineWidth=this.width,this.line.forEach(function(t,a){e.moveTo(t.x0,t.y0),e.bezierCurveTo(t.cp1x,t.cp1y,t.cp2x,t.cp2y,t.x1,t.y1)}),e.stroke()}}]),e}();t.PencilStroke=b;var C=function(){function e(t){var a=this;(0,s.default)(this,e),this.points=[],this.color="rgba(255,255,255,0.7)",this.width=0,this.isDebug=!1,this.transform=function(e){},this.clone=function(){var e=a.getNewInstance();return e.points=JSON.parse(JSON.stringify(a.points)),e.color=a.color,e.width=a.width,e},this.hitCheck=function(e,t){return!1},this.drawController=function(e){},t.length>0&&(this.points=t.slice())}return(0,u.default)(e,[{key:"getNewInstance",value:function(){return new e([])}},{key:"draw",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=0;a<this.points.length-1;a++){var n=this.points[a],o=this.points[a+1];e.beginPath(),e.strokeStyle=this.color,e.lineWidth=this.width||1.5*Math.pow((n.p+n.p)/2,1/6),e.lineCap="butt",e.moveTo(n.x,n.y),e.lineTo(o.x,o.y),e.stroke(),t&&(e.beginPath(),e.lineWidth=1,e.fillStyle="white",e.arc(n.x,n.y,1.5,0,2*Math.PI),e.fill(),e.beginPath(),e.arc(o.x,o.y,1.5,0,2*Math.PI),e.fill())}}}]),e}();t.PencilStrokeOrigin=C;var N=function(e){function t(e){var a;(0,s.default)(this,t);var n=[];return e.forEach(function(e,t){var a=Math.floor(t/3);a>n.length-1&&n.push({}),t%3===0&&(n[a].x=e),t%3===1&&(n[a].y=e),t%3===2&&(n[a].p=e)}),(a=(0,o.default)(this,(0,i.default)(t).call(this,n))).color="rgba(0,0,0,0.3)",a}return(0,r.default)(t,e),t}(C);t.PencilInkStroke=N;var x=function(){function e(t,a){(0,s.default)(this,e),this.ourLine=new b(a)}return(0,u.default)(e,[{key:"draw",value:function(e){this.ourLine.draw(e,!0)}}]),e}();t.PencilCompare=x},,,,,,,,function(e,t,a){var n=a(5),o=a(27);Object.defineProperty(t,"__esModule",{value:!0}),t.siderState=t.default=void 0;var i,r=n(a(38)),l=n(a(7)),s=n(a(8)),u=n(a(12)),c=n(a(13)),d=n(a(14)),f=n(a(46)),p=o(a(0)),h=n(a(549)),m=a(16),g=n(a(550)),_=n(a(597)),E=n(a(607)),v=n(a(122)),S=a(25),y=a(263),w=n(a(52)),A=a(30),I=n(a(28)),T=n(a(19)),b=n(a(659)),C=n(a(661)),N=n(a(662)),x=n(a(98)),k=m.observable.box("close");t.siderState=k;var O=m.observable.object({type:"close",stat:"end",update:function(e,t){(0,f.default)(this,{type:t,stat:e})}}),D=!1,P=!0,L=(0,A.observer)(i=function(e){function t(e){var n;return(0,l.default)(this,t),(n=(0,u.default)(this,(0,c.default)(t).call(this,e))).clickRef=p.default.createRef(),n.animationRef=p.default.createRef(),n.handelClick=function(e,t,a){e.persist(),e.stopPropagation();var o=document.getElementById(t.role);a===n.state.barListIndex?O.update("begin","close"):O.update("begin","open"),n.setState({init:!1,addAnimation:a!==n.state.barListIndex,item:t,barListIndex:a===n.state.barListIndex?-1:a,top:e.currentTarget.getBoundingClientRect().top+9+"px",component:a===n.state.barListIndex?"":t.role,arrowDom:o})},n.onResize=w.default.throttle(function(){n.state.arrowDom&&n.setState({top:n.state.arrowDom.getBoundingClientRect().top+9+"px"})},200),n.handleClose=function(){O.update("begin","close"),n.setState({addAnimation:!1,barListIndex:-1})},n.listener=function(e){e.currentTarget==e.target&&"animationend"===e.type&&(e.animationName&&e.animationName.includes("teacher-sider-open")?(k.set("open"),O.update("end","open")):e.animationName&&e.animationName.includes("teacher-sider-close")&&(k.set("close"),O.update("end","close")))},n.crowdSet=function(){n.setState(function(e){return{barList:[{role:"microphone",text:I.default.get("SIDE_TOOLS_INTERACTION_TITLE"),iconURL:a(693),desc:"\u8fd9\u662f\u8fde\u9ea6"}].concat((0,r.default)(e.barList),[{role:"roster",text:I.default.get("SIDE_TOOLS_ROSTER_TITLE"),iconURL:a(694),desc:"\u8fd9\u662f\u82b1\u540d\u518c"}]).filter(Boolean)}})},n.diposers=[],n.listeners=[],n._unMounted=!1,n.state={addAnimation:!1,barListIndex:-1,barList:[{role:"timer",text:I.default.get("SIDE_TOOLS_TIMER_TITLE"),iconURL:a(195),bigIconURL:a(695),desc:"\u8fd9\u662f\u8ba1\u65f6\u5668",isExternalTool:!0,isBottomTool:!0},{role:"countdown",text:I.default.get("SIDE_TOOLS_COUNTDOWN_TITLE"),iconURL:a(195),bigIconURL:a(696),desc:"\u8fd9\u662f\u5012\u8ba1\u65f6",isExternalTool:!0,isBottomTool:!0},{role:"dice",text:I.default.get("SIDE_TOOLS_DICE_TITLE"),iconURL:a(697),bigIconURL:a(698),desc:"\u9ab0\u5b50",isExternalTool:!0,isBottomTool:!0},{role:"more",text:I.default.get("SIDE_TOOLS_MORE"),iconURL:a(699),desc:"\u66f4\u591a\u5de5\u5177",isBottomTool:!0},(D||P)&&{role:"outline",text:I.default.get("SIDE_TOOLS_OUTLINE_TITLE"),iconURL:a(700),desc:"\u8fd9\u662f\u5927\u7eb2",isBottomTool:!0},{role:"material",text:I.default.get("SIDE_TOOLS_MATERIAL_TITLE"),iconURL:a(701),desc:"\u8fd9\u662f\u6559\u6750",isBottomTool:!0},{role:"optioncard",text:I.default.get("SIDE_TOOLS_ANSWER_TITLE"),iconURL:a(195),desc:"\u8fd9\u662f\u7b54\u9898\u5361"}].filter(Boolean),top:"0px",item:{role:"",text:"",desc:""},component:"",isTeacher:!0,classStatus:1,arrowDom:null,online:!1,init:!0},n}return(0,d.default)(t,e),(0,s.default)(t,[{key:"componentDidMount",value:function(){var e=this;window.addEventListener("resize",this.onResize),3===T.default.ClassType.type&&P&&this.crowdSet(),this.diposers.push((0,m.reaction)(function(){return T.default.ClassType.type},function(t){3===t&&P&&e.crowdSet()})),document.getElementById("courseContainer"),S.api.request("clsClassStatus").then(function(t){t.param&&!e._unMounted&&e.setState({classStatus:t.param.status})}),this.listeners.push(S.api.listen("clsClassStatusNotify",function(t){t.param&&!e._unMounted&&e.setState({classStatus:t.param.status})}));var t=function(){!e.state.isTeacher&&e.state.addAnimation&&e.handleClose(),(D||P)&&e.state.isTeacher&&e.clickRef&&e.clickRef.current&&e.clickRef.current.click(),(P||D)&&(e.state.isTeacher||1==T.default.Tool.assistantStatus||e.setState({online:!0}),!e.state.isTeacher&&e.diposers.push((0,m.reaction)(function(){return T.default.Tool.assistantStatus},function(t){1===t?(e.setState({online:!1}),e.state.addAnimation&&e.handleClose()):e.setState({online:!0})})))};T.default.Tool.role&&this.setState({isTeacher:1===T.default.Tool.role},t),this.diposers.push((0,m.reaction)(function(){return T.default.Tool.role},function(a){a&&e.setState({isTeacher:1===a},t)})),this.diposers.push((0,m.reaction)(function(){return T.default.Tool.showAssessmentClass},function(t){t&&e.setState(function(e){return{barList:[].concat((0,r.default)(e.barList),[{role:"bling",text:I.default.get("ASSESSMENT_COMMENT_TITLE"),iconURL:a(702),desc:"\u6bd4\u90bb\u8bc4\u6d4b\u8bfe\u548c\u8bfe\u540e\u8bc4\u8bed",iframeUrl:"https://t.blingabc.com/assessment-roombox.html?identity=teacher&classId="+T.default.Tool.cid,isBottomTool:!1,isThird:!0}]).filter(Boolean)}})}))}},{key:"componentDidUpdate",value:function(e,t){"roster"!=t.component&&"roster"===this.state.component&&(0,x.default)(10,{open:1}),"roster"===t.component&&"roster"!=this.state.component&&(0,x.default)(10,{open:0}),"optioncard"!=t.component&&"optioncard"===this.state.component&&(0,x.default)(20,{open:1}),"optioncard"===t.component&&"optioncard"!=this.state.component&&(0,x.default)(20,{open:0})}},{key:"componentWillUnmount",value:function(){this._unMounted=!0,window.removeEventListener("resize",this.onResize),this.diposers&&this.diposers.length&&(this.diposers.forEach(function(e){return e()}),this.diposers=[]),this.listeners&&this.listeners.length&&(this.listeners.forEach(function(e){return e.cancel()}),this.listeners=[])}},{key:"render",value:function(){var e=this,t=3===T.default.ClassType.type,a=this.state,n=a.classStatus,o=a.barListIndex,i=a.component,r=a.isTeacher,l=a.online,s=a.addAnimation,u=a.init,c=1===n;return p.default.createElement("div",{style:{height:"100%"}},p.default.createElement("div",{style:{position:"absolute",height:"100%",width:"50px"}},p.default.createElement("div",{className:h.default["bar-list"]},t?this.state.barList.filter(function(e){return!e.isBottomTool}).map(function(t,a){return p.default.createElement(v.default,{key:t.role,trigger:["hover"],mouseEnterDelay:.5,overlay:t.text,placement:"right",overlayClassName:"sider-tooltip"},p.default.createElement("div",{id:t.role,onClick:function(n){return!!r&&c&&e.handelClick(n,t,a)},style:{backgroundImage:"url("+t.iconURL+")"},className:h.default["bar-icon"]+" "+(r&&c?"":h.default.disabled)+" "+(o===a&&h.default.active)}))}):this.state.barList.filter(function(e){return!e.isBottomTool}).map(function(t,a){return p.default.createElement(v.default,{key:t.role,trigger:["hover"],mouseEnterDelay:.5,overlay:t.text,placement:"right",overlayClassName:"sider-tooltip"},p.default.createElement("div",{id:t.role,onClick:function(n){return(!!r||l)&&e.handelClick(n,t,a)},style:{backgroundImage:"url("+t.iconURL+")"},className:h.default["bar-icon"]+" "+(r||l?"":h.default.disabled)+" "+(o===a&&h.default.active)}))})),p.default.createElement("div",{className:h.default["bar-list"]+" "+h.default["bottom-list"]},t?this.state.barList.filter(function(e){return e.isBottomTool&&!e.isExternalTool}).map(function(t,a){return"outline"===t.role?p.default.createElement(v.default,{key:t.role,trigger:["hover"],mouseEnterDelay:.5,overlay:t.text,placement:"right",overlayClassName:"sider-tooltip"},p.default.createElement("div",{id:t.role,ref:e.clickRef,onClick:function(n){return!!r&&e.handelClick(n,t,a+10)},style:{backgroundImage:"url("+t.iconURL+")"},className:h.default["bar-icon"]+" "+(o===a+10&&h.default.active)})):p.default.createElement(v.default,{key:t.role,trigger:["hover"],mouseEnterDelay:.5,overlay:t.text,placement:"right",overlayClassName:"sider-tooltip"},p.default.createElement("div",{id:t.role,onClick:function(n){return!!r&&e.handelClick(n,t,a+10)},style:{backgroundImage:"url("+t.iconURL+")"},className:h.default["bar-icon"]+" "+(o===a+10&&h.default.active)}))}):this.state.barList.filter(function(e){return e.isBottomTool&&!e.isExternalTool}).map(function(t,a){return"outline"===t.role?p.default.createElement(v.default,{key:t.role,trigger:["hover"],mouseEnterDelay:.5,overlay:t.text,placement:"right",overlayClassName:"sider-tooltip"},p.default.createElement("div",{id:t.role,ref:e.clickRef,onClick:function(n){return(!!r||l)&&e.handelClick(n,t,a+10)},style:{backgroundImage:"url("+t.iconURL+")"},className:h.default["bar-icon"]+" "+(r||l?"":h.default.disabled)+" "+(o===a+10&&h.default.active)})):p.default.createElement(v.default,{key:t.role,trigger:["hover"],mouseEnterDelay:.5,overlay:t.text,placement:"right",overlayClassName:"sider-tooltip"},p.default.createElement("div",{id:t.role,onClick:function(n){return(!!r||l)&&e.handelClick(n,t,a+10)},style:{backgroundImage:"url("+t.iconURL+")"},className:h.default["bar-icon"]+" "+(r||l?"":h.default.disabled)+" "+(o===a+10&&h.default.active)}))}))),p.default.createElement("div",{ref:this.animationRef,onAnimationEnd:this.listener,className:s?h.default["bar-content"]+" "+h.default["bar-content-open"]:u?""+h.default["bar-content"]:h.default["bar-content"]+" "+h.default["bar-content-close"]},p.default.createElement("div",{id:"teacherSiderOutBox",className:h.default["out-box"]},p.default.createElement("div",{onClick:this.handleClose,className:h.default.close}),s&&p.default.createElement("div",{style:{top:this.state.top},className:h.default.triangle}),p.default.createElement("div",{className:h.default.listContent},p.default.createElement("div",{className:h.default.title},p.default.createElement("div",{className:h.default.titleIcon}),p.default.createElement("div",{className:h.default.titleText},["countdown","timer","dice"].includes(i)?I.default.get("SIDE_TOOLS_MORE"):this.state.item.text),p.default.createElement("div",{className:h.default.titleIcon})),p.default.createElement(g.default,{show:"material"===i}),p.default.createElement(N.default,{show:"roster"===i}),p.default.createElement(E.default,{show:"optioncard"===i}),p.default.createElement(_.default,{show:"microphone"===i}),p.default.createElement(y.OutlineViewer,{style:{marginTop:"45px",height:"calc(100% - 45px)"},show:"outline"===i}),p.default.createElement(b.default,{toolListData:this.state.barList,show:"more"===i}),this.state.barList.filter(function(e){return e.isThird}).map(function(e,t){return p.default.createElement(C.default,{key:t,show:i===e.role,iframeUrl:e.iframeUrl})})))))}}]),t}(p.Component))||i;t.default=L},,,,function(e,t,a){var n=a(5);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(a(41)),i=n(a(7)),r=n(a(8)),l=n(a(12)),s=n(a(13)),u=n(a(14)),c=n(a(0)),d=n(a(603)),f=n(a(17)),p=function(e){function t(e){var a;return(0,i.default)(this,t),(a=(0,l.default)(this,(0,s.default)(t).call(this,e))).ToastRef=c.default.createRef(),a.show=function(e){a.state.showToast||a.setState({contentText:e,fadeIn:!0,showToast:!0},function(){setTimeout(function(){a.setState({fadeIn:!1},function(){setTimeout(function(){a.setState({showToast:!1})},500)})},2500)})},a.state={showToast:!1,fadeIn:!1,contentText:""},a.el=document.createElement("div"),a}return(0,u.default)(t,e),(0,r.default)(t,[{key:"componentDidMount",value:function(){var e=document.getElementById("courseContainer");e&&e.appendChild(this.el)}},{key:"componentWillUnmount",value:function(){var e=document.getElementById("courseContainer");e&&e.removeChild(this.el)}},{key:"componentWillReceiveProps",value:function(e){"contentText"in e&&(e.contentText?this.setState(function(e,t){return{showToast:!0,fadeIn:!0,contentText:t.contentText||""}}):"contentText"in e&&null===e.contentText&&this.setState(function(e){return{showToast:!1,fadeIn:!1}}))}},{key:"render",value:function(){return f.default.createPortal(c.default.createElement("div",{ref:this.ToastRef,className:d.default.toast+" "+(this.state.fadeIn?""+d.default.fadeIn:""+d.default.fadeOut),style:(0,o.default)({display:this.state.showToast?"block":"none"},this.props.widthStyle)},c.default.createElement("div",{className:d.default.toastInner},c.default.createElement("i",{className:d.default.icon}),c.default.createElement("div",{className:d.default.content},c.default.createElement("span",null,this.state.contentText)))),this.el)}}]),t}(c.default.Component);t.default=p},function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(25);var o=function(e,t){n.api.request("reportLog",{type:e,content:t}).then(function(e){})};t.default=o},function(e,t,a){e.exports=a.p+"static/media/stu2.38b9075f.svg"},,,,,,,,,,,,,,,,,,,,,function(e,t,a){var n=a(27),o=a(5);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.PrimaryButton=void 0;var i=o(a(46)),r=o(a(600)),l=o(a(41)),s=o(a(7)),u=o(a(8)),c=o(a(12)),d=o(a(13)),f=o(a(14)),p=n(a(0)),h=o(a(602)),m=function(e){function t(e){return(0,s.default)(this,t),(0,c.default)(this,(0,d.default)(t).call(this,e))}return(0,f.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return p.default.createElement("button",{onClick:this.props.onClick,disabled:this.props.disabled,className:h.default.btn+" "+this.props.className,style:(0,l.default)({},this.props.style)},this.props.children?this.props.children:p.default.createElement("span",null,this.props.text))}}]),t}(p.Component);t.default=m;var g=function(e){function t(e){var a;return(0,s.default)(this,t),(a=(0,c.default)(this,(0,d.default)(t).call(this,e))).froze=function(){console.log("froze"),a.setState({disabled:!0},function(){setTimeout(function(){a.setState({disabled:!1})},a.props.delay)})},a.state={disabled:!1},a}return(0,f.default)(t,e),(0,u.default)(t,[{key:"componentWillUnmount",value:function(){this.setState=function(){}}},{key:"render",value:function(){var e=this,t=this.props,a=t.froze,n=(t.delay,t.className),o=t.onClick,l=(0,r.default)(t,["froze","delay","className","onClick"]);return p.default.createElement("button",(0,i.default)({onClick:function(){o&&o(),a&&e.froze()},disabled:this.state.disabled,className:h.default.primaryBtn+" "+n},l),this.props.children?this.props.children:this.props.text)}}]),t}(p.default.Component);t.PrimaryButton=g,g.defaultProps={delay:2e3,froze:!0}},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAPCAYAAAA71pVKAAAAAXNSR0IArs4c6QAAADpJREFUKBVj5PL0/s+AA7CzsjL8/P0bhywDAxNOGSIkRjUTEUjISlhA0YEP4JNnwRePo/GMGawDlzwBDEcK0PjlYnsAAAAASUVORK5CYII="},,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){e.exports=a.p+"static/media/stu1.54e3ef5e.svg"},function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0}),t.h5CourseWareSource=t.pdfSource=void 0;var n=a(641),o=a(657),i=new n.PdfSource;t.pdfSource=i;var r=new o.H5CourseWareSource;t.h5CourseWareSource=r},function(e,t){function a(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}a.keys=function(){return[]},a.resolve=a,e.exports=a,a.id=149},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){e.exports={optionCardContainer:"optionCard_optionCardContainer__1Jfyn",optionCardBtnContainer:"optionCard_optionCardBtnContainer__3KfOh",fixed:"optionCard_fixed__2vYDR",statisBtn:"optionCard_statisBtn__1wXPD",optionCardBtn:"optionCard_optionCardBtn__1qHhr",disabled:"optionCard_disabled__3ewIv"}},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAYAAABV7bNHAAAEq0lEQVR4Xu2ZUUscVxTHz8xs1XVirElesq5VN66IxRZbkryGUNukaR7yEshHSPqQEOinKITkIe1XKG2hfSixpaUU8tJCQIhExK26VpvmodEsZlw3deaW/3Xuch026yZ3h1H3DFxchntmvL/9n3P+965FfNUlYDGf+gQY0C4KYUAMyKyIsIJYQawgMwKsIDN+XINYQawgMwKsIDN+XINYQawgMwKsIDN+XINYQawgMwKsIDN+XIP2kYKiX5Yw++6bE520gvT31wOUGKy9AAj/g+V53vnOzs4v8L1vbGxcc113kogARo3mSOIVn5IkIPVuh4icIAj+vFJezQoS9FX66Ipt20NE5IcDy0pERUkDwvsB6A0hhDe0/g8J8mm+K0uWZblE9F8IKDEVJQ3IBhwiahNClE6sr5CggBa63gKgbiJ6EUIKWlVBUj1E1CGEWM2t/0XCCmjx0AAAHSGizYiKXrGCmE9PWkGpEFBaCPHv4POiVFDxUA6AjhFROQS01aoKqgLa2tp6eLnyJINa/HX78cepVOodBhQWaKTY1NTU+bGxsc+RFNPT05+Nj4+jzR/4FNsthVGDoKJ2FOrwMxghpVCgK+FntPt6V2wWYLcFvG6VizpkaQbDoXsa1eZVqgEYLgBBiwcofFYA1HN1A6nDaTqoOAHh2bbneefS6fSXlmVlddpCiJVSqfRpT0/Pz5hXLBbP9fX13cGc5eXl6wMDAz8SUbC2tjbR3d19t1Z8uVy+6rqunBeX444TEDxOSjnkB35Fdig5LJ/es9vo23QGjnkEgIIgmLm0OZ8VQtD36SHcH8XCgyCY/WRzOvtHUArjffn3tH2YJjtOKscNpcXileIApFJJ1hff9wtXNp/2VgFZ2wt8326nbzoyfzuO87bMKd9/dKky34t1ftee33H/YuVh7+8S0HYs5pxyDtNk2ynMy0dSsalpFicgWVcKhcLHg4ODtx3Hyegp5vv+47m5uZujo6NIMTE7OzuRz+dvYU6hULg5MjKC+9bMzMzE8PDwrVrxi4uLN/L5/L2IV9pfgMIOhS4FxxwtwijEKjWQkhi4tmWyXdjVdqRWPLochiroTd+zxakg1cLRvlUL1wGgbqjaASi1AKn7UCNGNB5WAEPvdnteQViU+uaxKAUKf6MKUS3cXlhY+Ki/v/82gpeWlm7kcrmfNBWpWD0esQrMvirSCpCCpLxO1Afp3gZdTHYrZNYPHe+q7qZ3plrxCvC+bPOqJusmUTd6CqRUmBBi/Zh3X3aqp+4ZbFa7DrJR1OHUc+PVrYYQ4tlR7zfZxlfdswD05kHeajSyRameJqrzoCPerxLQmvsBnweFhXzHeVCP94sE9Mz9kM+DooBwHnThxYMMDu3vtZ3k86AQUPXItVXPg+rVIt0lw0jCbSPlcMHXwCG3/KG9XqhfthVRXqepDrmRLqJ8SKNzmz1vxw+HL9lqtPQPh7rj1l037kMtujtORD1JKyj6/ujGOdaj1EbTIY7dfKPvjs6rB+h1n2kct5cAGS8mjgcwoF2oMiAGZJZ4rCBWECvIjAAryIwf1yBWECvIjAAryIwf1yBWECvIjAAryIwf1yBWkJmC/geP0tJYTLBYdAAAAABJRU5ErkJggg=="},function(e,t,a){var n=a(5),o=a(27);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,r,l,s=n(a(7)),u=n(a(8)),c=n(a(12)),d=n(a(13)),f=n(a(14)),p=o(a(0)),h=a(120),m=n(a(634)),g=a(25),_=a(30),E=a(16),v=n(a(28)),S=n(a(98)),y=(0,_.inject)("store")(i=(0,_.observer)((l=r=function(e){function t(e){var a;return(0,s.default)(this,t),(a=(0,c.default)(this,(0,d.default)(t).call(this,e))).lock=!1,a.lockLength=!1,a.disposes=[],a.micStart=function(e){return"roster"===a.props.from&&(0,S.default)(43,{target_id:e.uId,source_type:2}),"answerEnd"===a.props.from&&(0,S.default)(43,{target_id:e.uId,source_type:3}),"answerStat"===a.props.from&&(0,S.default)(43,{target_id:e.uId,source_type:4}),"on"===a.props.store.MicState.currentState?(a.props.store.RosterMicState.setToastContent(v.default.get("SIDE_TOOLS_INTERACTION_ASSIGN_RANDOM_MIC")),!a.lock&&setTimeout(function(){a.props.store.RosterMicState.setToastContent(null),a.lock=!1},2e3),void(a.lock=!0)):2===a.props.store.RosterMicState.micList.length?(a.props.store.RosterMicState.setToastContent(v.default.get("SIDE_TOOLS_INTERACTION_MAX_TWO")),!a.lockLength&&setTimeout(function(){a.props.store.RosterMicState.setToastContent(null),a.lockLength=!1},2e3),void(a.lockLength=!0)):(a.props.store.RosterMicState.changeState("on"),a.setState({lineupState:2}),void g.api.request("unionMicStart",{um_mode:2,um_avtype:0,um_status:1,um_user_total:2}).then(function(t){a.setState({channel:t.union_mic_channel,directMic:!0}),g.api.request("unionMicAddUser",{hand_uid:e.uId,union_mic_channel:t.union_mic_channel,um_mic_status:1}).then(function(e){console.log("\u82b1\u540d\u518c\u76f4\u63a5\u8fde\u9ea6\u7684\u8fd4\u56de\u7ed3\u679c",e)}).catch(function(e){1048594===e.statusCode&&(a.props.store.RosterMicState.setToastContent(v.default.get("SIDE_TOOLS_INTERACTION_OFFLINE")),setTimeout(function(){a.props.store.RosterMicState.setToastContent(null)},2e3)),a.setState({lineupState:0})})}).catch(function(){a.setState({lineupState:0})}))},a.micStop=function(e){g.api.request("unionMicAddUser",{hand_uid:e.uId,union_mic_channel:a.state.channel,um_mic_status:0}).then(function(e){console.log("\u82b1\u540d\u518c\u4e0b\u9ea6\u6210\u529f",e)})},a.upWall=function(e){g.api.request("mulitQuizUpDownWall",{uId:e.uId,state:1}).then(function(e){})},a.downWall=function(e){g.api.request("mulitQuizUpDownWall",{uId:e.uId,state:0}).then(function(e){})},a.state={micLength:0,contentText:null,channel:0,directMic:!1,lineupState:0,wallupState:0,isCrowd:!1},a}return(0,f.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.item;3===this.props.store.ClassType.type&&(this.setState({isCrowd:!0}),this.props.store.RosterMicState.micList.find(function(e){return e.user_uid===t.uId})?this.setState({lineupState:1}):this.setState({lineupState:0}));(this.disposes.push((0,E.reaction)(function(){return e.props.store.ClassType.type},function(t){3===t&&e.setState({isCrowd:!0})})),this.disposes.push((0,E.reaction)(function(){return e.props.store.RosterMicState.micList},function(a){var n=a.find(function(e){return e.user_uid===t.uId});console.log("item",t.nickName,t.uId),n?e.setState({lineupState:1}):e.setState({lineupState:0})})),1===this.props.store.ClassType.type)&&(this.props.store.UpWall.list.find(function(e){return e.uId===t.uId})?this.setState({wallupState:1}):this.setState({wallupState:0}));this.disposes.push((0,E.reaction)(function(){return e.props.store.UpWall.list},function(a){a.find(function(e){return e.uId===t.uId})?e.setState({wallupState:1}):e.setState({wallupState:0})}))}},{key:"componentWillUnmount",value:function(){this.setState=function(){},this.disposes&&this.disposes.length&&(this.disposes.forEach(function(e){return e()}),this.disposes=[])}},{key:"render",value:function(){var e=this,t=this.props,a=t.item,n=t.light,o=this.state,i=o.lineupState,r=o.wallupState,l=o.isCrowd;return p.default.createElement("div",null,l?p.default.createElement(p.default.Fragment,null,n?p.default.createElement(p.default.Fragment,null,0===i?p.default.createElement(h.PrimaryButton,{froze:!1,onClick:function(){return e.micStart(a)},className:""+m.default.lightConnecTalk}):1===i?p.default.createElement(h.PrimaryButton,{froze:!0,delay:800,onClick:function(){e.micStop(a)},className:""+m.default.lightDownTalk}):p.default.createElement(h.PrimaryButton,{froze:!1,className:""+m.default.lightConnecting})):p.default.createElement(p.default.Fragment,null,0===i?p.default.createElement(h.PrimaryButton,{froze:!1,onClick:function(){return e.micStart(a)},className:""+m.default.connecTalk}):1===i?p.default.createElement(h.PrimaryButton,{froze:!0,delay:800,onClick:function(){e.micStop(a)},className:""+m.default.downTalk}):p.default.createElement(h.PrimaryButton,{froze:!1,className:""+m.default.connecting}))):p.default.createElement(p.default.Fragment,null,n?p.default.createElement(p.default.Fragment,null,0===r?p.default.createElement(h.PrimaryButton,{froze:!1,onClick:function(){return e.upWall(a)},className:""+m.default.lightUp}):1===r?p.default.createElement(h.PrimaryButton,{delay:300,onClick:function(){e.downWall(a)},className:""+m.default.lightDown}):p.default.createElement(h.PrimaryButton,{froze:!1,className:""+m.default.lightConnecting})):p.default.createElement(p.default.Fragment,null,0===r?p.default.createElement(h.PrimaryButton,{froze:!1,onClick:function(){return e.upWall(a)},className:""+m.default.up}):1===r?p.default.createElement(h.PrimaryButton,{delay:300,onClick:function(){e.downWall(a)},className:""+m.default.down}):p.default.createElement(h.PrimaryButton,{froze:!1,className:""+m.default.connecting}))))}}]),t}(p.Component),r.defaultProps={light:!1},i=l))||i)||i;t.default=y},,,,,,function(e,t,a){e.exports=a.p+"static/media/Answercard.29e15749.svg"},function(e,t,a){e.exports={container:"home_container__E21Ub",courseContainer:"home_courseContainer__94aTX",courseContainerInner:"home_courseContainerInner__1cY33",paintCon:"home_paintCon__30nQP",compo:"home_compo__d1LmA",paintBoard:"home_paintBoard__1_CGp",showDomain:"home_showDomain__2wivq",toolCon:"home_toolCon__11WeV",toolBar:"home_toolBar__HXeej",hoverTip:"home_hoverTip__B_c1T",newPage:"home_newPage__2bvdP",active:"home_active__2Kjpj",disabled:"home_disabled__2LvjD",color:"home_color__19B01",colorInner:"home_colorInner___Xx0a",font:"home_font__2y4z5",smallFontMark:"home_smallFontMark__12Eq3",bigFontMark:"home_bigFontMark__3F_qs",pencil:"home_pencil__bRY6p",toolTip:"home_toolTip__9q8lZ",shape:"home_shape__1j-Rn",erase:"home_erase__3SUne",undo:"home_undo__wOMFn",redo:"home_redo__3y_HJ",clearScreen:"home_clearScreen__F1bnw",transform:"home_transform__38z26",operateOnCourse:"home_operateOnCourse__1sVEI",hidden:"home_hidden__26rTI",shrink:"home_shrink__g2LrZ",tit:"home_tit__2av9v",topTips:"home_topTips__JdQnw",slider:"home_slider__350px",sc:"home_sc__32y1R",bc:"home_bc__CP7-W",verline:"home_verline__1Pvvw",colorItem:"home_colorItem__3njm3",colorItemSmall:"home_colorItemSmall__3h8PZ",blk:"home_blk__DgUGk",colorItemHover:"home_colorItemHover__LNHBr",penItem:"home_penItem__HDhtj",eraseItem:"home_eraseItem__2K3fj",shapeItem:"home_shapeItem__3BFpO",pageCon:"home_pageCon__ESPZ2",sideBar:"home_sideBar__wZnzT",shadow:"home_shadow__143YZ"}},function(e,t,a){var n=a(5);Object.defineProperty(t,"__esModule",{value:!0}),t.StrightLine=void 0;var o=n(a(141)),i=n(a(46)),r=n(a(7)),l=n(a(8)),s=a(85),u=a(275),c=n(a(19)),d=function(){function e(t,a){var n=this;if((0,r.default)(this,e),this.id="",this.userId=c.default.Tool.userId,this.nickName=c.default.Tool.nickName,this.svcId=0,this.x0=0,this.y0=0,this.x1=0,this.y1=0,this.width=3/c.default.book.scale,this.color="#fff",this.tool="straight",this.mergeMethod="append",this.update=function(e,t){if(e&&!(e.length<=0)&&(n.x1=e.slice(-1)[0].x,n.y1=e.slice(-1)[0].y,t&&t.keys&&t.keys.some(function(e){return"Shift"===e}))){var a=Math.sqrt((Math.pow(n.y1-n.y0,2)+Math.pow(n.x1-n.x0,2))/2),o=180*Math.atan2(n.y1-n.y0,n.x1-n.x0)/Math.PI+180,i=Math.abs(Math.floor((o+22.5)%360/45));switch(i%4){case 0:n.y1=n.y0;break;case 1:n.x1=n.x0+(i>4?a:-a),n.y1=n.y0+(i>4?a:-a);break;case 2:n.x1=n.x0;break;case 3:n.x1=n.x0+(i>4?-a:a),n.y1=n.y0+(i>4?a:-a)}}},this.assign=function(e){(0,i.default)(n,e)},this.distanceP2L=function(e,t){return(0,s.distanceP2L)(e,t,n.x0,n.y0,n.x1,n.y1)},this.transform=function(e,t){var a=n.clone(t&&t.newId),o=e[e.length-1].x-e[0].x,i=e[e.length-1].y-e[0].y;switch(a.x0=n.x0+o,a.y0=n.y0+i,a.x1=n.x1+o,a.y1=n.y1+i,n.hitController(e[0].x,e[0].y)){case 1:a.x1=n.x1,a.y1=n.y1;break;case 2:a.x0=n.x0,a.y0=n.y0}return a},this.hitCheck=function(e,t){return(0,s.isPointAroundLine)(e,t,n.x0,n.y0,n.x1,n.y1,Math.max(10/c.default.book.scale,n.width/2))},this.intersectCheck=function(e,t,a,o){return(0,s.intersects2Line)(e,t,a,o,n.x0,n.y0,n.x1,n.y1)||n.hitCheck(e,t)||n.hitCheck(a,o)},this.hitController=function(e,t){return[[n.x0,n.y0],[n.x1,n.y1]].findIndex(function(a){var n=(0,o.default)(a,2),i=n[0],r=n[1];return Math.sqrt(Math.pow(i-e,2)+Math.pow(r-t,2))<=6/c.default.book.scale})+1},this.drawController=function(e){e.lineWidth=2/c.default.book.scale,e.strokeStyle="#CCC",e.fillStyle="white",e.beginPath(),e.arc(n.x0,n.y0,4/c.default.book.scale,0,2*Math.PI),e.fill(),e.stroke(),e.beginPath(),e.arc(n.x1,n.y1,4/c.default.book.scale,0,2*Math.PI),e.fill(),e.stroke()},this.getCursorType=function(e,t){return"horizontal"},a&&a.id?this.id=a.id:this.id=u.idGen.getId(),a&&a.userId?this.userId=a.userId:this.userId=c.default.Tool.userId,a&&a.nickName?this.nickName=a.nickName:this.nickName=c.default.Tool.nickName,t&&t.length>0&&(a&&a.tool&&(this.tool=a.tool),this.x0=t[0].x,this.y0=t[0].y,this.x1=t[t.length-1].x,this.y1=t[t.length-1].y,a&&(this.color=a.color),a&&a.keys&&a.keys.some(function(e){return"Shift"===e}))){var l=Math.sqrt((Math.pow(this.y1-this.y0,2)+Math.pow(this.x1-this.x0,2))/2),d=180*Math.atan2(this.y1-this.y0,this.x1-this.x0)/Math.PI+180,f=Math.abs(Math.floor((d+22.5)%360/45));switch(f%4){case 0:this.y1=this.y0;break;case 1:this.x1=this.x0+(f>4?l:-l),this.y1=this.y0+(f>4?l:-l);break;case 2:this.x1=this.x0;break;case 3:this.x1=this.x0+(f>4?-l:l),this.y1=this.y0+(f>4?l:-l)}}}return(0,l.default)(e,[{key:"getNewInstance",value:function(t){return new e([],t?{}:{id:this.id})}},{key:"clone",value:function(e){var t=this.getNewInstance(e);return t.x0=this.x0,t.y0=this.y0,t.x1=this.x1,t.y1=this.y1,t.color=this.color,t.tool=this.tool,t.width=this.width,t.svcId=e?0:this.svcId,t.userId=this.userId,t.nickName=this.nickName,t.mergeMethod=this.mergeMethod,t}},{key:"draw",value:function(e){e.beginPath(),e.lineWidth=this.width,e.lineCap="round",e.strokeStyle=this.color||"#fff",e.moveTo(this.x0,this.y0),e.lineTo(this.x1,this.y1),e.stroke()}},{key:"getDegrees",value:function(){return 180*Math.atan2(this.y1-this.y0,this.x1-this.x0)/Math.PI}}]),e}();t.StrightLine=d},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){e.exports=a.p+"static/media/stu3.397c5b36.svg"},function(e,t,a){e.exports=a.p+"static/media/stu4.2734e4d9.svg"},function(e,t,a){e.exports=a.p+"static/media/stu5.4c3a6961.svg"},,function(e,t,a){var n=a(27),o=a(5);Object.defineProperty(t,"__esModule",{value:!0}),t.OutlineViewer=void 0;var i=o(a(41)),r=o(a(38)),l=o(a(7)),s=o(a(8)),u=o(a(12)),c=o(a(13)),d=o(a(81)),f=o(a(14)),p=n(a(0)),h=a(148),m=a(25);a(658);var g=o(a(19)),_=o(a(52)),E=a(16),v=a(93),S=o(a(119)),y=function(e){function t(e){var a;return(0,l.default)(this,t),(a=(0,u.default)(this,(0,c.default)(t).call(this,e))).bookViewContainer=p.default.createRef(),a.disposers=[],a.state={pages:[]},a.isInited=!1,a.scrollToPage=function(e){var t=0,n=null;if(a.state.pages[e-1]&&a.state.pages[e-1].pageContainerEl){var o=0,i=0;a.state.pages[e-1].pageContainerEl&&(n=a.state.pages[e-1].pageContainerEl)&&(t=n.offsetTop),a.bookViewContainer.current&&(i=a.bookViewContainer.current.clientHeight+a.bookViewContainer.current.scrollTop),a.bookViewContainer.current&&(o=a.bookViewContainer.current.scrollTop),n&&(n.offsetTop<o||n.offsetTop>i)&&a.bookViewContainer.current&&(a.bookViewContainer.current.scrollTo?a.bookViewContainer.current.scrollTo({left:0,top:t-10,behavior:"smooth"}):a.bookViewContainer.current.scrollTop=t-10)}},a.init=function(e){t.source.loadFile(e).then(function(e){a.isInited=!0,a.setState(function(){var a=(0,r.default)(Array(e.numPages)).map(function(a,n){return{id:S.default.v4(),realPageNum:n+1,show:!1,rendered:!1,img:"",abstract:t.source===h.pdfSource?g.default.book.outlineNotes[n+1]||"":e.pagesArray[n].note||"",expand:!1,canvasEl:null,containerEl:null,containerInnerEl:null,pageContainerEl:null,isCurentPage:!1,isRendering:!1}});return g.default.book.vPages.forEach(function(e){a.splice(e-1,0,{id:S.default.v4(),realPageNum:-1,show:!1,rendered:!1,img:"",abstract:"",expand:!1,canvasEl:null,containerEl:null,containerInnerEl:null,pageContainerEl:null,isCurentPage:!1,isRendering:!1})}),console.log("new page vpage",a.map(function(e){return e.realPageNum})),g.default.book.curPage>a.length&&(g.default.book.curPage=a.length),g.default.book.curPage&&a[g.default.book.curPage-1]&&(a[g.default.book.curPage-1].isCurentPage=!0),g.default.book.totalPage=a.length,{pages:a}}),a.onScroll((0,d.default)(a))}).catch(function(e){return console.log("init err: ",e)})},a.showPage=function(e){console.log("thumbnails show page entering"),a.setState(function(n){var o=n.pages.slice(),i=o[e-1];return i.isRendering&&console.error("page "+e+" is rendering."),!i.rendered&&!i.isRendering&&i.canvasEl&&i.containerEl&&t.source.renderPage(i.realPageNum,i.canvasEl,i.containerEl,null,"img").then(function(t){console.log("rendered "+e),i.pageContainerEl&&(i.pageContainerEl.style.paddingTop=Math.round(t.canvasHeight)+20+"px"),i.containerEl&&(i.containerEl.style.height=Math.round(t.canvasHeight)+20+"px"),i.containerInnerEl&&(i.containerInnerEl.style.width=Math.round(t.canvasWidth)+"px"),i.containerInnerEl&&(i.containerInnerEl.style.height=Math.round(t.canvasHeight)+"px"),a.setState(function(e){return e.pages.forEach(function(e){e.id===i.id&&(e.rendered=!0,e.isRendering=!1)}),e})}).catch(function(t){console.error(t,"rendered page "+e+" fail, will retry"),setTimeout(function(){i.isRendering=!1,a.showPage(e)},500)}),i.isRendering=!0,{pages:o}})},a.addPage=function(e){a.setState(function(t){var a=t.pages.slice();return a.forEach(function(t,a){a>=e-1&&(t.rendered=!1,t.id=S.default.v4())}),a.splice(e-1,0,{id:S.default.v4(),realPageNum:-1,show:!1,rendered:!1,img:"",abstract:"",expand:!1,canvasEl:null,containerEl:null,containerInnerEl:null,pageContainerEl:null,isCurentPage:!1,isRendering:!1}),a.forEach(function(e,t){e.isCurentPage=t+1===g.default.book.curPage}),g.default.book.totalPage=a.length,{pages:a}},function(){a.onScroll((0,d.default)(a))})},a.onScroll=_.default.throttle(function(e){if(e.isInited&&e.bookViewContainer.current){var t=e.bookViewContainer.current.getBoundingClientRect(),a=t.top,n=(t.left,t.width),o=t.height;n>0&&o>0&&e.state.pages.forEach(function(t,n){if(t.canvasEl){var i=t.canvasEl.getBoundingClientRect(),r=t.pageContainerEl&&t.pageContainerEl.getBoundingClientRect(),l=!!r&&r.top<o&&r.top+r.height>a,s=!!r&&r.top<a&&r.top+r.height-i.height>a;t.expand&&l&&s&&r&&t.containerEl?(t.containerEl.style.top=t.isCurentPage?"38px":"35px",t.containerEl.style.position="fixed"):l&&t.containerEl&&(t.containerEl.style.top="0px",t.containerEl.style.position="absolute"),!l||t.rendered||t.isRendering||e.showPage(n+1)}})}},100),a.expandAbstract=function(e){a.setState(function(t){var n=t.pages.slice();return n.forEach(function(t,n){t.expand&&t.containerEl&&(t.containerEl.style.top="0px",t.containerEl.style.position="absolute"),e===n+1?(!t.expand&&a.scrollToPage(e),t.expand=!t.expand):t.expand=!1}),{pages:n}},function(){a.onScroll((0,d.default)(a))})},a.onPage=function(e){g.default.book.curPage=e,m.api.request("wbPageData",{textBookId:g.default.book.bookId,page:e})},a}return(0,f.default)(t,e),(0,s.default)(t,[{key:"componentWillReceiveProps",value:function(e){"show"in e&&!0===e.show&&this.onScroll(this)}},{key:"componentDidMount",value:function(){var e=this;g.default.book.bookUrl&&g.default.book.bookUrl.length>0&&this.init(g.default.book.bookUrl),this.disposers=[],this.disposers.push((0,E.reaction)(function(){return g.default.book.bookUrl},function(t){e.init(t)})),this.disposers.push((0,E.reaction)(function(){return g.default.book.curPage},function(t){t<1||(console.log("reaction current page changed"),e.setState(function(e){return e.pages.forEach(function(e,a){a+1!==t&&e.isCurentPage&&(e.isCurentPage=!1),a+1===t&&(e.isCurentPage=!0)}),e},function(){e.scrollToPage(t)}))})),this.disposers.push((0,E.reaction)(function(){return(0,E.toJS)(g.default.book.vPages)},function(t){t.forEach(function(t){e.addPage(t)})})),v.siderState.observe(function(t){"open"===t.newValue&&e.scrollToPage(g.default.book.curPage)})}},{key:"componentWillUnmount",value:function(){this.disposers&&this.disposers.length>0&&(this.disposers.forEach(function(e){return e()}),this.disposers=[])}},{key:"render",value:function(){var e=this;return p.default.createElement("div",{style:(0,i.default)({display:this.props.show?"block":"none"},this.props.style),className:"outline-view-container scroll",ref:this.bookViewContainer,onScroll:function(){return e.onScroll(e)}},this.state.pages.map(function(t,a){return p.default.createElement("div",{key:t.id,ref:function(e){return t.pageContainerEl=e},className:"outline-page-container page-"+(a+1)+" "+(t.show?"show":"")+" "+(t.rendered?"rendered":"")+" "+(t.isCurentPage?"cur-page":"")},p.default.createElement("div",{className:"thumbnail",ref:function(e){return t.containerEl=e}},p.default.createElement("div",{className:"thumbnail-inner",ref:function(e){return t.containerInnerEl=e}},p.default.createElement("canvas",{ref:function(e){return t.canvasEl=e},className:"outline-page-canvas",onClick:function(){return e.onPage(a+1)}}),p.default.createElement("span",null,a+1),t.abstract&&p.default.createElement("a",{href:"javascript:void(0);",className:t.expand?"expand":"",onClick:function(){return e.expandAbstract(a+1)}}))),t.expand&&p.default.createElement("p",null,t.abstract||""))}))}}]),t}(p.Component);t.OutlineViewer=y},,,,,,,,,function(e,t,a){var n=a(5),o=a(27);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,r=n(a(7)),l=n(a(8)),s=n(a(12)),u=n(a(13)),c=n(a(14)),d=o(a(0)),f=a(30),p=n(a(712)),h=n(a(28)),m=(0,f.observer)(i=function(e){function t(e){return(0,r.default)(this,t),(0,s.default)(this,(0,u.default)(t).call(this,e))}return(0,c.default)(t,e),(0,l.default)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this;return d.default.createElement("div",null,this.props.show&&d.default.createElement("div",{className:this.props.isLight?p.default.confirm+" "+p.default.light:""+p.default.confirm,id:"confirm",style:this.props.style},d.default.createElement("div",{className:p.default.confirmInner},d.default.createElement("img",{src:this.props.isLight?a(713):a(714),alt:h.default.get("CONFIRM_IMG_FAIL")}),d.default.createElement("div",{className:p.default.content},d.default.createElement("p",null,this.props.content)),d.default.createElement("div",{className:p.default.buttonGroup},d.default.createElement("button",{className:p.default.cancel,onClick:function(){e.props.cancel.onCancel()}},this.props.cancel.text),d.default.createElement("button",{className:p.default.submit,onClick:function(){e.props.confirm.onConfirm(e.props.params)}},this.props.confirm.text)))))}}]),t}(d.Component))||i;t.default=m},function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PencilStroke",{enumerable:!0,get:function(){return n.PencilStroke}}),Object.defineProperty(t,"PencilStrokeOrigin",{enumerable:!0,get:function(){return n.PencilStrokeOrigin}}),Object.defineProperty(t,"PencilInkStroke",{enumerable:!0,get:function(){return n.PencilInkStroke}}),Object.defineProperty(t,"PencilCompare",{enumerable:!0,get:function(){return n.PencilCompare}}),Object.defineProperty(t,"GlowStroke",{enumerable:!0,get:function(){return o.GlowStroke}}),Object.defineProperty(t,"PresureStroke",{enumerable:!0,get:function(){return i.PresureStroke}}),Object.defineProperty(t,"StrightLine",{enumerable:!0,get:function(){return r.StrightLine}}),Object.defineProperty(t,"RectStroke",{enumerable:!0,get:function(){return l.RectStroke}}),Object.defineProperty(t,"CircleStroke",{enumerable:!0,get:function(){return s.CircleStroke}}),Object.defineProperty(t,"Erase",{enumerable:!0,get:function(){return u.Erase}}),Object.defineProperty(t,"FontStroke",{enumerable:!0,get:function(){return c.FontStroke}});var n=a(85),o=a(276),i=a(719),r=a(197),l=a(277),s=a(720),u=a(721),c=a(722)},,function(e,t,a){var n=a(27),o=a(5);Object.defineProperty(t,"__esModule",{value:!0}),t.idGen=void 0;var i=o(a(7)),r=n(a(119)),l=new function e(){(0,i.default)(this,e),this.id=0,this.getId=function(){return r.v4()}};t.idGen=l},function(e,t,a){var n=a(5);Object.defineProperty(t,"__esModule",{value:!0}),t.hexToRgb=d,t.hexToRgba=function(e,t){var a=d(e),n=a.r,o=a.g,i=a.b;return"rgba("+n+", "+o+", "+i+", "+t+")"},t.GlowStroke=void 0;var o=n(a(7)),i=n(a(8)),r=n(a(12)),l=n(a(13)),s=n(a(14)),u=a(85),c=n(a(19));function d(e){if(!e)return{};var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:{r:255,g:255,b:255}}var f=function(e){function t(e,a){var n;return(0,o.default)(this,t),(n=(0,r.default)(this,(0,l.default)(t).call(this,e,a))).tool="signpen",n.width=c.default.Tool.prompt.paintBrush.option[1].value/c.default.book.scale||25,n}return(0,s.default)(t,e),(0,i.default)(t,[{key:"getNewInstance",value:function(e){return new t([],e?{}:{id:this.id})}},{key:"draw",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var t=d(this.color);e.beginPath(),e.strokeStyle=t?"rgba("+t.r+", "+t.g+", "+t.b+", 0.6)":"#fff",e.lineCap="round",e.lineWidth=this.width,this.line.forEach(function(t,a){e.moveTo(t.x0,t.y0),e.bezierCurveTo(t.cp1x,t.cp1y,t.cp2x,t.cp2y,t.x1,t.y1)}),e.stroke()}}]),t}(u.PencilStroke);t.GlowStroke=f},function(e,t,a){var n=a(5);Object.defineProperty(t,"__esModule",{value:!0}),t.RectStroke=void 0;var o=n(a(141)),i=n(a(46)),r=n(a(7)),l=n(a(8)),s=n(a(12)),u=n(a(13)),c=n(a(81)),d=n(a(14)),f=a(197),p=a(85),h=n(a(19)),m=function(e){function t(e,a){var n;if((0,r.default)(this,t),(n=(0,s.default)(this,(0,u.default)(t).call(this,e,a))).rotation=0,n.tool="square",n.disableRotation=!1,n.mergeMethod="append",n.update=function(e,t){if(e&&!(e.length<=0)&&(n.x0=Math.min(e[0].x,e.slice(-1)[0].x),n.y0=Math.min(e[0].y,e.slice(-1)[0].y),n.x1=Math.max(e[0].x,e.slice(-1)[0].x),n.y1=Math.max(e[0].y,e.slice(-1)[0].y),t&&t.keys&&t.keys.some(function(e){return"Shift"===e}))){var a=Math.sqrt((Math.pow(n.y1-n.y0,2)+Math.pow(n.x1-n.x0,2))/2),o=180*Math.atan2(n.y1-n.y0,n.x1-n.x0)/Math.PI+180,i=Math.abs(Math.floor(o/90));switch(i%2){case 0:n.x1=n.x0+(i>=2?a:-a),n.y1=n.y0+(i>=2?a:-a);break;case 1:n.x1=n.x0+(i>=2?-a:a),n.y1=n.y0+(i>=2?a:-a)}}},n.pointRotated=function(e,t,a){if(0===n.rotation)return{x:e,y:t};var o=(n.x0+n.x1)/2,i=(n.y0+n.y1)/2,r=e-o,l=t-i;return{x:o+r*Math.cos(a?-n.rotation:n.rotation)-l*Math.sin(a?-n.rotation:n.rotation),y:i+r*Math.sin(a?-n.rotation:n.rotation)+l*Math.cos(a?-n.rotation:n.rotation)}},n.shiftScale=function(e,t){var a=Math.sqrt(Math.pow(e,2)+Math.pow(t,2)),o=Math.abs((n.y1-n.y0)/(n.x1-n.x0)),i=Math.sqrt(a*a/(1+o*o));return{rx:i,ry:o*i}},n.assign=function(e){(0,i.default)((0,c.default)(n),e)},n.getNewInstance=function(e){return new t([],e?{}:{id:n.id})},n._transform=function(e,t){var a=function(e,t){return{x:(e.x+t.x)/2,y:(e.y+t.y)/2}},o=n.clone(t&&t.newId),i={x:(n.x0+n.x1)/2,y:(n.y0+n.y1)/2},r=n.pointRotated(n.x0,n.y0),l=n.pointRotated(n.x1,n.y0),s=n.pointRotated(n.x1,n.y1),u=n.pointRotated(n.x0,n.y1),c=a(r,l),d=a(l,s),f=a(s,u),m=a(r,u),g={x:e[0].x,y:e[0].y},_={x:e[e.length-1].x,y:e[e.length-1].y},E=Math.sqrt(Math.pow((0,p.distance)(g,i),2)-Math.pow((0,p.distanceP2L)(g.x,g.y,i.x,i.y,c.x,c.y),2)),v=Math.sqrt(Math.pow((0,p.distance)(g,i),2)-Math.pow((0,p.distanceP2L)(g.x,g.y,i.x,i.y,d.x,d.y),2)),S=Math.sqrt(Math.pow((0,p.distance)(_,i),2)-Math.pow((0,p.distanceP2L)(_.x,_.y,i.x,i.y,c.x,c.y),2)),y=Math.sqrt(Math.pow((0,p.distance)(_,i),2)-Math.pow((0,p.distanceP2L)(_.x,_.y,i.x,i.y,d.x,d.y),2))/v,w=S/E;t&&t.keys&&t.keys.length&&t.keys.includes("Shift")&&(y=w=Math.max(y,w));var A=n.pointRotated((n.x0+n.x1)/2,n.y0-30/h.default.book.scale),I=[r,l,s,u].some(function(e){return(0,p.distance)(e,g)<=15/h.default.book.scale}),T=[d,m].some(function(e){return(0,p.distance)(e,g)<=15/h.default.book.scale}),b=[c,f].some(function(e){return(0,p.distance)(e,g)<=15/h.default.book.scale}),C=(0,p.distance)(A,g)<=15/h.default.book.scale;if((I||b)&&(o.y0=i.y+(n.y0-i.y)*w,o.y1=i.y+(n.y1-i.y)*w),(I||T)&&(o.x0=i.x+(n.x0-i.x)*y,o.x1=i.x+(n.x1-i.x)*y),C){var N=Math.atan2(_.y-i.y,_.x-i.x),x=Math.atan2(g.y-i.y,g.x-i.x);o.rotation=n.rotation+N-x}return I||T||b||C||(o.x0=n.x0+_.x-g.x,o.y0=n.y0+_.y-g.y,o.x1=n.x1+_.x-g.x,o.y1=n.y1+_.y-g.y),{newPaint:o,ratioOnY:w,ratioOnX:y,isOnCorner:I,isOnXAsix:T,isOnYAsix:b,isOnRotate:C}},n.transform=function(e,t){return n._transform(e,t).newPaint},n.hitController=function(e,t){return[[n.x0,n.y0],[(n.x0+n.x1)/2,n.y0],[n.x1,n.y0],[n.x1,(n.y0+n.y1)/2],[n.x1,n.y1],[(n.x0+n.x1)/2,n.y1],[n.x0,n.y1],[n.x0,(n.y0+n.y1)/2]].concat(n.disableRotation?[]:[[(n.x0+n.x1)/2,n.y0-30/h.default.book.scale]]).map(function(e){var t=(0,o.default)(e,2),a=t[0],i=t[1];return n.pointRotated(a,i)}).findIndex(function(a){return Math.sqrt(Math.pow(a.x-e,2)+Math.pow(a.y-t,2))<=15/h.default.book.scale})+1},n.hitCheck=function(e,t){var a=n.pointRotated(n.x0,n.y0),o=n.pointRotated(n.x1,n.y0),i=n.pointRotated(n.x1,n.y1),r=n.pointRotated(n.x0,n.y1);return(0,p.isPointAroundLine)(e,t,a.x,a.y,o.x,o.y,10/h.default.book.scale)||(0,p.isPointAroundLine)(e,t,o.x,o.y,i.x,i.y,10/h.default.book.scale)||(0,p.isPointAroundLine)(e,t,i.x,i.y,r.x,r.y,10/h.default.book.scale)||(0,p.isPointAroundLine)(e,t,r.x,r.y,a.x,a.y,10/h.default.book.scale)},n.intersectCheck=function(e,t,a,o){var i=n.pointRotated(n.x0,n.y0),r=n.pointRotated(n.x1,n.y0),l=n.pointRotated(n.x1,n.y1),s=n.pointRotated(n.x0,n.y1);return(0,p.intersects2Line)(e,t,a,o,i.x,i.y,r.x,r.y)||(0,p.intersects2Line)(e,t,a,o,r.x,r.y,l.x,l.y)||(0,p.intersects2Line)(e,t,a,o,l.x,l.y,s.x,s.y)||(0,p.intersects2Line)(e,t,a,o,s.x,s.y,i.x,i.y)||n.hitCheck(e,t)||n.hitCheck(a,o)},n.swith2Line=function(){var e=n.pointRotated(n.x0,n.y0),t=n.pointRotated(n.x1,n.y0),a=n.pointRotated(n.x1,n.y1),o=n.pointRotated(n.x0,n.y1);return[new f.StrightLine([e,o],{color:n.color}),new f.StrightLine([t,a],{color:n.color}),new f.StrightLine([a,o],{color:n.color}),new f.StrightLine([e,t],{color:n.color})]},n.drawController=function(e){e.save(),e.lineWidth=2/h.default.book.scale,e.strokeStyle="#CCC",e.fillStyle="white";var t=[[n.x0,n.y0],[(n.x0+n.x1)/2,n.y0],[n.x1,n.y0],[n.x1,(n.y0+n.y1)/2],[n.x1,n.y1],[(n.x0+n.x1)/2,n.y1],[n.x0,n.y1],[n.x0,(n.y0+n.y1)/2]];if(n.rotation?(e.translate((n.x0+n.x1)/2,(n.y0+n.y1)/2),e.rotate(n.rotation),t.forEach(function(t){var a=(0,o.default)(t,2),i=a[0],r=a[1];e.beginPath(),e.arc(i-(n.x0+n.x1)/2,r-(n.y0+n.y1)/2,4/h.default.book.scale,0,2*Math.PI),e.fill(),e.stroke()})):t.forEach(function(t){var a=(0,o.default)(t,2),n=a[0],i=a[1];e.beginPath(),e.arc(n,i,4/h.default.book.scale,0,2*Math.PI),e.fill(),e.stroke()}),!n.disableRotation){var a=new Image;a.src=h.default.Tool.cursor.rotate.icon,n.rotation?e.drawImage(a,-8/h.default.book.scale,-(n.y1-n.y0)/2-38/h.default.book.scale,16/h.default.book.scale,16/h.default.book.scale):e.drawImage(a,(n.x0+n.x1)/2-8/h.default.book.scale,n.y0-38/h.default.book.scale,16/h.default.book.scale,16/h.default.book.scale)}e.restore()},n.getCursorType=function(e,t){switch(n.hitController(e,t)){case 1:case 5:return"cornerLeft";case 2:case 6:return"vertical";case 3:case 7:return"cornerRight";case 4:case 8:return"horizontal";case 9:return"rotate";default:return"transform"}},e&&e.length>0&&(n.x0=Math.min(e[0].x,e[e.length-1].x),n.y0=Math.min(e[0].y,e[e.length-1].y),n.x1=Math.max(e[0].x,e[e.length-1].x),n.y1=Math.max(e[0].y,e[e.length-1].y),a&&a.rotation&&(n.rotation=a.rotation),a&&a.tool&&(n.tool=a.tool),a&&a.keys&&a.keys.some(function(e){return"Shift"===e}))){var l=Math.sqrt((Math.pow(n.y1-n.y0,2)+Math.pow(n.x1-n.x0,2))/2),d=180*Math.atan2(n.y1-n.y0,n.x1-n.x0)/Math.PI+180,m=Math.abs(Math.floor(d/90));switch(m%2){case 0:n.x1=n.x0+(m>=2?l:-l),n.y1=n.y0+(m>=2?l:-l);break;case 1:n.x1=n.x0+(m>=2?-l:l),n.y1=n.y0+(m>=2?l:-l)}}return n}return(0,d.default)(t,e),(0,l.default)(t,[{key:"clone",value:function(e){var t=this.getNewInstance(e);return t.x0=this.x0,t.y0=this.y0,t.x1=this.x1,t.y1=this.y1,t.color=this.color,t.rotation=this.rotation,t.tool=this.tool,t.width=this.width,t.svcId=e?0:this.svcId,t.userId=this.userId,t.nickName=this.nickName,t.mergeMethod=this.mergeMethod,t}},{key:"draw",value:function(e){e.save(),e.beginPath(),e.lineWidth=this.width,e.lineCap="round",e.strokeStyle=this.color||"#fff";var t=this.x1-this.x0,a=this.y1-this.y0;this.rotation?(e.translate((this.x0+this.x1)/2,(this.y0+this.y1)/2),e.rotate(this.rotation),e.rect((this.x0-this.x1)/2,(this.y0-this.y1)/2,Math.max(t,2),Math.max(a,2))):e.rect(this.x0,this.y0,Math.max(t,2),Math.max(a,2)),e.stroke(),e.restore()}},{key:"getDegrees",value:function(){return 180*this.rotation/Math.PI}}]),t}(f.StrightLine);t.RectStroke=m},,,,,function(e,t,a){var n=a(27),o=a(5);Object.defineProperty(t,"__esModule",{value:!0}),t.BookViewer=t.PDFBookViewer=void 0;var i=o(a(41)),r=o(a(46)),l=o(a(38)),s=o(a(7)),u=o(a(8)),c=o(a(12)),d=o(a(13)),f=o(a(14)),p=n(a(0)),h=a(148),m=a(25);a(283);var g=o(a(19)),_=o(a(52)),E=a(16),v=a(93),S=o(a(97)),y=o(a(28)),w=a(747),A=o(a(284)),I=o(a(119)),T=function(e){function t(e){var a;return(0,s.default)(this,t),(a=(0,c.default)(this,(0,d.default)(t).call(this,e))).bookViewContainer=p.default.createRef(),a.source=h.pdfSource,a.listenersArray=[],a.reactionsArray=[],a.state={pages:[],errMessage:null,scale:1},a.refresh=_.default._debounce(function(){console.log("book refresh",g.default.book.curPage,a.state.pages[g.default.book.curPage-1]),g.default.book.curPage&&a.state.pages[g.default.book.curPage-1]&&!a.state.pages[g.default.book.curPage-1].isRendering&&a.onPage(g.default.book.curPage)},200),a.onPage=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e&&a.state.pages[e-1]&&(console.log("on page"),a.setState(function(t){return t.pages[e-1].isPreload=!0,{pages:t.pages}},function(){a.showPage(e).then(function(){a.setState(function(t){var a=t.pages[e-1];return a.canvasEl&&!a.img&&(a.img=a.canvasEl.toDataURL()),a.isImgDone=!0,t.pages.forEach(function(e){e.isCurentPage=e===a,e.isPreload&&!e.isImgDone||(e.isPreload=e===a)}),a.isCurentPage=!0,{pages:t.pages}})}).catch(function(n){t>10?console.error("page fail more then 10 times",n):(console.error("page fail retry "+t+" times",n),a.setState(function(t){t.pages[e-1].rendered=!1},function(){setTimeout(function(){a.onPage(e,t+1)},1e3)}))})}))},a.init=function(e){a.source.loadFile(e).then(function(e){a.setState({errMessage:null}),a.setState(function(){var t=(0,l.default)(Array(e.numPages)).map(function(e,t){return{id:I.default.v4(),realPageNum:t+1,show:!1,rendered:!1,img:"",isImgDone:!1,abstract:g.default.book.outlineNotes[t+1]||"",expand:!1,canvasEl:null,containerEl:null,pageContainerEl:null,isCurentPage:!1,isRendering:!1}});return g.default.book.vPages.forEach(function(e){t.splice(e-1,0,{id:I.default.v4(),realPageNum:-1,show:!1,rendered:!1,img:"",isImgDone:!1,abstract:"",expand:!1,canvasEl:null,containerEl:null,pageContainerEl:null,isCurentPage:!1,isRendering:!1})}),g.default.book.curPage&&t[g.default.book.curPage-1]&&(t[g.default.book.curPage-1].isCurentPage=!0),g.default.book.totalPage=t.length,{pages:t}},function(){g.default.book.curPage&&a.onPage(g.default.book.curPage)})}).catch(function(e){console.log("init err: ",e),b.source===h.pdfSource&&a.setState({errMessage:y.default.get("BOOK_LOAD_FAIL_MESSAGE")})})},a.showPage=function(e){return console.log("showpage",e),new Promise(function(t,n){var o=a.state.pages.slice()[e-1],l={notScale:!0,autoScale:!1,notRender:o.rendered||o.isRendering||!o.canvasEl||!o.containerEl};o.isRendering=!0,a.source.renderPage(o.realPageNum,o.canvasEl,o.containerEl,l).then(function(n){console.log("book rendered "+e),(0,r.default)(g.default.book,{scale:n.scale,width:n.canvasWidth,height:n.canvasHeight}),(0,r.default)(g.default.home,{ctrWidth:n.ctrWidth,ctrHeight:n.ctrHeight}),a.setState(function(e){return(0,r.default)(e.pages.find(function(e){return e.id===o.id}),{rendered:!0,isRendering:!1}),(0,i.default)({},e,{scale:n.scale/(n.anotherScale||1)})},function(){t()})}).catch(function(e){return n(e)})})},a.addPage=function(e){a.setState(function(t){var a=t.pages.slice();return a.forEach(function(t,a){a>=e-1&&(t.rendered=!1,t.id=I.default.v4())}),a.splice(e-1,0,{id:I.default.v4(),realPageNum:-1,show:!1,rendered:!1,img:"",isImgDone:!1,abstract:"",expand:!1,canvasEl:null,containerEl:null,pageContainerEl:null,isCurentPage:!1,isRendering:!1}),g.default.book.totalPage=a.length,{pages:a}},function(){e===g.default.book.curPage&&a.onPage(e)})},a.export=function(e){var t=a.state.pages[(e||g.default.book.curPage)-1];return!!(t&&t.canvasEl&&t.rendered)&&t.canvasEl.toDataURL()},a.reactionsArray=[],a.listenersArray=[],a}return(0,f.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){var e=this;(0,E.reaction)(function(){return g.default.book.bookUrl},function(t,a){e.init(t),e.reactionsArray.push(a)}),(0,E.reaction)(function(){return g.default.book.curPage},function(t,a){t<1||(e.refresh(),e.reactionsArray.push(a))}),(0,E.reaction)(function(){return(0,E.toJS)(g.default.book.vPages)},function(t,a){t.forEach(function(t){e.addPage(t)}),e.reactionsArray.push(a)}),(0,E.reaction)(function(){return g.default.home.wrapperMarginTop},function(t){e.refresh(),e.reactionsArray.push(t)}),window.addEventListener("resize",this.refresh,!1),v.siderState.observe(this.refresh),this.refresh(),(0,E.reaction)(function(){return g.default.book.exportImage.get("wbImage")},function(t,a){if(console.log("wbImage book",t),e.reactionsArray.push(a),t&&t.length){var n=null,o=e.state.pages[g.default.book.curPage-1],i=new Image;i.onload=function(){var e=document.createElement("canvas");o.canvasEl&&(e.width=o.canvasEl.width,e.height=o.canvasEl.height);var t=e.getContext("2d");t&&o.canvasEl&&t.drawImage(o.canvasEl,0,0),t&&t.drawImage(i,0,0),n=e.toDataURL(),m.api.request("screenShotAtQuiz",{imageBase64:n.split(",")[1],quizId:g.default.answer.quizId,uid:g.default.Tool.userId,page:g.default.book.curPage,screenShotName:g.default.book.exportImage.get("screenShotName")})},i.src=t}}),!m.api.isListen("wbPageDataNotify")&&this.listenersArray.push(m.api.listen("wbPageDataNotify",function(e){e.param.textBookId===g.default.book.bookId&&e.param.page&&(g.default.book.curPage=e.param.page)})),!m.api.isListen("wbNewPageDataNotify")&&this.listenersArray.push(m.api.listen("wbNewPageDataNotify",function(e){if(e.param.textBookId===g.default.book.bookId){for(var t=[],a=function(a){var n=e.payload[a];n.crswarePage<0&&!g.default.book.pageData.some(function(e){return e.seq===n.seq})&&t.push(n)},n=0;n<e.payload.length;n++)a(n);g.default.book.pageData=e.payload,t.length&&console.log("newpage",t.map(function(e){return e.page})),t.length&&(g.default.book.vPages=t.map(function(e){return e.page}))}}))}},{key:"componentWillUnmount",value:function(){this.listenersArray.forEach(function(e){e&&e.cancel&&e.cancel()}),this.reactionsArray.forEach(function(e){e&&e.dispose&&e.dispose()}),window.removeEventListener("resize",this.refresh,!1)}},{key:"render",value:function(){var e=this;return p.default.createElement("div",{className:"book-view-container",ref:this.bookViewContainer},this.state.pages.map(function(t,a){return t.isPreload&&p.default.createElement("div",{key:t.id,ref:function(e){return t.pageContainerEl=e},className:"book-page-container page-"+(a+1)+" "+(t.rendered?"rendered":"")+" "+(t.isCurentPage&&t.rendered?"cur-page":"")},p.default.createElement("img",{onDragStart:function(e){e.preventDefault()},src:t.img,style:{transform:"translateX(-50%) scale("+(e.state.scale>1?e.state.scale:1)+")"}}),p.default.createElement("div",{className:"thumbnail",ref:function(e){return t.containerEl=e}},p.default.createElement("canvas",{ref:function(e){return t.canvasEl=e},className:"book-page-canvas "+(t.isImgDone?"hide":""),style:{transform:"translateX(-50%) scale("+e.state.scale+")"}})))}),p.default.createElement(S.default,{contentText:this.state.errMessage}))}}]),t}(p.Component);t.PDFBookViewer=T;var b=function(e){function t(e){var a;return(0,s.default)(this,t),(a=(0,c.default)(this,(0,d.default)(t).call(this,e))).state={pages:[],errMessage:null},a.switchViewer=function(e){return new Promise(function(n,o){console.log("switch viewer is called"),e===t.source?n():a.setState({},function(){console.log("switch viewer call back is executed"),n()})})},a.switchedViewer=function(){a.setState({})},a.reportError4H5ICW=function(){console.log("handle error for h5 courseware");var e=y.default.get("ICW_SDK_INIT_FAILED_MESSAGE");t.source=null,a.setState({},function(){a.setState({errMessage:e})})},a}return(0,f.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){return t.source===h.h5CourseWareSource?p.default.createElement(w.H5BookViewer,null):t.source===h.pdfSource?p.default.createElement(T,null):p.default.createElement("div",{className:"book-view-container"},p.default.createElement(A.default,null),p.default.createElement(S.default,{contentText:this.state.errMessage}))}}]),t}(p.Component);t.BookViewer=b},function(e,t,a){},function(e,t,a){var n=a(27),o=a(5);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=o(a(7)),r=o(a(8)),l=o(a(12)),s=o(a(13)),u=o(a(14)),c=n(a(0)),d=o(a(748)),f=o(a(28)),p=function(e){function t(e){return(0,i.default)(this,t),(0,l.default)(this,(0,s.default)(t).call(this,e))}return(0,u.default)(t,e),(0,r.default)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return c.default.createElement("div",{className:d.default.loading},c.default.createElement("div",{className:d.default.loadingWrap},c.default.createElement("div",{className:d.default.loadingAnimal}),c.default.createElement("p",{className:d.default.loadingText}," ",f.default.get("ICW_BOOK_LOADING")," ")))}}]),t}(c.Component);t.default=p},,,,,,,,function(e,t,a){e.exports=a(293)},function(e,t,a){var n=a(27),o=a(5);a(294);var i=o(a(0)),r=o(a(17));a(518);var l=o(a(519)),s=a(30),u=o(a(19));a(768);var c=n(a(769));window.getTimeNow=function(){var e=new Date;return e.toLocaleTimeString()+" "+e.getMilliseconds()+"ms"},r.default.render(i.default.createElement(s.Provider,{store:u.default},i.default.createElement(l.default,null)),document.getElementById("root")),c.unregister()},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){},function(e,t,a){(function(e){var n=a(27),o=a(5);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=o(a(7)),r=o(a(8)),l=o(a(12)),s=o(a(13)),u=o(a(14)),c=n(a(0)),d=o(a(28)),f=o(a(241)),p=o(a(542)),h={"en-US":a(764),"zh-CN":a(765)};e.Intl=f.default,a(766),a(767);var m=function(e){function t(){var e,a;(0,i.default)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=(0,l.default)(this,(e=(0,s.default)(t)).call.apply(e,[this].concat(o)))).state={initDone:!1},a.loadLocales=function(e){var t=e;t="cn"===t?"zh-CN":"en-US",d.default.init({currentLocale:t,locales:h}).then(function(){a.setState({initDone:!0})})},a}return(0,u.default)(t,e),(0,r.default)(t,[{key:"componentDidMount",value:function(){var e=window.location.search&&window.location.search.includes("cn")?"cn":"en";this.loadLocales(e)}},{key:"render",value:function(){return this.state.initDone&&c.default.createElement(p.default,null)}}]),t}(c.Component);t.default=m}).call(this,a(55))},,,,function(e,t){},,,,,,,,,function(e,t){},,,,,,,,,,function(e,t,a){var n=a(27),o=a(5);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=o(a(140)),r=o(a(38)),l=o(a(141)),s=o(a(7)),u=o(a(8)),c=o(a(12)),d=o(a(13)),f=o(a(14)),p=n(a(0)),h=a(16),m=n(a(93)),g=o(a(703)),_=o(a(706)),E=o(a(710)),v=o(a(28)),S=o(a(272)),y=o(a(196)),w=o(a(715)),A=o(a(723)),I=o(a(731)),T=o(a(736)),b=a(25),C=o(a(740)),N=a(263),x=a(745),k=a(282),O=o(a(19)),D=(a(749),a(750)),P=a(753),L=a(148),M=o(a(756)),R=function(e){function t(e){var a;return(0,s.default)(this,t),(a=(0,c.default)(this,(0,d.default)(t).call(this,e))).audioPlayRef=p.default.createRef(),a.authAudioRef=p.default.createRef(),a.innerRef=p.default.createRef(),a.bookViewerRef=p.default.createRef(),a.h5ControllerJSLoaded=!1,a.times=[],a.ts=0,a.refreshLoop=function(){window.requestAnimationFrame(function(){for(var e=window.performance.now();a.times.length>0&&a.times[0]<=e-1e3;)a.times.shift();a.times.push(e);var t=Math.floor(e/300);a.ts!==t&&(O.default.home.fps=a.times.length,a.ts=t),a.refreshLoop()})},a.onChangeTool=function(e){a.setState({tool:e})},a.state={showStudentLayer:!1,showTeacherSider:!0,showFeedbackLayer:!1,showConfirm:!1,data:{},role:-1,showPraise:!1,classStatus:1,praiseData:null,cToggle:!1,tool:""},a}return(0,f.default)(t,e),(0,u.default)(t,[{key:"componentWillReceiveProps",value:function(e){console.log("update props",e)}},{key:"componentDidMount",value:function(){var e=this;console.log("\u767d\u677f\u6a21\u5757\u7248\u672c\u4fe1\u606f: v0.3.74\nnightly\u5206\u652f\ngen\u4e3b\u9898\u76ae\u80a4\n\u754c\u9762\u4e2d\u9690\u85cf\u7248\u672c\u53f7"),Promise.all([b.api.request("clsClassStatus"),b.api.request("clsSelfInfo")]).then(function(t){var a=(0,l.default)(t,2),n=a[0],o=a[1];e.setState({classStatus:n.param.state,role:o.identity,showTeacherSider:o.identity<=2}),O.default.Tool.setRoleAndUserId(o.identity,o.usrId,o.nickName)}),b.api.listen("clsSelfInfoNotify",function(t){e.setState({role:t.identity,showTeacherSider:!(t.identity>2)},function(){O.default.Tool.setRoleAndUserId(t.identity,t.usrId,t.nickName),O.default.Tool.ispauseDraw()})}),b.api.listen("clsUserListNotify",function(e){O.default.Tool.setUserList(e.payload)}),b.api.listen("clsClassInfoNotify",function(e){e.param&&e.param.courseStype&&(O.default.ClassType.setType(e.param.courseStype),console.log(" \u5df2\u8bbe\u7f6e\u5ba2\u6237\u7aef\u4f20\u6765\u7684\u7248\u672c already set version ",e.param.courseStype));var t=e.param.Tools;O.default.Tool.showAssessmentClass=4===e.param.courseStype&&t.some(function(e){return 5===e.ID}),O.default.Tool.cid=e.param.cid}),b.api.listen("clsUserLeaveNotify",function(t){3===e.state.role&&O.default.answer.stuQuizEnd(t.payload)}),b.api.listen("clsUserAuthNotify",function(e){O.default.Tool.setAuthList(e.payload),O.default.Tool.ispauseDraw()}),b.api.listen("clsAssStatusNotify",function(e){O.default.Tool.setAssStatus(e.param.status),O.default.Tool.ispauseDraw(),2===O.default.Tool.role&&k.BookViewer.source===L.h5CourseWareSource&&L.h5CourseWareSource.isCurrentPageInteractive()&&O.default.Tool.enableOperateItem()}),b.api.listen("unionMicStartNotify",function(t){console.log("\u5b66\u751f\u6536\u5230\u8001\u5e08\u53d1\u8d77\u8fde\u9ea6\u901a\u77e5",(0,h.toJS)(t));try{1===e.state.role?e.setState({showStudentLayer:!1}):2===e.state.role?1===t.creator_identity&&(1===t.um_status?e.setState({data:t},function(){e.setState({showStudentLayer:!0})}):e.setState({showStudentLayer:!1})):1===t.um_status?e.setState({data:t},function(){e.setState({showStudentLayer:!0})}):e.setState({showStudentLayer:!1})}catch(a){console.log("\u5b66\u751f\u5c42\u5f39\u51fa\u5931\u8d25")}}),O.default.home.init(),window.addEventListener("resize",function(){O.default.home.resizeBgImage()},!1),b.api.listen("rightPanelWidthNotify",function(e){console.log("\u6536\u5230mac\u53f3\u4fa7\u89c6\u9891\u533a\u57df\u5bbd\u5ea6\u53d8\u5316\uff01",JSON.stringify(e.param)),O.default.home.rightPanelWidthNotify(e.param)}),b.api.listen("multiQuizContentNotify",function(e){console.log("\u5b66\u751f\u6536\u5230\u7b54\u9898\u6d88\u606f",JSON.stringify(e.param)),O.default.answer.stuQuizStart(e.param)}),b.api.listen("multiQuizEndAnswerNotify",function(t){3===e.state.role&&(console.log("\u5b66\u751f\u6536\u5230\u7ed3\u675f\u7b54\u9898\u7684\u6d88\u606f",JSON.stringify(t.param)),O.default.answer.stuQuizEnd())}),b.api.listen("videoPlatformHeightNotify",function(t){var a=t.height||0;e.innerRef.current&&(e.innerRef.current.style.marginTop=a+"px",e.innerRef.current.style.height="calc(100% - "+a+"px)",e.innerRef.current.style.borderTop=a?"1px solid rgba(255,255,255,.1)":"none",O.default.home.wrapperMarginTop=parseFloat(a))}),m.siderState.observe(function(t){b.api.request("videoTabsOpen",{open:"open"===t.newValue?1:0,width:e.innerRef.current?e.innerRef.current.clientWidth:0}).then(function(e){return console.log("\u5ba2\u6237\u7aef\u6536\u5230\u4fa7\u8fb9\u680f\u72b6\u6001")})});b.api.listen("clsMatInfoNotify",function(t){var a=[];a.push(b.api.request("wbGetPageNum",{textBookId:t.id})),a.push(b.api.request("wbSyncSetData",{textBookId:t.id})),1===t.matType&&3===t.matSubType?(console.log("mat type is 1 and subtype is 3"),L.h5CourseWareSource.loadControllerJS(e.h5ControllerJSLoaded).then(function(){e.h5ControllerJSLoaded=!0,L.h5CourseWareSource.prepareClassRoom(t),a.push(window.ICWClassRoomSDK.initialized.promise),e.bookViewerRef.current&&a.push(e.bookViewerRef.current.switchViewer(L.h5CourseWareSource)),Promise.all(a).then(function(a){var n=(0,l.default)(a,2),o=n[0],s=n[1];console.log("ICWSDK initialized"),L.h5CourseWareSource.getVersionfromICWSDK().then(function(){k.BookViewer.source=L.h5CourseWareSource,N.OutlineViewer.source=L.h5CourseWareSource,e.bookViewerRef.current&&e.bookViewerRef.current.switchedViewer(),window.ICWClassRoomSDK.currentCourse.currentPage=o.param.page,console.log("current book url is "+window.ICWClassRoomSDK.currentCourseURL),O.default.book.bookUrl=window.ICWClassRoomSDK.currentCourseURL,O.default.book.vPages=(s.payload||[]).filter(function(e){return-1===e.crswarePage}).map(function(e){return e.page}),O.default.book.outlineNotes=Object.assign.apply(Object,[{}].concat((0,r.default)((t.notes&&t.notes.notes||[]).map(function(e){return(0,i.default)({},e.page,e.note)})))),O.default.book.curPage=o.param.page,O.default.book.diffHistory=new Map,O.default.book.bookId=t.id})}).catch(function(t){console.log("error happened",t),(t="h5SDKFailed -999")&&e.bookViewerRef.current&&e.bookViewerRef.current.reportError4H5ICW()})}).catch(function(e){console.log("error happened during loading ICWSDK js",e)})):(e.bookViewerRef.current&&a.push(e.bookViewerRef.current.switchViewer(L.pdfSource)),Promise.all(a).then(function(a){var n=(0,l.default)(a,2),o=n[0],s=n[1];k.BookViewer.source=L.pdfSource,N.OutlineViewer.source=L.pdfSource,e.bookViewerRef.current&&e.bookViewerRef.current.switchedViewer(),O.default.Tool.enableOperateItem(!1),O.default.book.bookUrl=t.url,console.log("open a pdf"),O.default.book.pageData=s.payload||[],O.default.book.vPages=(s.payload||[]).filter(function(e){return-1===e.crswarePage}).map(function(e){return e.page}),O.default.book.outlineNotes=Object.assign.apply(Object,[{}].concat((0,r.default)((t.notes&&t.notes.notes||[]).map(function(e){return(0,i.default)({},e.page,e.note)})))),O.default.book.curPage=o.param.page,O.default.book.diffHistory=new Map,O.default.book.bookId=t.id}))}),(0,h.reaction)(function(){return O.default.Tool.cToggle},function(t){e.setState({showConfirm:t})}),b.api.request("h5Loaded").then(function(){return console.log("h5Loaded succ")}),b.api.request("matLoaded"),b.api.request("versionReport",{version:"0.3.74"}).catch(function(e){})}},{key:"render",value:function(){return p.default.createElement("div",{className:y.default.container,onPointerDown:function(){return O.default.Tool.shutTool()}},p.default.createElement("div",{className:y.default.courseContainer,id:"courseContainer"},p.default.createElement("div",{className:y.default.courseContainerInner,ref:this.innerRef,id:"courseContainerInner"},this.state.showStudentLayer&&p.default.createElement(g.default,{data:this.state.data}),p.default.createElement(_.default,null),p.default.createElement(E.default,null),p.default.createElement(D.AuthAnimation,null),p.default.createElement("div",{className:y.default.paintCon},p.default.createElement(S.default,{show:this.state.showConfirm,content:v.default.get("CONFIRM_CONTENT"),params:{type:"clearScreen"},confirm:{text:v.default.get("CONFIRM_OK"),onConfirm:O.default.Tool.confirmClear},cancel:{text:v.default.get("CONFIRM_CANCEL"),onCancel:O.default.Tool.cancelClear}}),p.default.createElement(w.default,null),p.default.createElement(k.BookViewer,{ref:this.bookViewerRef}),p.default.createElement(x.TurnPageNew,null),p.default.createElement("div",{className:"debug-info"},!1,p.default.createElement("span",null,"v","0.3.74",!1),!1,!1)),p.default.createElement(C.default,null))),this.state.showTeacherSider&&p.default.createElement("div",{className:y.default.sideBar},p.default.createElement(m.default,null)),p.default.createElement(P.CountDown,null),p.default.createElement(P.CountDown,{isTimer:!0}),p.default.createElement(M.default,null),p.default.createElement(A.default,null),p.default.createElement(I.default,null),p.default.createElement(T.default,null))}}]),t}(p.Component);t.default=R},,,,,,,function(e,t,a){e.exports={"bar-content":"teacherSider_bar-content__3v6L6","bar-list":"teacherSider_bar-list__Wc-eO","bottom-list":"teacherSider_bottom-list__1DUXL","bar-icon":"teacherSider_bar-icon__FPL6p",active:"teacherSider_active__1c_IL",material:"teacherSider_material__1ZgXk",disabled:"teacherSider_disabled__21S3j","out-box":"teacherSider_out-box__3uRZ_",close:"teacherSider_close__1mSrw",triangle:"teacherSider_triangle__2oSfs",listContent:"teacherSider_listContent__3S4aw",title:"teacherSider_title__3by60",titleIcon:"teacherSider_titleIcon__xgb-2",titleText:"teacherSider_titleText__1M8Pp","bar-content-open":"teacherSider_bar-content-open__2ioUa","teacher-sider-open":"teacherSider_teacher-sider-open__21PFU","bar-content-close":"teacherSider_bar-content-close__23Ze2","teacher-sider-close":"teacherSider_teacher-sider-close__scyT_","k12teacher-sider-open":"teacherSider_k12teacher-sider-open__2iXtE","k12teacher-sider-close":"teacherSider_k12teacher-sider-close__3HAKR"}},function(e,t,a){var n=a(27),o=a(5);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=o(a(7)),r=o(a(8)),l=o(a(12)),s=o(a(13)),u=o(a(14)),c=n(a(0)),d=o(a(551)),f=a(16),p=o(a(122)),h=a(25),m=o(a(28)),g=o(a(52)),_=function(e){function t(e){var a;return(0,i.default)(this,t),(a=(0,l.default)(this,(0,s.default)(t).call(this,e))).divRef=c.default.createRef(),a.change=function(){a.setState({allowTooltip:!0})},a.state={allowTooltip:!1},a}return(0,u.default)(t,e),(0,r.default)(t,[{key:"componentDidMount",value:function(){!this.state.allowTooltip&&this.divRef.current.scrollHeight>this.divRef.current.offsetHeight&&this.change()}},{key:"componentDidUpdate",value:function(){!this.state.allowTooltip&&this.divRef.current.scrollHeight>this.divRef.current.offsetHeight&&this.change()}},{key:"render",value:function(){var e=this.props.select;return this.state.allowTooltip?c.default.createElement(p.default,{trigger:["hover"],overlay:this.props.text,placement:"top",overlayClassName:"mat-tooltip"},c.default.createElement("div",{ref:this.divRef,className:1===e?"itemNameOut itemActive":"itemNameOut"},this.props.text)):c.default.createElement("div",{ref:this.divRef,className:1===e?"itemName itemActive":"itemName"},this.props.text)}}]),t}(c.default.Component),E=function(e){function t(e){var a;return(0,i.default)(this,t),(a=(0,l.default)(this,(0,s.default)(t).call(this,e))).switchText=function(e){return"book"===e?m.default.get("SIDE_TOOLS_MATERIAL_TITLE"):"video"===e?m.default.get("SIDE_TOOLS_MATERIAL_VIDEO"):"audio"===e?m.default.get("SIDE_TOOLS_MATERIAL_AUDIO"):void 0},a.switchBook=g.default.debounce(function(e,t){console.log("switchBook",(0,f.toJS)(t),e),"book"===e&&h.api.request("matSwitch",{textBookId:t.id,classType:t.classType}).then(function(e){console.log("\u5207\u6362\u6559\u6750res",e)}),"audio"===e&&h.api.request("audioSwitch",{id:t.id}).then(function(e){console.log("\u5207\u6362\u97f3\u9891res",e)}),"video"===e&&h.api.request("videoSwitch",{id:t.id}).then(function(e){console.log("\u5207\u6362\u89c6\u9891res",e)})},150),a.download=function(e,t){e.stopPropagation(),t.status=0,a.setState({}),h.api.request("matDownload",{bookId:t.id,classType:t.classType}).then(function(e){console.log("\u70b9\u51fb\u4e0b\u8f7d \u7684\u8fd4\u56de",e)})},a.doingBtn=function(e){e.stopPropagation()},a.listeners=[],a.state={content:[],isTeacher:!0},a}return(0,u.default)(t,e),(0,r.default)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({isTeacher:!1}),h.api.request("matListLoaded").then(function(t){if(console.log("req\u6559\u6750\u5217\u8868",(0,f.toJS)(t)),t.payload){var a=t.payload;if(e.state.isTeacher)try{a=t.payload.map(function(e){return{matType:e.matType,list:e.list.filter(function(e){return 0===e.classType})}}),console.log("laoshi",(0,f.toJS)(a))}catch(n){}e.setState({content:a})}}),this.listeners.push(h.api.listen("matListNotify",function(t){if(t.payload){var a=t.payload;if(e.state.isTeacher)try{a=t.payload.map(function(e){return{matType:e.matType,list:e.list.filter(function(e){return 0===e.classType})}})}catch(n){}e.setState({content:a})}}),h.api.listen("matStatusNotify",function(t){if(t.payload){var a=t.payload;if(e.state.isTeacher)try{a=t.payload.map(function(e){return{matType:e.matType,list:e.list.filter(function(e){return 0===e.classType})}})}catch(n){}e.setState({content:a})}}))}},{key:"componentWillUnmount",value:function(){this.listeners&&this.listeners.length&&(this.listeners.forEach(function(e){return e.cancel()}),this.listeners=[])}},{key:"render",value:function(){var e=this;return c.default.createElement("div",{style:{display:this.props.show?"block":"none"},className:d.default.materialContent+" "+d.default.scroll},this.state.content.map(function(t){return c.default.createElement(c.default.Fragment,{key:t.matType},c.default.createElement("div",{className:d.default.itemTitle},e.switchText(t.matType)),t.list.map(function(n,o){return c.default.createElement("div",{onClick:function(){return 1===n.status&&e.switchBook(t.matType,n)},className:1!=n.status?d.default.item+" "+d.default.disabled+" clearfix":1===n.clicked?d.default.item+" "+d.default.active+" clearfix":d.default.item+" clearfix",key:o},c.default.createElement("span",{onClick:function(){},style:{backgroundImage:1===n.type?3===n.subType?"url("+a(590)+")":"url("+a(591)+")":3===n.type?"url("+a(592)+")":"url("+a(593)+")"},className:d.default.pic},!e.state.isTeacher&&0===n.classType&&c.default.createElement("img",{src:a(594),alt:""})),c.default.createElement("div",{className:"itemNameBox"},c.default.createElement(_,{select:n.select,className:"itemNameWrapper",text:n.name})),c.default.createElement("span",{className:d.default.downLoadBox},2===n.status?c.default.createElement("span",{onClick:function(t){return e.download(t,n)},style:{display:"inline-block",width:16,height:16,backgroundImage:"url("+a(595)+")"}}):1===n.status?c.default.createElement("span",{className:1==n.select?""+d.default.radioSelect:d.default.radio}):c.default.createElement("img",{onClick:function(t){e.doingBtn(t)},className:d.default.loading,style:{width:16},src:a(596),alt:""})))}))}))}}]),t}(c.Component);t.default=E},function(e,t,a){e.exports={scroll:"material_scroll__31Sxf",materialContent:"material_materialContent__Hqhmi",itemTitle:"material_itemTitle__onOnb",item:"material_item__CUWpH",pic:"material_pic__2rWzh",downLoadBox:"material_downLoadBox__3ZAmf",loading:"material_loading__3MiN2",round:"material_round__2MWoR",radio:"material_radio__3V2XF",radioSelect:"material_radioSelect__36Gvu",active:"material_active__3RPIP",disabled:"material_disabled__2jTVG"}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a={table:["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","+","/"],UTF16ToUTF8:function(e){for(var t=[],a=e.length,n=0;n<a;n++){var o=e.charCodeAt(n);if(o>0&&o<=127)t.push(e.charAt(n));else if(o>=128&&o<=2047){var i=192|o>>6&31,r=128|63&o;t.push(String.fromCharCode(i),String.fromCharCode(r))}else if(o>=2048&&o<=65535){i=224|o>>12&15,r=128|o>>6&63;var l=128|63&o;t.push(String.fromCharCode(i),String.fromCharCode(r),String.fromCharCode(l))}}return t.join("")},UTF8ToUTF16:function(e){var t=[],a=e.length,n=0;for(n=0;n<a;n++){var o=e.charCodeAt(n);if(0==(o>>7&255))t.push(e.charAt(n));else if(6==(o>>5&255)){var i=(31&o)<<6|63&(r=e.charCodeAt(++n));t.push(String.fromCharCode(i))}else if(14==(o>>4&255)){var r;i=(255&(o<<4|(r=e.charCodeAt(++n))>>2&15))<<8|((3&r)<<6|63&e.charCodeAt(++n)),t.push(String.fromCharCode(i))}}return t.join("")},encode:function(e){if(!e)return"";for(var t=this.UTF16ToUTF8(e),a=0,n=t.length,o=[];a<n;){var i=255&t.charCodeAt(a++);if(o.push(this.table[i>>2]),a==n){o.push(this.table[(3&i)<<4]),o.push("==");break}var r=t.charCodeAt(a++);if(a==n){o.push(this.table[(3&i)<<4|r>>4&15]),o.push(this.table[(15&r)<<2]),o.push("=");break}var l=t.charCodeAt(a++);o.push(this.table[(3&i)<<4|r>>4&15]),o.push(this.table[(15&r)<<2|(192&l)>>6]),o.push(this.table[63&l])}return o.join("")},decode:function(e){if(!e)return"";for(var t=e.length,a=0,n=[];a<t;){var o=this.table.indexOf(e.charAt(a++)),i=this.table.indexOf(e.charAt(a++)),r=this.table.indexOf(e.charAt(a++)),l=this.table.indexOf(e.charAt(a++)),s=o<<2|i>>4,u=(15&i)<<4|r>>2,c=(3&r)<<6|l;n.push(String.fromCharCode(s)),64!=r&&n.push(String.fromCharCode(u)),64!=l&&n.push(String.fromCharCode(c))}return this.UTF8ToUTF16(n.join(""))}};t.default=a,window.getTimeNow=function(){var e=new Date;return e.toLocaleTimeString()+" "+e.getMilliseconds()+"ms"}},,,function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAkCAYAAACe0YppAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAMfSURBVFhH5ZjfS1NhGMef92y6jTmcOEsLJ6gY6Y1ll15EkGV4WXQplJC4i6Aggi7ECiKI6KKkQPwbuoi6iGX+QLwJyQjMzB+DMHXqZP6IjZ3T87zn2aZl+h72o4s+sO19nnfse55f7zlMwG/oXV0N+NEBQpzFTz9+wSM3FDHa2vq11tarbP6VlLDR3V1oLC8/RsFOdNrYbZ32djAikRdaS0sne/ZEozcpGg6/EUIEMhJlhNd7TQ8Gn7K5J6YwRoqCZ6QnSwiPJ6APDDxh8w80WVNML9uZE4/zAsXd7uv60NAjNndBEXdkI70pIhFemAin86Y+PPyQzRQad2/2mJnhRRrhcNzSR0YesCmhiP3mMktMTQGsrrKRRhQW3tZHR++zCRqm2dKcHoiuAwSDe4vb7Xf0sbF7cm0EAob0ZhsNk1lXB1BdDeD1AhQU8AZOkWHczZ3wPqBgWM5xvsHy+jISplQtRKPwbW0NNmMx06mI5VTHEglY2tyEYqcTXmEHL+IaI8CpFNBcWQknKyrMLx6AZeEvKysQnJ0Fp90uX+dqasDrcMDE4iIMhkJwqb4ejnoOHhTLqaaI6bWNR2NTeTmUulxgww4+gZGWFxXBV7wwFSwJx3FGXRypC8fj09IS75jYMN2q6VMWXt7agv7xcYhjtJ1NTXClsREuYlqTTOOB8R0braakhD37oyRMqX05OSlTWVdayt40lPbX09NwCtPtLy5m7/4oCdO4kPj52lpZTyK0vi5T/WFhAX7i3uWGBmj2qx/7SsIUEdXVYUvfPSdQdHB+Hoaxk6mhDrvdvKOGkjCNRxQPCKpjEvIlsNnsmIGCHRekivIcv5+bg484q0dQkNIe3t6G01VV8GNjA477fMq1TWLpAJnFWs9hbSnKY9hkhyymdyf/5O5EKNU4F/yHwljgKK/zBmlSxCHTzCshDZ+83rKRP1CTIu7D0BOmJ/ewVp+m9fZ+xit4brrzAGqRpuxqUVZ2A6/kndzIIagRJC1am8I9PTHh87Xig/azXKSdfpN+GzUukBb56AFxF5n+FZEExWhMQ9y8fbKkKQB+AbHGJ8DbzkeEAAAAAElFTkSuQmCC"},function(e,t,a){e.exports=a.p+"static/media/img_pdf.b33cadfd.svg"},function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjMwcHgiIGhlaWdodD0iMzVweCIgdmlld0JveD0iMCAwIDMwIDM1IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPg0KICAgIDwhLS0gR2VuZXJhdG9yOiBTa2V0Y2ggNTMuMiAoNzI2NDMpIC0gaHR0cHM6Ly9za2V0Y2hhcHAuY29tIC0tPg0KICAgIDx0aXRsZT5vdGhlcl9pbWdfdmlkZW88L3RpdGxlPg0KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPg0KICAgIDxnIGlkPSLnu4Tku7YiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPg0KICAgICAgICA8ZyBpZD0i5YmN56uv5YiH5Zu+77yI6L+e5Zu+77yJIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTQ0MC4wMDAwMDAsIC0yMTUwLjAwMDAwMCkiPg0KICAgICAgICAgICAgPGcgaWQ9Im90aGVyX2ltZ192aWRlbyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTQ0MC4wMDAwMDAsIDIxNTAuMDAwMDAwKSI+DQogICAgICAgICAgICAgICAgPHBhdGggZD0iTTMsMy4zMzA2NjkwN2UtMTYgTDIwLDIuMjIwNDQ2MDVlLTE1IEwzMCwxMC4xMTY4NiBMMzAsMzIgQzMwLDMzLjY1Njg1NDIgMjguNjU2ODU0MiwzNSAyNywzNSBMMywzNSBDMS4zNDMxNDU3NSwzNSAyLjAyOTA2MTI1ZS0xNiwzMy42NTY4NTQyIDAsMzIgTC00LjQ0MDg5MjFlLTE2LDMgQy02LjQ2OTk1MzM1ZS0xNiwxLjM0MzE0NTc1IDEuMzQzMTQ1NzUsNy40ODQ0ODM5OGUtMTYgMyw0LjQ0MDg5MjFlLTE2IFoiIGlkPSLnn6nlvaIiIGZpbGw9IiM0NEE4RUEiPjwvcGF0aD4NCiAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTMuNDkwMjYxMiwxNC44MzgyNzE5IEwxOC40NTA1MzI0LDE3LjYyODQyNDUgQzE4LjkzMTg5MDMsMTcuODk5MTg4MyAxOS4xMDI2MTA1LDE4LjUwODkwMzQgMTguODMxODQ2NywxOC45OTAyNjEyIEMxOC43NDIwNTc5LDE5LjE0OTg4NTcgMTguNjEwMTU2OSwxOS4yODE3ODY4IDE4LjQ1MDUzMjQsMTkuMzcxNTc1NSBMMTMuNDkwMjYxMiwyMi4xNjE3MjgxIEMxMy4wMDg5MDM0LDIyLjQzMjQ5MTkgMTIuMzk5MTg4MywyMi4yNjE3NzE2IDEyLjEyODQyNDUsMjEuNzgwNDEzOCBDMTIuMDQ0MjI4NSwyMS42MzA3MzIxIDEyLDIxLjQ2MTg4OTQgMTIsMjEuMjkwMTUyNSBMMTIsMTUuNzA5ODQ3NSBDMTIsMTUuMTU3NTYyNyAxMi40NDc3MTUzLDE0LjcwOTg0NzUgMTMsMTQuNzA5ODQ3NSBDMTMuMTcxNzM2OSwxNC43MDk4NDc1IDEzLjM0MDU3OTYsMTQuNzU0MDc2IDEzLjQ5MDI2MTIsMTQuODM4MjcxOSBaIiBpZD0i55+p5b2iIiBmaWxsPSIjMjE3QUI2Ij48L3BhdGg+DQogICAgICAgICAgICAgICAgPHBhdGggZD0iTTIwLDAgTDMwLDEwIEwyMywxMCBDMjEuMzQzMTQ1OCwxMCAyMCw4LjY1Njg1NDI1IDIwLDcgTDIwLDAgWiIgaWQ9IuefqeW9oiIgZmlsbD0iIzhERDJGRiI+PC9wYXRoPg0KICAgICAgICAgICAgPC9nPg0KICAgICAgICA8L2c+DQogICAgPC9nPg0KPC9zdmc+"},function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjMwcHgiIGhlaWdodD0iMzZweCIgdmlld0JveD0iMCAwIDMwIDM2IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPg0KICAgIDwhLS0gR2VuZXJhdG9yOiBTa2V0Y2ggNTQuMSAoNzY0OTApIC0gaHR0cHM6Ly9za2V0Y2hhcHAuY29tIC0tPg0KICAgIDx0aXRsZT5pbWdfbXVzaWM8L3RpdGxlPg0KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPg0KICAgIDxnIGlkPSLnu4Tku7YiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPg0KICAgICAgICA8ZyBpZD0i55u05pKt5bmz5Y+w6YCa55So54mI5YiH5Zu+77yI6L+e5Zu+77yJIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTQ0My4wMDAwMDAsIC0yNjk2LjAwMDAwMCkiPg0KICAgICAgICAgICAgPGcgaWQ9Im90aGVyX2ltZ19tdXNpYyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTQ0My4wMDAwMDAsIDI2OTYuMDAwMDAwKSI+DQogICAgICAgICAgICAgICAgPGc+DQogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik04LDAgTDIwLDAgTDMwLDEwLjQwNTkxMzEgTDMwLDI4IEMzMCwzMi40MTgyNzggMjYuNDE4Mjc4LDM2IDIyLDM2IEw4LDM2IEMzLjU4MTcyMiwzNiA1LjQxMDgzMDAxZS0xNiwzMi40MTgyNzggMCwyOCBMMCw4IEMtNS40MTA4MzAwMWUtMTYsMy41ODE3MjIgMy41ODE3MjIsOC4xMTYyNDUwMWUtMTYgOCwwIFoiIGlkPSLnn6nlvaIiIGZpbGw9IiM1RUQ4ODciPjwvcGF0aD4NCiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE0Ljg2MjA2OSwxOC4zODM4OTM1IEwxNC44NjIwNjksMTMgTDE5LDE0LjEwMzQ0ODMgTDE5LDE2LjAzNDQ4MjggTDE1Ljk2NTUxNzIsMTUuMjA2ODk2NiBMMTUuOTY1NTE3MiwyMC40NDgyNzU5IEMxNS45NjU1MTczLDIxLjMzNTI4MDEgMTUuNDkyMzA2MSwyMi4xNTQ5MDU4IDE0LjcyNDEzNzksMjIuNTk4NDA3OSBDMTMuOTU1OTY5NywyMy4wNDE5MSAxMy4wMDk1NDc1LDIzLjA0MTkxIDEyLjI0MTM3OTMsMjIuNTk4NDA3OSBDMTEuNDczMjExMSwyMi4xNTQ5MDU4IDExLDIxLjMzNTI4MDEgMTEsMjAuNDQ4Mjc1OSBDMTEsMTkuNTYxMjcxNiAxMS40NzMyMTExLDE4Ljc0MTY0NTkgMTIuMjQxMzc5MywxOC4yOTgxNDM4IEMxMy4wMDk1NDc1LDE3Ljg1NDY0MTcgMTMuOTU1OTY5NywxNy44NTQ2NDE3IDE0LjcyNDEzNzksMTguMjk4MTQzOCBDMTQuNzcxMjM3NSwxOC4zMjUzMzY3IDE0LjgxNzIyODIsMTguMzUzOTQzNyAxNC44NjIwNjksMTguMzgzODkzNSBaIiBpZD0i5ZCI5bm25b2i54q2IiBmaWxsPSIjMjI5RTRDIiBmaWxsLXJ1bGU9Im5vbnplcm8iPjwvcGF0aD4NCiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTIwLDAgTDMwLDEwIEwyNiwxMCBDMjIuNjg2MjkxNSwxMCAyMCw3LjMxMzcwODUgMjAsNCBMMjAsMCBaIiBpZD0i55+p5b2iIiBmaWxsPSIjQkJGRkQyIj48L3BhdGg+DQogICAgICAgICAgICAgICAgPC9nPg0KICAgICAgICAgICAgPC9nPg0KICAgICAgICA8L2c+DQogICAgPC9nPg0KPC9zdmc+"},function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjIwcHgiIGhlaWdodD0iMTZweCIgdmlld0JveD0iMCAwIDIwIDE2IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPg0KICAgIDwhLS0gR2VuZXJhdG9yOiBTa2V0Y2ggNTQuMSAoNzY0OTApIC0gaHR0cHM6Ly9za2V0Y2hhcHAuY29tIC0tPg0KICAgIDx0aXRsZT5vdGhlcl9pbWdfdGVhY2hlci10YWc8L3RpdGxlPg0KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPg0KICAgIDxnIGlkPSLnu4Tku7YiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPg0KICAgICAgICA8ZyBpZD0i5YmN56uv5YiH5Zu+77yI6L+e5Zu+77yJIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTI1Ni4wMDAwMDAsIC0yMTUwLjAwMDAwMCkiPg0KICAgICAgICAgICAgPGcgaWQ9Im90aGVyX2ltZ190ZWFjaGVyLXRhZyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTI1Ni4wMDAwMDAsIDIxNTAuMDAwMDAwKSI+DQogICAgICAgICAgICAgICAgPHJlY3QgaWQ9IuefqeW9oiIgZmlsbD0iI0ZGQjE0NCIgeD0iMCIgeT0iMCIgd2lkdGg9IjIwIiBoZWlnaHQ9IjE2IiByeD0iOCI+PC9yZWN0Pg0KICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik03LjUzMjUxNTg5LDcuNjE3MTkyNzUgQzYuNjE3OTEyNzksNy4xMDMyNjQ3NiA2LDYuMTIzNzkzMDEgNiw1IEM2LDMuMzQzMTQ1NzUgNy4zNDMxNDU3NSwyIDksMiBDMTAuNjU2ODU0MiwyIDEyLDMuMzQzMTQ1NzUgMTIsNSBDMTIsNi4xMjM3OTMwMSAxMS4zODIwODcyLDcuMTAzMjY0NzYgMTAuNDY3NDg0MSw3LjYxNzE5Mjc1IEMxNCw4LjMzNDYwMjk1IDE0LDExLjY2ODU3NzggMTQsMTIuNjUyMTg1OSBDMTQsMTMuNzU2NTYzIDQsMTMuNzU2NTYzIDQsMTIuNjUyMTg1OSBDNCwxMS42Njg1Nzc4IDQsOC4zMzQ2MDI5NSA3LjUzMjUxNTg5LDcuNjE3MTkyNzUgWiIgaWQ9IuWQiOW5tuW9oueKtiIgZmlsbD0iI0ZGRkZGRiI+PC9wYXRoPg0KICAgICAgICAgICAgICAgIDxyZWN0IGlkPSJSZWN0YW5nbGUtMTAiIGZpbGw9IiNGRkZGRkYiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE0LjY0OTUxOSwgOC44MzkxMDIpIHJvdGF0ZSgtMzMwLjAwMDAwMCkgdHJhbnNsYXRlKC0xNC42NDk1MTksIC04LjgzOTEwMikgIiB4PSIxMy44OTk1MTkxIiB5PSI0LjgzOTEwMTYyIiB3aWR0aD0iMS41IiBoZWlnaHQ9IjgiIHJ4PSIwLjc1Ij48L3JlY3Q+DQogICAgICAgICAgICA8L2c+DQogICAgICAgIDwvZz4NCiAgICA8L2c+DQo8L3N2Zz4="},function(e,t,a){e.exports=a.p+"static/media/icon_download_big.fc56a423.svg"},function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjE2cHgiIGhlaWdodD0iMTZweCIgdmlld0JveD0iMCAwIDE2IDE2IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPg0KICAgIDwhLS0gR2VuZXJhdG9yOiBTa2V0Y2ggNTYuMiAoODE2NzIpIC0gaHR0cHM6Ly9za2V0Y2guY29tIC0tPg0KICAgIDx0aXRsZT5zdGF0ZXNfZG93bi1sb2FkaW5nPC90aXRsZT4NCiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4NCiAgICA8ZyBpZD0i57uE5Lu2IiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4NCiAgICAgICAgPGcgaWQ9IuebtOaSreW5s+WPsOmAmueUqOeJiOWIh+Wbvu+8iOi/nuWbvu+8iSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTExMzcuMDAwMDAwLCAtMjQxNC4wMDAwMDApIj4NCiAgICAgICAgICAgIDxnIGlkPSJzdGF0ZXNfZG93bi1sb2FkaW5nIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMTM3LjAwMDAwMCwgMjQxNC4wMDAwMDApIj4NCiAgICAgICAgICAgICAgICA8ZyBpZD0ic3RhdGVzL3N0YXRlc19kb3duLWxvYWRpbmciPg0KICAgICAgICAgICAgICAgICAgICA8ZyBpZD0ic3RhdGVzX2Rvd24tbG9hZGluZyI+DQogICAgICAgICAgICAgICAgICAgICAgICA8ZyBpZD0iaWNvbi1tYXJrL2JnLTE2eDE2IiBvcGFjaXR5PSIwIj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZyBpZD0iMjR4MjQiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cmVjdCBpZD0iZ3JvdXAvLWljb24tLy1zdGFyLy1ub3JtYWwiIHN0cm9rZT0iI0E5QTlBOSIgeD0iMC41IiB5PSIwLjUiIHdpZHRoPSIxNSIgaGVpZ2h0PSIxNSI+PC9yZWN0Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cmVjdCBpZD0iUmVjdGFuZ2xlLTMiIHN0cm9rZT0iI0E3QTdBNyIgeD0iMi41IiB5PSIyLjUiIHdpZHRoPSIxMSIgaGVpZ2h0PSIxMSI+PC9yZWN0Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMSwxIEwxNSwxNSIgaWQ9IkxpbmUiIHN0cm9rZT0iI0E5QTlBOSIgc3Ryb2tlLWxpbmVjYXA9InNxdWFyZSI+PC9wYXRoPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTUsMSBMMSwxNSIgaWQ9IkxpbmUtMiIgc3Ryb2tlPSIjQTlBOUE5IiBzdHJva2UtbGluZWNhcD0ic3F1YXJlIj48L3BhdGg+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9nPg0KICAgICAgICAgICAgICAgICAgICAgICAgPC9nPg0KICAgICAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE1Ljc0Nzk2NSw2IEwxNC43MTAxMjEzLDYgQzEzLjg0OTU3MjEsMy4xMDg1MTEwNSAxMS4xNzEwMjA2LDEgOCwxIEM0LjgyODk3OTM2LDEgMi4xNTA0Mjc4NywzLjEwODUxMTA1IDEuMjg5ODc4NjgsNiBMMC4yNTIwMzQ5Nyw2IEMxLjE0MDEyMDU2LDIuNTQ5NTQ1NTcgNC4yNzIzMjExNCw2Ljg0NzYzNDk4ZS0xNiA4LDAgQzExLjcyNzY3ODksLTYuODQ3NjM0OThlLTE2IDE0Ljg1OTg3OTQsMi41NDk1NDU1NyAxNS43NDc5NjUsNiBaIE0xNS43NDc5NjUsMTAgQzE0Ljg1OTg3OTQsMTMuNDUwNDU0NCAxMS43Mjc2Nzg5LDE2IDgsMTYgQzQuMjcyMzIxMTQsMTYgMS4xNDAxMjA1NiwxMy40NTA0NTQ0IDAuMjUyMDM0OTcsMTAgTDEuMjg5ODc4NjgsMTAgQzIuMTUwNDI3ODcsMTIuODkxNDg4OSA0LjgyODk3OTM2LDE1IDgsMTUgQzExLjE3MTAyMDYsMTUgMTMuODQ5NTcyMSwxMi44OTE0ODg5IDE0LjcxMDEyMTMsMTAgTDE1Ljc0Nzk2NSwxMCBaIiBpZD0i5b2i54q257uT5ZCIIiBmaWxsPSIjMDlEMTk4Ij48L3BhdGg+DQogICAgICAgICAgICAgICAgICAgIDwvZz4NCiAgICAgICAgICAgICAgICA8L2c+DQogICAgICAgICAgICA8L2c+DQogICAgICAgIDwvZz4NCiAgICA8L2c+DQo8L3N2Zz4="},function(e,t,a){var n=a(5),o=a(27);Object.defineProperty(t,"__esModule",{value:!0}),t.typeInfo=t.default=void 0;var i,r=n(a(258)),l=n(a(38)),s=n(a(7)),u=n(a(8)),c=n(a(12)),d=n(a(13)),f=n(a(81)),p=n(a(14)),h=o(a(0)),m=n(a(120)),g=n(a(97)),_=n(a(28)),E=a(16),v=a(25),S=n(a(98)),y=n(a(604)),w=n(a(606)),A=a(30),I=E.observable.box({status:"init",mode:"assignation"});t.typeInfo=I;var T=(0,A.inject)("store")(i=(0,A.observer)(i=function(e){function t(e){var n;return(0,s.default)(this,t),(n=(0,c.default)(this,(0,d.default)(t).call(this,e))).lock=!1,n.switchMethod=function(e){return 1===e?_.default.get("SIDE_TOOLS_INTERACTION_RANDOM"):0===e?_.default.get("SIDE_TOOLS_INTERACTION_ASSIGN"):void 0},n.switchType=function(e){return 1===e?_.default.get("SIDE_TOOLS_INTERACTION_AUDIO"):0===e?_.default.get("SIDE_TOOLS_INTERACTION_VIDEO"):void 0},n.switchPeople=function(e){return 1===e?"1 "+_.default.get("SIDE_TOOLS_INTERACTION_PEOPLEONE"):2===e?"2 "+_.default.get("SIDE_TOOLS_INTERACTION_PEOPLEONE"):void 0},n.chooseMothod=function(e){1===e.key&&n.setState({rotate:!1}),n.setState({methodValue:e.key,showMethodDropdownBox:!1,isRandom:1===e.key})},n.chooseType=function(e){n.setState({typeValue:e.key,showTypeDropdownBox:!1})},n.choosePeople=function(e){n.setState({peopleValue:e.key,showPeopleDropdownBox:!1})},n.openMethodBox=function(){n.setState({showMethodDropdownBox:!n.state.showMethodDropdownBox})},n.openTypeBox=function(){n.setState({showTypeDropdownBox:!n.state.showTypeDropdownBox})},n.openPeopleBox=function(){n.setState({showPeopleDropdownBox:!n.state.showPeopleDropdownBox})},n.onBlur=function(){n.setState({showMethodDropdownBox:!1})},n.onTypeBlur=function(){n.setState({showTypeDropdownBox:!1})},n.onPeopleBlur=function(){n.setState({showPeopleDropdownBox:!1})},n.change=function(){setInterval(function(){if(0!==n.state.images.length){var e=n.state.images.pop();n.state.images.unshift(e),n.setState({})}},2e3)},n.methodSelect=function(e,t){n.setState({methodValue:e})},n.typeSelect=function(e,t){n.setState({typeValue:e})},n.startRotate=function(){n.randomAvatar(),n.setState({rotate:!0,startInteraction:!0})},n.handleClickStart=function(){n.startHandup()},n.startHandup=function(){if("on"===n.props.store.RosterMicState.currentState)return n.props.store.MicState.setToastContent(_.default.get("SIDE_TOOLS_INTERACTION_OTHER_MIC")),!n.lock&&setTimeout(function(){n.props.store.MicState.setToastContent(null),n.lock=!1},2e3),void(n.lock=!0);n.props.store.MicState.changeState("on"),n.setState({disabled:!0},function(){setTimeout(function(){n.setState({disabled:!1})},2e3)});(0,f.default)(n);n.setState({startInteraction:!0}),v.api.request("unionMicStart",{uid_self:0,um_mode:n.state.methodValue,um_avtype:n.state.typeValue,um_status:1,um_user_total:n.state.peopleValue}).then(function(e){console.log("\u6210\u529f\u6536\u5230unionMicStart\u6570\u636e",(0,E.toJS)(e)),n.setState({channel:e.union_mic_channel}),n.state.isRandom&&n.randomMic(e.union_mic_channel)}).catch(function(){console.log("\u6ca1\u6709\u6536\u5230unionMicStart\u6570\u636e")})},n.handleClickEnd=function(){n.stop()},n.stop=function(){n.props.store.MicState.changeState("off"),n.setState({disabled:!0},function(){setTimeout(function(){n.setState({disabled:!1})},2e3)}),clearInterval(n.reqTimer),n.state.isRandom&&n.randomStop(),n.setState({startInteraction:!1,studentList:[]}),v.api.request("unionMicStart",{uid_self:0,um_mode:n.state.methodValue,um_avtype:n.state.typeValue,um_status:0,um_user_total:n.state.peopleValue}).then(function(e){console.log("\u6210\u529f\u6536\u5230unionMicStart\u6570\u636e",(0,E.toJS)(e)),n.setState({channel:e.union_mic_channel})}).catch(function(){console.log("\u6ca1\u6709\u6536\u5230unionMicStart\u6570\u636e")})},n.randomStop=function(){n.setState({rotate:!1,images:[]})},n.sleep=function(e){return new Promise(function(t){setTimeout(t,e)})},n.shuffle=function(e){var t,a,n;for(t=e.length-1;t>0;t--)a=Math.floor(Math.random()*(t+1)),n=e[t],e[t]=e[a],e[a]=n;return e},n.randomAvatar=function(){var e=(0,l.default)(n.imagesList),t=n.shuffle(e),a=[],o=(0,f.default)(n);!function(){var e,n;r.default.async(function(i){for(;;)switch(i.prev=i.next){case 0:e=1;case 1:if(!(e<=5)){i.next=13;break}if(console.log("\u8fdb\u5165\u5230\u65cb\u8f6c\u5b9a\u65f6\u5668\u4e86---------------------",e),n=t.pop()){i.next=6;break}return i.abrupt("return");case 6:return a.push(n),o.setState({images:a}),i.next=10,r.default.awrap(o.sleep(700));case 10:e++,i.next=1;break;case 13:case"end":return i.stop()}})}()},n.interacting=function(e){(0,S.default)(43,{target_id:e.hand_uid,source_type:0}),e.um_mic_status="doing",e.clickable=0,2===n.state.studentList.filter(function(e){return 0===e.clickable}).length&&(console.log("\u8fde\u9ea6 2\u5404"),n.state.studentList.forEach(function(e){1===e.clickable&&(e.clickable=4)})),n.setState({}),v.api.request("unionMicAddUser",{hand_uid:e.hand_uid,union_mic_channel:n.state.channel,um_mic_status:1}).then(function(t){console.log("\u70b9\u51fb\u8fde\u9ea6\uff08\u6307\u5b9a\uff09\u7684\u8fd4\u56de\u7ed3\u679c",t),0===t.statusCode&&(e.user_um_count++,n.setState({}))})},n.randomMic=function(e){n.startRotate(),n.reqTimer=setTimeout(function(){console.log("\u5012\u8ba1\u65f6 15s\u5230\u4e86"),v.api.request("unionMicRandomAddUser",{union_mic_channel:0===n.state.channel?e:n.state.channel}).then(function(e){console.log("\u968f\u673a\u8fde\u9ea6 \u8fd4\u56de\u7ed3\u679c",(0,E.toJS)(e)),1===e.nobody_handup?(n.handleClickEnd(),n.setState({toastText:_.default.get("SIDE_TOOLS_INTERACTION_NO_HANDS_UP")},function(){setTimeout(function(){n.setState({toastText:null})},3e3)})):n.randomStop()})},15e3)},n.stopInteracting=function(e){e.clickable=1,v.api.request("unionMicAddUser",{hand_uid:e.hand_uid,union_mic_channel:n.state.channel,um_mic_status:0}).then(function(e){console.log("\u70b9\u51fb\u7ed3\u675f\u8fde\u9ea6\uff08\u6307\u5b9a\uff09",e)})},n.state={methodValue:0,typeValue:0,peopleValue:2,rotate:!1,images:[],startInteraction:!1,showMethodDropdownBox:!1,showTypeDropdownBox:!1,showPeopleDropdownBox:!1,isRandom:!1,studentList:[],channel:0,micList:[],micListMock:[],toastText:null,disabled:!1},n.methodArr=[{key:0,text:_.default.get("SIDE_TOOLS_INTERACTION_ASSIGN")},{key:1,text:_.default.get("SIDE_TOOLS_INTERACTION_RANDOM")}],n.typeArr=[{key:0,text:_.default.get("SIDE_TOOLS_INTERACTION_VIDEO")}],n.peopleArr=[{key:1,text:"1 "+_.default.get("SIDE_TOOLS_INTERACTION_PEOPLEONE")},{key:2,text:"2 "+_.default.get("SIDE_TOOLS_INTERACTION_PEOPLEONE")}],n.isGen=!0,n.imagesList=[{icon:a(147),username:"li",id:"uid-1"},{icon:a(99),username:"wang",id:"uid-2"},{icon:a(259),username:"liu",id:"uid-3"},{icon:a(260),username:"mike",id:"uid-4"},{icon:a(261),username:"andy",id:"uid-5"}],n}return(0,p.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){var e=this;3===this.props.store.ClassType.type&&v.api.request("unionMicGetEnableStaus").then(function(e){console.log("\u5982\u679c\u8001\u5e08\u7aef\u5d29\u6e83 \u91cd\u65b0\u83b7\u53d6\u8fde\u9ea6\u72b6\u6001",(0,E.toJS)(e))}),(0,E.reaction)(function(){return e.props.store.ClassType.type},function(t){3===t&&e.isGen&&v.api.request("unionMicGetEnableStaus").then(function(e){console.log("\u5982\u679c\u8001\u5e08\u7aef\u5d29\u6e83 \u91cd\u65b0\u83b7\u53d6\u8fde\u9ea6\u72b6\u6001",(0,E.toJS)(e))})}),v.api.listen("unionMicStartNotify",function(t){1===t.um_status&&e.setState({startInteraction:!0,methodValue:t.um_mode,typeValue:t.um_avtype,isRandom:1===t.um_mode})}),v.api.listen("unionMicOrderListChangeNotify",function(t){var n=t.user_array;n=n||[],"on"===e.props.store.MicState.currentState&&(e.props.store.MicState.setList(n),n.length>0?(e.state.isRandom&&e.setState({rotate:!1,images:[]}),1===n.length&&e.setState({micListMock:[{user_avatar_url:a(99),user_uid:1}]}),2===n.length&&e.setState({micListMock:[{user_avatar_url:a(99),user_uid:1},{user_avatar_url:a(147),user_uid:2}]}),e.setState({micList:n})):(e.state.isRandom&&e.handleClickEnd(),e.state.studentList.forEach(function(e){e.clickable=1,e.um_mic_status=0}),e.setState({micList:[],micListMock:[]})))}),v.api.listen("unionMicHandUpNotify",function(t){var a=t.user_array;a=a||[];try{a.length>0?e.setState({studentList:a,channel:t.union_mic_channel}):e.setState({studentList:[],channel:t.union_mic_channel})}catch(n){}})}},{key:"componentWillUnmount",value:function(){this.setState=function(){}}},{key:"render",value:function(){var e=this,t=this.state,a=t.methodValue,n=(t.typeValue,t.peopleValue),o=t.startInteraction;return h.default.createElement("div",{style:{display:this.props.show?"flex":"none"},className:w.default.interactionContent},h.default.createElement(g.default,{contentText:this.props.store.MicState.toastContent}),h.default.createElement("div",{className:w.default.interactionRange},h.default.createElement("div",{className:w.default.rangeLeft},_.default.get("SIDE_TOOLS_INTERACTION_RANGE")," :"),h.default.createElement("div",{className:w.default.rangeRight},_.default.get("SIDE_TOOLS_INTERACTION_ALL"))),h.default.createElement("div",{className:w.default.micType},h.default.createElement("div",{className:w.default.typeLeft},_.default.get("SIDE_TOOLS_INTERACTION_TYPE")," :"),h.default.createElement("div",{className:w.default.typeRight},_.default.get("SIDE_TOOLS_INTERACTION_VIDEO"))),h.default.createElement("div",{className:w.default.selectBox},h.default.createElement("div",{className:w.default.selectLeft},_.default.get("SIDE_TOOLS_INTERACTION_WAY")," :"),h.default.createElement("div",{tabIndex:-1,onBlur:this.onBlur,className:w.default.selectRight},h.default.createElement("div",{onClick:o?function(){}:function(){return e.openMethodBox()},className:o?w.default.select+" "+w.default.disabled:w.default.select},this.switchMethod(a)),this.state.showMethodDropdownBox&&h.default.createElement("ul",null,this.methodArr.map(function(t,n){return h.default.createElement("li",{className:t.key===a?""+w.default.selected:"",onClick:function(){return e.chooseMothod(t)},key:t.key},t.text)})))),1===this.state.methodValue&&h.default.createElement("div",{className:w.default.selectBox},h.default.createElement("div",{className:w.default.selectLeft},_.default.get("SIDE_TOOLS_INTERACTION_PEOPLE")," :"),h.default.createElement("div",{tabIndex:-1,onBlur:this.onPeopleBlur,className:w.default.selectRight},h.default.createElement("div",{onClick:o?function(){}:function(){return e.openPeopleBox()},className:o?w.default.select+" "+w.default.disabled:w.default.select},this.switchPeople(n)),this.state.showPeopleDropdownBox&&h.default.createElement("ul",null,this.peopleArr.map(function(t){return h.default.createElement("li",{className:t.key===n?""+w.default.selected:"",onClick:function(){return e.choosePeople(t)},key:t.key},t.text)})))),h.default.createElement(m.default,{onClick:this.state.startInteraction?this.handleClickEnd:this.handleClickStart,disabled:this.state.disabled,text:this.state.startInteraction?_.default.get("SIDE_TOOLS_INTERACTION_DISABLE"):_.default.get("SIDE_TOOLS_INTERACTION_ENABLE"),style:{height:"40px",width:"180px",fontSize:"16px",borderRadius:"16px",margin:"20px auto 30px"}}),1===this.state.methodValue?h.default.createElement("div",{className:w.default.radarBox},h.default.createElement("div",{className:this.state.rotate?w.default.sector+" "+w.default.sectorRotate:w.default.sector}),0===this.state.micList.length&&h.default.createElement("div",{className:w.default.camera}),this.state.images.map(function(e,t){return h.default.createElement("div",{style:{backgroundImage:"url("+e.icon+")"},key:e.id,className:w.default.icon+" "+w.default["icon"+(t+1)]})}),1===this.state.micListMock.length?this.state.micListMock.map(function(e){return h.default.createElement("div",{style:{backgroundImage:"url("+e.user_avatar_url+")"},className:w.default.avatar+" "+w.default.unique,key:e.user_uid})}):this.state.micListMock.map(function(e,t){return h.default.createElement("div",{style:{backgroundImage:"url("+e.user_avatar_url+")"},className:w.default.avatar+" "+w.default["avatar"+t],key:e.user_uid})})):h.default.createElement("div",{className:w.default.assignationBox},h.default.createElement("div",{className:w.default.header},h.default.createElement("div",{className:w.default.name},_.default.get("SIDE_TOOLS_INTERACTION_NAME")),h.default.createElement("div",{className:w.default.count},_.default.get("SIDE_TOOLS_INTERACTION_TIMES")),h.default.createElement("div",{className:w.default.operation},_.default.get("SIDE_TOOLS_INTERACTION_OPERATION"))),h.default.createElement("div",{className:w.default.listBox+" scrollbar"},this.state.studentList.map(function(t,a){return h.default.createElement("div",{key:t.hand_uid,className:w.default.item},t.hand_tags&&t.hand_tags.tagList?h.default.createElement("div",{className:w.default.itemName},h.default.createElement("div",{title:t.hand_name,className:w.default.itemNameText},t.hand_name),h.default.createElement("div",{className:w.default.tagBox},t.hand_tags.tagList.map(function(e){return h.default.createElement("img",{src:e.tagIcon,title:e.tagName,alt:" ",key:e.id})}))):h.default.createElement("div",{className:w.default.itemName},h.default.createElement("div",{className:w.default.itemNameTextOnly},t.hand_name)),t.user_classname?h.default.createElement("div",{className:w.default.itemCount},h.default.createElement("div",{className:w.default.class},t.user_classname),h.default.createElement("div",{className:w.default.classCount},t.user_um_count)):h.default.createElement("div",{className:w.default.itemCount},h.default.createElement("div",{className:w.default.onlyCount},t.user_um_count)),h.default.createElement("div",{className:w.default.itemOperation},h.default.createElement(y.default,{item:t,channel:e.state.channel})))}))),h.default.createElement("div",{style:{display:"none"}},this.imagesList.map(function(e){return h.default.createElement("img",{src:e.icon,key:e.id,alt:""})})))}}]),t}(h.Component))||i)||i;t.default=T},,,,,function(e,t,a){e.exports={btn:"button_btn__37iy0",primaryBtn:"button_primaryBtn__1UBAG"}},function(e,t,a){e.exports={toast:"toast_toast__U9JTk",fadeIn:"toast_fadeIn__3mw_q","keyframes-fadeIn":"toast_keyframes-fadeIn__2G-Oe",fadeOut:"toast_fadeOut__1862n","keyframes-fadeOut":"toast_keyframes-fadeOut__2a4gy",toastInner:"toast_toastInner__3zx9j",icon:"toast_icon__1WTde",content:"toast_content__2QqI9"}},function(e,t,a){var n=a(5);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,i=n(a(7)),r=n(a(8)),l=n(a(12)),s=n(a(13)),u=n(a(14)),c=n(a(0)),d=a(120),f=a(25),p=n(a(605)),h=n(a(98)),m=a(16),g=n(a(28)),_=a(30),E=(0,_.inject)("store")(o=(0,_.observer)(o=function(e){function t(e){var a;return(0,i.default)(this,t),(a=(0,l.default)(this,(0,s.default)(t).call(this,e))).lock=!1,a.disposes=[],a.micStart=function(e){if((0,h.default)(43,{target_id:e.hand_uid,source_type:0}),2===a.props.store.MicState.micList.length)return a.props.store.MicState.setToastContent(g.default.get("SIDE_TOOLS_INTERACTION_MAX_TWO")),!a.lock&&setTimeout(function(){a.props.store.MicState.setToastContent(null),a.lock=!1},2e3),void(a.lock=!0);a.setState({lineupState:2}),f.api.request("unionMicAddUser",{hand_uid:e.hand_uid,union_mic_channel:a.props.channel,um_mic_status:1}).then(function(t){console.log("\u70b9\u51fb\u8fde\u9ea6\uff08\u6307\u5b9a\uff09\u7684\u8fd4\u56de\u7ed3\u679c",t),0===t.statusCode&&(e.user_um_count++,a.setState({}))}).catch(function(e){a.setState({lineupState:0})})},a.micStop=function(e){f.api.request("unionMicAddUser",{hand_uid:e.hand_uid,union_mic_channel:a.props.channel,um_mic_status:0}).then(function(e){console.log("\u70b9\u51fb\u7ed3\u675f\u8fde\u9ea6\uff08\u6307\u5b9a\uff09",e)})},a.state={lineupState:0},a}return(0,u.default)(t,e),(0,r.default)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.item;this.props.store.MicState.micList.find(function(e){return e.user_uid===t.hand_uid})?this.setState({lineupState:1}):this.setState({lineupState:0}),this.disposes.push((0,m.reaction)(function(){return e.props.store.MicState.micList},function(a){a.find(function(e){return e.user_uid===t.hand_uid})?e.setState({lineupState:1}):e.setState({lineupState:0})}))}},{key:"componentWillUnmount",value:function(){this.setState=function(){},this.disposes&&this.disposes.length&&(this.disposes.forEach(function(e){return e()}),this.disposes=[])}},{key:"render",value:function(){var e=this,t=this.props.item,a=this.state.lineupState;return c.default.createElement("div",null,0===a?c.default.createElement(d.PrimaryButton,{froze:!1,onClick:function(){return e.micStart(t)},className:""+p.default.connecTalk}):1===a?c.default.createElement(d.PrimaryButton,{froze:!0,delay:800,onClick:function(){e.micStop(t)},className:""+p.default.downTalk}):c.default.createElement(d.PrimaryButton,{froze:!1,className:""+p.default.connecting}))}}]),t}(c.default.Component))||o)||o;t.default=E},function(e,t,a){e.exports={connecting:"mikeButton_connecting__MEqeE","keyframes-mic-connect":"mikeButton_keyframes-mic-connect__hW8iY",connecTalk:"mikeButton_connecTalk__2Pacs",downTalk:"mikeButton_downTalk__EOfr7"}},function(e,t,a){e.exports={interactionContent:"interaction_interactionContent__34RJq",interactionRange:"interaction_interactionRange__NtEXy",rangeLeft:"interaction_rangeLeft__1PoF3",rangeRight:"interaction_rangeRight__2vmIS",micType:"interaction_micType__26AoZ",typeLeft:"interaction_typeLeft__2Vp4q",typeRight:"interaction_typeRight__dn8Td",selectBox:"interaction_selectBox__TrfUb",selectLeft:"interaction_selectLeft__2RUKz",selectRight:"interaction_selectRight__21f7p",select:"interaction_select__3UvfZ",disabled:"interaction_disabled__3xUaL",selected:"interaction_selected__2T5-k",interactionBtn:"interaction_interactionBtn__1sp9A",radarBox:"interaction_radarBox__XfCAm",sector:"interaction_sector__2uDKI",sectorRotate:"interaction_sectorRotate__3Zvw7","radar-beam":"interaction_radar-beam__srHRF",camera:"interaction_camera__3UhZ8",icon:"interaction_icon__2oXQR",avatar:"interaction_avatar__3-veM",avatar0:"interaction_avatar0__1FEKo",avatar1:"interaction_avatar1__2URdw",unique:"interaction_unique__2Qe97",icon1:"interaction_icon1__3dFXu",icon2:"interaction_icon2__oVdOy",icon3:"interaction_icon3__1NS2C",icon4:"interaction_icon4__3DReJ",icon5:"interaction_icon5__3mCsM",assignationBox:"interaction_assignationBox__H2USM",header:"interaction_header__3zfPm",name:"interaction_name__2-i6f",count:"interaction_count__3EZYV",operation:"interaction_operation__Jsgy-",listBox:"interaction_listBox__3NtfY",item:"interaction_item__1LaL4",itemName:"interaction_itemName__1I6CE",itemNameText:"interaction_itemNameText__30NWb",itemNameTextOnly:"interaction_itemNameTextOnly__2G5Re",tagBox:"interaction_tagBox__3UBaI",itemCount:"interaction_itemCount__3hSOS",class:"interaction_class__2FtrW",classCount:"interaction_classCount__3ZdcT",onlyCount:"interaction_onlyCount__zNjWn",itemOperation:"interaction_itemOperation__xrs8a",start:"interaction_start__3KfWG",startDisabled:"interaction_startDisabled__3LQGv",doing:"interaction_doing__2cg9Z",done:"interaction_done__3Hk_Y",doneContent:"interaction_doneContent__sVrHI",bounceIn:"interaction_bounceIn__1jyaj"}},function(e,t,a){var n=a(5);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,i=n(a(7)),r=n(a(8)),l=n(a(12)),s=n(a(13)),u=n(a(14)),c=n(a(0)),d=a(30),f=n(a(608)),p=n(a(632)),h=n(a(187)),m=n(a(19)),g=a(25),_=(0,d.observer)(o=function(e){function t(e){var a;return(0,i.default)(this,t),(a=(0,l.default)(this,(0,s.default)(t).call(this,e))).state={},a}return(0,u.default)(t,e),(0,r.default)(t,[{key:"componentDidMount",value:function(){console.log("store",m.default),g.api.listen("userUpDownWallChangeNotify",function(e){console.log("\u4e0a\u5899\u5217\u8868\u53d8\u66f4",e);var t=e.user_array;t=t||[],m.default.UpWall.setList(t)})}},{key:"render",value:function(){return c.default.createElement("div",{style:{display:this.props.show?"block":"none"},className:h.default.optionCardContainer},c.default.createElement(f.default,{style:{display:"set"===m.default.answer.teaStatus?"block":"none"}}),c.default.createElement(p.default,{style:{display:"set"!==m.default.answer.teaStatus?"block":"none"}}))}}]),t}(c.default.Component))||o;t.default=_},function(e,t,a){var n=a(5);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,i=n(a(41)),r=n(a(38)),l=n(a(46)),s=n(a(7)),u=n(a(8)),c=n(a(12)),d=n(a(13)),f=n(a(14)),p=n(a(0)),h=a(30),m=n(a(187)),g=n(a(609)),_=n(a(28)),E=a(25),v=n(a(19)),S=n(a(97)),y=a(16),w=(0,h.observer)(o=function(e){function t(e){var a;return(0,s.default)(this,t),(a=(0,c.default)(this,(0,d.default)(t).call(this,e))).minCount=2,a.maxCount=8,a.ToastRef=p.default.createRef(),a.options=[{id:"A"},{id:"B"},{id:"C"},{id:"D"},{id:"E"},{id:"F"},{id:"G"},{id:"H"}],a.awards=[1,2,3,4,5],a.reduce=function(e){a.state.quizData[e].optionCount<=a.minCount||(a.state.quizData.forEach(function(t,n){if(n===e){var o=t.selectAnswer.indexOf(t.optionList.slice(-1)[0].id);t.optionCount=t.optionCount-1,t.optionList=a.options.slice(0,t.optionCount),o>-1&&t.selectAnswer.splice(o,1)}}),a.setState({quizData:a.state.quizData}))},a.add=function(e){a.state.quizData[e].optionCount>=a.maxCount||(a.state.quizData.forEach(function(t,n){n===e&&(0,l.default)(t,{optionCount:t.optionCount+1,optionList:a.options.slice(0,t.optionCount+1)})}),a.setState({quizData:a.state.quizData}))},a.setAnswer=function(e,t){a.state.quizData.forEach(function(a,n){if(n===e){var o=a.selectAnswer.indexOf(t);o>-1?a.selectAnswer.splice(o,1):(a.selectAnswer.push(t),a.selectAnswer.sort())}}),a.setState({quizData:a.state.quizData})},a.setAward=function(e,t){a.state.quizData.forEach(function(a,n){n===e&&(a.selectAward=t,a.showDropdownBox=!1)}),a.setState({quizData:a.state.quizData})},a.openDropdownBox=function(e){a.state.quizData.forEach(function(t,a){a===e&&(t.showDropdownBox=!0)}),a.setState({quizData:a.state.quizData})},a.closeDropdownBox=function(){a.state.quizData.forEach(function(e){e.showDropdownBox=!1}),a.setState({quizData:a.state.quizData})},a.focusDropdownBox=function(){console.log("focus")},a.addQuiz=function(e){a.state.quizData.length>=15||(a.setState(function(){return{quizData:[].concat((0,r.default)(a.state.quizData),[{optionList:a.options.slice(0,4),optionCount:4,selectAnswer:[],selectAward:1,showDropdownBox:!1}])}}),e||a.setState({isInit:!1}))},a.delQuiz=function(e){a.state.quizData.splice(e,1),a.setState({quizData:a.state.quizData})},a.start=function(){if(!(a.state.quizData.findIndex(function(e){return!e.selectAnswer.length})>-1)){v.default.answer.prepareDetailData(a.state.quizData);var e=(0,l.default)({},{quizSeq:Math.ceil((new Date).getTime()/1e3).toString(),quizList:a.state.quizData.map(function(e,t){return{quizNumber:t+1,vecOption:e.optionList,vecAnswer:e.selectAnswer,awardCoins:e.selectAward,content:""}})});E.api.request("multiQuizCreate",e).then(function(e){1179907!==e.statusCode?(v.default.answer.teaQuizStart(e.param),console.log("\u8001\u5e08\u53d1\u51fa\u7b54\u9898\u5361\u6210\u529f",(0,y.toJS)(e)),v.default.book.exportImage.clear(),v.default.book.exportImage.set("screenShotName",e.param.screenShotName||""),v.default.book.exportImage.set("wbImage","")):a.ToastRef.current.show(_.default.get("SIDE_TOOLS_ANSWER_DO_NOT_INITIATE"))}).catch(function(e){console.log("\u8001\u5e08\u53d1\u51fa\u7b54\u9898\u5361\u5931\u8d25",(0,y.toJS)(e))})}},a.state={quizData:[],showDropdownBox:!1,isInit:!0},a}return(0,f.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){var e=this;this.addQuiz(!0),(0,y.reaction)(function(){return v.default.answer.teaStatus},function(t){"end"===t&&e.setState(function(){return{quizData:[],showDropdownBox:!1,isInit:!0}},function(){e.addQuiz(!0)})})}},{key:"render",value:function(){var e=this,t=this.state;return p.default.createElement("div",{className:g.default.answerSetContainer,style:(0,i.default)({},this.props.style)},p.default.createElement("div",{className:g.default.tip},t.isInit?_.default.get("SIDE_TOOLS_ANSWER_CHOOSE_CORRECT"):_.default.get("SIDE_TOOLS_ANSWER_TOTAL_QUIZ",{number:t.quizData.length})),p.default.createElement("div",{className:g.default.optionWrapper},t.quizData.map(function(a,n){return p.default.createElement("div",{className:g.default.option,key:n},p.default.createElement("div",{className:g.default.optionTitle},p.default.createElement("span",null,_.default.get("SIDE_TOOLS_ANSWER_QUESTION",{number:n+1})),t.quizData.length>1&&p.default.createElement("a",{className:g.default.del,onClick:function(){return e.delQuiz(n)}})),p.default.createElement("div",{className:g.default.optionList},a.optionList.map(function(t,o){return p.default.createElement("a",{className:a.selectAnswer.includes(t.id)?g.default.optionItem+" "+g.default.letter+" "+g.default.selected:g.default.optionItem+" "+g.default.letter,key:t.id,onClick:function(){return e.setAnswer(n,t.id)}},p.default.createElement("span",null,t.id))}),p.default.createElement("div",{className:a.optionList.length===e.minCount?g.default.optionItem+" "+g.default.reduceBtn+" "+g.default.disabled:g.default.optionItem+" "+g.default.reduceBtn,onClick:function(){return e.reduce(n)}},p.default.createElement("i",null)),p.default.createElement("div",{className:a.optionList.length===e.maxCount?g.default.optionItem+" "+g.default.addBtn+" "+g.default.disabled:g.default.optionItem+" "+g.default.addBtn,onClick:function(){return e.add(n)}},p.default.createElement("i",null))),p.default.createElement("div",{className:g.default.award},p.default.createElement("span",null,_.default.get("SIDE_TOOLS_ANSWER_REWARD"),"\uff1a"),p.default.createElement("div",{className:g.default.selectContainer,tabIndex:0,onBlur:e.closeDropdownBox,onFocus:e.focusDropdownBox},p.default.createElement("div",{className:g.default.select,onClick:function(){return e.openDropdownBox(n)}},a.selectAward),a.showDropdownBox&&p.default.createElement("ul",null,e.awards.map(function(t,o){return p.default.createElement("li",{value:t,key:t,className:a.selectAward===t?""+g.default.selected:"",onClick:function(){return e.setAward(n,t)}},t)}))),p.default.createElement("i",{className:g.default.awardIcon})))}),p.default.createElement("a",{className:g.default.addQuiz+" "+(this.state.quizData.length>=15&&""+g.default.disabled),onClick:function(){return e.addQuiz()}},p.default.createElement("i",null),p.default.createElement("span",null,_.default.get("SIDE_TOOLS_ANSWER_ADD_QUIZ")))),p.default.createElement("div",{className:m.default.optionCardBtnContainer+" "+m.default.fixed},p.default.createElement("a",{className:-1===t.quizData.findIndex(function(e){return 0===e.selectAnswer.length})?""+m.default.optionCardBtn:m.default.optionCardBtn+" "+m.default.disabled,onClick:this.start},_.default.get("SIDE_TOOLS_ANSWER_START"))),p.default.createElement(S.default,{ref:this.ToastRef,widthStyle:{width:"180px"}}))}}]),t}(p.default.Component))||o;t.default=w},function(e,t,a){e.exports={answerSetContainer:"answerSet_answerSetContainer__1yvx3",tip:"answerSet_tip__1qB0l",optionWrapper:"answerSet_optionWrapper__1F8lP",option:"answerSet_option__1h371",optionTitle:"answerSet_optionTitle__yoodt",del:"answerSet_del__3ISwV",optionList:"answerSet_optionList__1O4M0",optionItem:"answerSet_optionItem__HEwEX",disabled:"answerSet_disabled__exH2Q",reduceBtn:"answerSet_reduceBtn__2zI3H",addBtn:"answerSet_addBtn__1bhPn",selected:"answerSet_selected__1wOnm",award:"answerSet_award__2bi5v",selectContainer:"answerSet_selectContainer__1r2k5",select:"answerSet_select__2BRMk",awardIcon:"answerSet_awardIcon__1ZvOV",addQuiz:"answerSet_addQuiz__2VLOp"}},function(e,t,a){var n=a(5);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,i,r,l,s,u,c,d,f,p,h,m,g,_,E,v,S,y,w,A,I,T,b,C,N=n(a(60)),x=n(a(7)),k=n(a(8)),O=n(a(61)),D=(n(a(62)),a(16)),P=new(o=function(){function e(){(0,x.default)(this,e),(0,N.default)(this,"userList",i,this),(0,N.default)(this,"role",r,this),(0,N.default)(this,"userId",l,this),(0,N.default)(this,"nickName",s,this),(0,N.default)(this,"classStatus",u,this),(0,N.default)(this,"toolSelected",c,this),(0,N.default)(this,"interCoursewareSelected",d,this),(0,N.default)(this,"cToggle",f,this),(0,N.default)(this,"ran",p,this),(0,N.default)(this,"tools",h,this),(0,N.default)(this,"cursor",m,this),(0,N.default)(this,"prompt",g,this),(0,N.default)(this,"assistantStatus",_,this),(0,N.default)(this,"authList",E,this),(0,N.default)(this,"eraseType",v,this),(0,N.default)(this,"eraseRadius",S,this),(0,N.default)(this,"showAniAuth",y,this),(0,N.default)(this,"showAssessmentClass",w,this),(0,N.default)(this,"cid",A,this),(0,N.default)(this,"authAniWid",I,this),(0,N.default)(this,"authAniHei",T,this),this.selectColor="#DD247C",(0,N.default)(this,"confirmClear",b,this),(0,N.default)(this,"cancelClear",C,this),this.userList=[],this.role=-1,this.userId=0,this.nickName="",this.classStatus=0,this.toolSelected="pencil",this.interCoursewareSelected=!1,this.cToggle=!1,this.ran=(new Date).getTime(),this.assistantStatus=1,this.authList=[],this.eraseType="whole",this.eraseRadius=20,this.showAniAuth=!1,this.showAssessmentClass=!1,this.cid=0,this.authAniWid=500,this.authAniHei=300,this.tools=[{className:"operateOnCourse",auth:!1,hoverTitle:"BTOOL_HOVTEXT_OPERATEONICW",active:!1,show:void 0},{className:"newPage",auth:!1,hoverTitle:"BTOOL_HOVTEXT_NEWPAGE",active:void 0,show:void 0},{className:"color",auth:!1,hoverTitle:"BTOOL_HOVTEXT_COLOR",currentIndex:4,active:!1,show:!1},{className:"font",auth:!1,hoverTitle:"BTOOL_HOVTEXT_FONT",active:!1,show:!1},{className:"pencil",auth:!1,hoverTitle:"BTOOL_HOVTEXT_PEN",currentIndex:0,active:!1,show:!1},{className:"shape",auth:!1,hoverTitle:"BTOOL_HOVTEXT_SHAPE",currentIndex:0,active:!1,show:!1},{className:"erase",auth:!1,hoverTitle:"BTOOL_HOVTEXT_ERASE",currentIndex:0,active:!1,show:!1},{className:"undo",auth:!1,hoverTitle:"BTOOL_HOVTEXT_UNDO",active:void 0,show:void 0},{className:"redo",auth:!1,hoverTitle:"BTOOL_HOVTEXT_REDO",active:void 0,show:void 0},{className:"clearScreen",auth:!1,hoverTitle:"BTOOL_HOVTEXT_CLEAR",active:void 0,show:void 0},{className:"transform",auth:!1,hoverTitle:"BTOOL_HOVTEXT_MOVE",active:!1,show:void 0}],this.cursor={default:{cursor:""},operateOnCourse:{cursor:""},forbidden:{cursor:"url("+a(611)+")"},font:{cursor:"url("+a(612)+")"},pencil:{cursor:"url("+a(613)+")"},pen:{cursor:"url("+a(614)+")"},signpen:{cursor:"url("+a(615)+")"},square:{cursor:"url("+a(188)+")"},circle:{cursor:"url("+a(188)+")"},straight:{cursor:"url("+a(188)+")"},erase:{cursor:"url("+a(616)+")"},transform:{cursor:"url("+a(617)+")"},rotate:{icon:a(618),cursor:"url("+a(619)+")"},cornerLeft:{cursor:"url("+a(620)+")"},cornerRight:{cursor:"url("+a(621)+")"},horizontal:{cursor:"url("+a(622)+")"},vertical:{cursor:"url("+a(623)+")"}},this.prompt={color:{value:"#DD247C",option:["#C0FF42","#33FBCD","#4FC4FF","#7070FF","#DD247C","#FF39BE","#FF6F6F","#F4C56A","#FFFFFF","#000000"]},paintBrush:{value:3,min:2,max:30,option:[{selected:!0,value:3,min:2,max:30,hoverTitle:"BTOOL_HOVTEXT_PENCIL"},{selected:!1,value:15,min:15,max:50,hoverTitle:"BTOOL_HOVTEXT_SIGNPEN"}]},fontSize:{value:18,min:12,max:66},shape:{value:"square",option:["square","circle","straight"]},erase:{value:20,min:0,max:50,option:[{selected:!0,value:20,min:0,max:50,hoverTitle:"BTOOL_HOVTEXT_WHOLEERASE"},{selected:!1,value:20,min:0,max:50,hoverTitle:"BTOOL_HOVTEXT_PARTERASE"}]}}}return(0,k.default)(e,[{key:"switchTool",value:function(e,t){this.tools.map(function(e,t){void 0!==e.show&&(e.show=!1)}),t&&(this.tools[t].show=!0),this.changeSelected(e)}},{key:"tabItemSelect",value:function(e,t){var a,n;this.tools[(a=this.tools,n=e,a.findIndex(function(e){return e.className===n}))].currentIndex=t,this.changeSelected(e,t)}},{key:"activeItem",value:function(e){var t=this;this.tools.map(function(a,n){["color","newPage","redo","undo","clearScreen"].includes(e)||a.className===e&&(t.tools.map(function(e){void 0!==e.active&&(e.active=!1)}),t.tools[n].active=!0)})}},{key:"changeSelected",value:function(e,t){var a=this;switch(this.ran=(new Date).getTime(),this.activeItem(e),e){case"color":(t||0===t)&&(this.prompt.color.value=this.prompt.color.option[t]),this.toolSelected=e,this.selectColor=this.prompt.color.value;break;case"pencil":if(t||0===t)switch(this.prompt.paintBrush.option.map(function(e){e.selected=!1}),this.prompt.paintBrush.option[t].selected=!0,this.prompt.paintBrush.value=this.prompt.paintBrush.option[t].value,this.prompt.paintBrush.min=this.prompt.paintBrush.option[t].min,this.prompt.paintBrush.max=this.prompt.paintBrush.option[t].max,t){case 0:this.toolSelected="pencil";break;case 1:case 2:this.toolSelected="signpen"}else this.prompt.paintBrush.option.map(function(e,t){e.selected&&(0===t&&(a.toolSelected="pencil"),1===t&&(a.toolSelected="signpen"),2===t&&(a.toolSelected="signpen"))});break;case"shape":(t||0===t)&&(this.prompt.shape.value=this.prompt.shape.option[t]),this.toolSelected=this.prompt.shape.value;break;case"erase":if(t||0===t)switch(this.prompt.erase.option.map(function(e){e.selected=!1}),this.prompt.erase.option[t].selected=!0,this.prompt.erase.value=this.prompt.erase.option[t].value,this.prompt.erase.min=this.prompt.erase.option[t].min,this.prompt.erase.max=this.prompt.erase.option[t].max,this.eraseRadius=this.prompt.erase.value,t){case 0:this.eraseType="whole";break;case 1:this.eraseType="part"}else this.prompt.erase.option.map(function(e,t){e.selected&&(0===t&&(a.eraseType="whole"),1===t&&(a.eraseType="part"))});this.toolSelected="erase";break;case"font":this.toolSelected=e;break;default:this.toolSelected===e&&(this.toolSelected="pencil",this.activeItem("pencil")),setTimeout(function(){a.toolSelected=e},0)}}},{key:"onPenSliderChange",value:function(e){this.prompt.paintBrush.value=e,this.prompt.paintBrush.option.map(function(t){t.selected&&(t.value=e)})}},{key:"onEraseSliderChange",value:function(e){this.prompt.erase.value=e,this.eraseRadius=this.prompt.erase.value,this.prompt.erase.option.map(function(t){t.selected&&(t.value=e)})}},{key:"onFontSliderChange",value:function(e){this.prompt.fontSize.value=e}},{key:"onWheelChange",value:function(e,t){var a=this;"font"===t&&(e.nativeEvent.wheelDelta>0&&this.prompt.fontSize.value<this.prompt.fontSize.max&&(this.prompt.fontSize.value+=6),e.nativeEvent.wheelDelta<0&&this.prompt.fontSize.value>this.prompt.fontSize.min&&(this.prompt.fontSize.value-=6)),"pencil"!==t&&"pen"!==t&&"signpen"!==t||this.prompt.paintBrush.option.map(function(t){t.selected&&(e.nativeEvent.wheelDelta>0&&t.value<t.max&&(t.value+=1),e.nativeEvent.wheelDelta<0&&t.value>t.min&&(t.value-=1),a.prompt.paintBrush.value=t.value)}),"erase"===t&&this.prompt.erase.option.map(function(t){t.selected&&(e.nativeEvent.wheelDelta>0&&t.value<t.max&&(t.value+=1),e.nativeEvent.wheelDelta<0&&t.value>t.min&&(t.value-=1),a.prompt.erase.value=t.value,a.eraseRadius=a.prompt.erase.value)})}},{key:"shutTool",value:function(){this.tools.map(function(e){void 0!==e.show&&(e.show=!1)})}},{key:"setRoleAndUserId",value:function(e,t,a){var n=this;if(this.role=e,3===e){this.prompt.color.value=this.prompt.color.option.filter(function(e){return"#DD247C"!==e})[Math.floor((this.prompt.color.option.length-1)*Math.random())],this.selectColor=this.prompt.color.value;var o=this.tools.findIndex(function(e){return"color"===e.className}),i=this.prompt.color.option.findIndex(function(e){return e===n.selectColor});this.tools[o].currentIndex=i}this.userId=t,this.nickName=a,1!==this.role&&2!==this.role||this.tools.map(function(e){e.auth=!0}),3===this.role&&this.tools.map(function(e){["color","pencil","erase","operateOnCourse"].includes(e.className)&&(e.auth=!0)})}},{key:"enableOperateItem",value:function(e){(void 0===e||e)&&(e=!0,2===this.role&&1===this.assistantStatus&&(e=!1)),1===this.role||2===this.role||3===this.role?(this.interCoursewareSelected=e,"forbidden"!==this.toolSelected?this.interCoursewareSelected?this.switchTool("operateOnCourse"):this.tabItemSelect("pencil",0):this.interCoursewareSelected&&this.activeItem("operateOnCourse")):this.interCoursewareSelected=!1}},{key:"setClassStatus",value:function(e){this.classStatus=e}},{key:"setUserList",value:function(e){this.userList=null!==e?e:[]}},{key:"setAuthList",value:function(e){var t=this,a=this.authList.some(function(e){return e===t.userId}),n=(e||[]).some(function(e){return e.usrId===t.userId});if(!a&&n){var o=Math.floor(document.getElementsByTagName("body")[0].clientWidth);this.authAniWid=o>=500?500:o,this.authAniHei=Math.floor(3*this.authAniWid/5),this.showAniAuth=!0}!n&&this.shutTool(),this.authList=(e||[]).map(function(e){return e.usrId})}},{key:"setAssStatus",value:function(e){2===this.role&&(this.assistantStatus=e)}},{key:"ispauseDraw",value:function(){1===this.role||2===this.role&&1!==this.assistantStatus||3===this.role&&this.authList.includes(this.userId)?"forbidden"===this.toolSelected&&this.tabItemSelect("pencil",0):this.toolSelected="forbidden"}},{key:"isMountedTool",get:function(){return-1!==this.role&&4!==this.role}},{key:"isMountedPage",get:function(){return-1!==this.role&&3!==this.role&&4!==this.role}}]),e}(),i=(0,O.default)(o.prototype,"userList",[D.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),r=(0,O.default)(o.prototype,"role",[D.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),l=(0,O.default)(o.prototype,"userId",[D.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),s=(0,O.default)(o.prototype,"nickName",[D.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),u=(0,O.default)(o.prototype,"classStatus",[D.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),c=(0,O.default)(o.prototype,"toolSelected",[D.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d=(0,O.default)(o.prototype,"interCoursewareSelected",[D.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f=(0,O.default)(o.prototype,"cToggle",[D.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),p=(0,O.default)(o.prototype,"ran",[D.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h=(0,O.default)(o.prototype,"tools",[D.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=(0,O.default)(o.prototype,"cursor",[D.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=(0,O.default)(o.prototype,"prompt",[D.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=(0,O.default)(o.prototype,"assistantStatus",[D.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=(0,O.default)(o.prototype,"authList",[D.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=(0,O.default)(o.prototype,"eraseType",[D.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=(0,O.default)(o.prototype,"eraseRadius",[D.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=(0,O.default)(o.prototype,"showAniAuth",[D.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=(0,O.default)(o.prototype,"showAssessmentClass",[D.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=(0,O.default)(o.prototype,"cid",[D.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=(0,O.default)(o.prototype,"authAniWid",[D.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=(0,O.default)(o.prototype,"authAniHei",[D.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b=(0,O.default)(o.prototype,"confirmClear",[D.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.cToggle=!1,e.switchTool(t.type)}}}),C=(0,O.default)(o.prototype,"cancelClear",[D.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.cToggle=!1}}}),(0,O.default)(o.prototype,"switchTool",[D.action],Object.getOwnPropertyDescriptor(o.prototype,"switchTool"),o.prototype),(0,O.default)(o.prototype,"tabItemSelect",[D.action],Object.getOwnPropertyDescriptor(o.prototype,"tabItemSelect"),o.prototype),(0,O.default)(o.prototype,"activeItem",[D.action],Object.getOwnPropertyDescriptor(o.prototype,"activeItem"),o.prototype),(0,O.default)(o.prototype,"changeSelected",[D.action],Object.getOwnPropertyDescriptor(o.prototype,"changeSelected"),o.prototype),(0,O.default)(o.prototype,"onPenSliderChange",[D.action],Object.getOwnPropertyDescriptor(o.prototype,"onPenSliderChange"),o.prototype),(0,O.default)(o.prototype,"onEraseSliderChange",[D.action],Object.getOwnPropertyDescriptor(o.prototype,"onEraseSliderChange"),o.prototype),(0,O.default)(o.prototype,"onFontSliderChange",[D.action],Object.getOwnPropertyDescriptor(o.prototype,"onFontSliderChange"),o.prototype),(0,O.default)(o.prototype,"onWheelChange",[D.action],Object.getOwnPropertyDescriptor(o.prototype,"onWheelChange"),o.prototype),(0,O.default)(o.prototype,"shutTool",[D.action],Object.getOwnPropertyDescriptor(o.prototype,"shutTool"),o.prototype),(0,O.default)(o.prototype,"setRoleAndUserId",[D.action],Object.getOwnPropertyDescriptor(o.prototype,"setRoleAndUserId"),o.prototype),(0,O.default)(o.prototype,"enableOperateItem",[D.action],Object.getOwnPropertyDescriptor(o.prototype,"enableOperateItem"),o.prototype),(0,O.default)(o.prototype,"setClassStatus",[D.action],Object.getOwnPropertyDescriptor(o.prototype,"setClassStatus"),o.prototype),(0,O.default)(o.prototype,"setUserList",[D.action],Object.getOwnPropertyDescriptor(o.prototype,"setUserList"),o.prototype),(0,O.default)(o.prototype,"setAuthList",[D.action],Object.getOwnPropertyDescriptor(o.prototype,"setAuthList"),o.prototype),(0,O.default)(o.prototype,"setAssStatus",[D.action],Object.getOwnPropertyDescriptor(o.prototype,"setAssStatus"),o.prototype),(0,O.default)(o.prototype,"isMountedTool",[D.computed],Object.getOwnPropertyDescriptor(o.prototype,"isMountedTool"),o.prototype),(0,O.default)(o.prototype,"isMountedPage",[D.computed],Object.getOwnPropertyDescriptor(o.prototype,"isMountedPage"),o.prototype),(0,O.default)(o.prototype,"ispauseDraw",[D.action],Object.getOwnPropertyDescriptor(o.prototype,"ispauseDraw"),o.prototype),o);t.default=P},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAYAAABV7bNHAAAIPElEQVR4Xu2Ze1BU1x3Hf+fevXff7rIqCEQxa3mMjgxqqn8opRooNsmkixliH5bE8RFnYqZIC9NJLEsNpGBq0xjbTGKAyZCOTSMyOqk0cZMRHKc2habYxvgABEJQkQV57i67957OWfcwmx0ikGvNZXJ25s4dmN27537u5/c9v3MWAXvdkQBifO5MgAGawhAGiAFSFiLMIGYQM0gZAWaQMn4sg5hBzCBlBJhByvixDGIGMYOUEWAGKePHMogZxAxSRoAZpIwfyyBmEDNIGQFmkDJ+LIOYQcwgZQSYQcr4sQxiBjGDlBFgBinjp6YMmmwsWNntKf+0GgDRMUSeKZzIs/K7nsEVvm5A9Ps5AECyLP8ZADIA4LTP56vv7Oz8W0pKSi8AEEj0oLd3T+xSAyAyBgJII8tyzxrvyahUfh5+iItDmfwC2QyaJr/fXz88PHwyOzv74+bmZvlewlIDIAKHBwDB6/W+tRv9+wdvBToQAg5E0MBaLho2amJxNheNkjhTj9/vf8/n851sampyrV+/fjgC1l23Si2ABAAQOzo68prjuVe2jJ8DAghh/vYZbp/tyAQbhRj8PTQPreWtPgFQw+Dg4C+joqLOAwAxi7zuKiQ1AdKVlJTct6f42ZZFnne5AEZfgEMhccFq5MEMArwgLsG5YKsRRXFbCFBkTs0gjid/q5oAaQFA7/V6T27C/1zRKPVPmBNuEQGlBR6eE+/Hu/jY622trZuTk5P/AQBSGCTFYOgF1ACIjCFYYgBg6O7uLjwW4y14zvcpotaEn5OQEV7TpWD7GLxfUVHxs9LS0usAMA4AgQhA4aX2lcvu6wZEHhQZgyYESF9XV/ftZY9m/fUBT0MIEM0hDvI08bhUuN979cLFsuXLl9cQMFVVVbacnJxMvV6fqNFozJIk9UqS9NHZs2dPZWVljSgNcbUACs5iAKDT6/WG4eHh5gd8Z2M6sG+izJ4Q4vFv8KL2gwcP7i4qKrpcUFBgcTqdRbLZmHsqMMR/IvtgGGOI4US8htOjtbx+QPb7yx0Ox8v19fXUrhmHuFoA0TIjOWRwu90v7Tfd3Py6vztoUSIywQe6NM8fD7y0qaio6EplZeWSLXl5VW/I/fEvj9+E0WCcE8Ykwm/PfnZOhFLdXLwaNO/X1NT8cOvWraQlmPFMpwZA5KnSXogA0jU1NTkG0xYfzvX+J9gLvadPw+iTq8WpqalH8vPzLRUvvniiQOqJq/MPIgJmHW+CDRozNgOPPsMSPuEfQz0YgwbzUKGzwiNIOCYIwo++SpCrBRAZx0SZ5eTkzD9y9J3zSZ5z2l8ICZDnMZ+yWq27yA329/fvP2L0P142fgMsSIBXdQvxGj9/uaur693R0dHB1NTU/HMQiHpyzI3IJUXg4agxCi8YHPqxzWarDUGadjugJkDEIjqb6UdGRt4+rh1Jz4W5N5/aufOh6urqvpKSkuj84r3nVo9d5EcxwJ/0i3FS79CRpKSkMqLhlStXnu+cb8vZ7nEjL+YgHmngGkbwHV6E13SGf/E8vzY025GWYFozm1oAhZcZme51dXV1aRkZGTsbGxvfdDgcwU65ra3tp80Lo8r3+HognTdDNYq+FB0d7SAfbm1tLW2fa9m0w9OPvBjB46IJ7xEN8ODIEJKAg0aTGX/84YcpmZmZHSFI07JITYBomdEpn9hEyo78n9wMcrvdzx80ju+o8g/Ar7QL8Hc7+g6sWrXqcFtbW1mbbc5jBI6HwBGM2Mlpb2BZ9m2VpIQWGaBSr4MFn3U9arfbTwGAf7pNpdoAhUMioILbIDTEb9269co+7djmdwLDsF8bA0s/7dwbGxub1m6b89j2EJzNohEXI+0NZ3Hx9sLCwvxfG4yZHwQw/F4nQvK1z/MSEhKOhgBNq8zUBIg2jQRK5EFMEnt7e53VFu7pP4wPoN2iDf9cYx34CPujJswRjdiJtDdeKCt7ct++fd0ej+fEFgnsF2UENXoB0H/PP7xixYrTIUCkN5oyh9QIiOZRODBSbtqWlpacgaXfeuMJ73VYiEQo183HT4UCmZpTUV6e53Q6u1wu14OL12845BgdR4ZgBml8T+/YkVxZWdkXtjSZtYDC14p0dtM6HI65f6mtbcr2XLN2YBl4fLt9yg2ZE4LT0dDQsGH1unX7t3sCc1pkBD8RNPgZaazeZDLlAYAnBGhWlljkKnxit5EYRFb77e3tz1xbFPcs6XNkQHAfJ8BRgw2bx/2dY2Njlw0Gw5JuQbQ7PX7UIiGI4zh428AFXMdqs3Jzc1sAwDubM2iybYovdNlWq9XY1dX1pkvHZ+z1jkAAuOD2xzJegPmIh89lBJdkCC43CJxXDTxGnVeddrv99ZA9vklW/l+6PaK2DJpsoOFddnApkp6ebjt+/Phvr1vMGw94Pejvkgw4tFohazGSOZtEDd4lclJfW2tpYmLi4ZA5BA7ZGqHlNesy6MsA0S2RYFiTUiPnM2fOfH/lypW7vHr9skuSjEYwwDyEYCmPfN6hodO1tbW/27Zt2wUAIGBIaU22b3THzbXZYhCd2WgTSbptAooA0xQWFsZlZGTYLRaLye129x06dOiCy+UaCpUSgUKP8AZxSnvoNHrXtif/jxciDzI8sAkoAicIKNRxk6wiL7KlQQ5SRgQIPUjfM+3SUsuW60yYhkMijSM5KBy6JKEbYhQQgUI3yyi4GW2azYYSC4dIIVGbwjtuei90EUohRf7QOK3Smo0GRY45HBaFQxe24T9VK/ptf7YZFGnTZH9HGjIjYybrVGeSA9+4985mg+7Jw2KApsDMADFAyiqRGcQMYgYpIzDFp/8H+QH1Zx3ZuSAAAAAASUVORK5CYII="},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAYAAABV7bNHAAADs0lEQVR4Xu2ZzU8TQRiH39nlq91iCFL8oCFEWiXxIgcP6kVMNEYuXjyZeDfx4l/ixcSjiTdOXtSgMeFiSLzIxUPFgtFUgoA1kV0K6HbMb7qDiyAtzrY17Ltk0wba2e3T531n5ocgPvYkIJjP3gQYUA1DGBADMmsibBAbxAaZEWCDzPhxD2KD2CAzAmyQGT/uQWwQG2RGgA0y48c9iA1ig8wIsEFm/LgHsUFskBmB/9ig/Za3bCiJvwy+35uM4h7D18Tz8BkeH0DCp/5bU0G1ChCua3medzWRSDwQQmR2Iy+lLJbL5duO40wSUSUELIovqq4xWgXIIqK2SqVSGNuYzExXlnfcrCBB56x+muq8UrQsK0tEP0OQ6vpwUbyo2YB0OdkA5Pv++0ubLwamK0uq0vBDZAWPgs5baXrZMfbZtu1cAMhvtkWtAtRGRB35fP5aNpu9Z9v2cXzbibUJEmTRWvKG+vJ9318oFAp3R0ZGnhHRZgBJ96UoBKk5RksBEVEnuACWlHLO8R6TEILc5HU8DgdQykS0ETdAKLH2AFAXEXVJKecPeU9UqX13xgHoBBGtBycA/YBUB73EoHS10RCpMgOcANCnHu+5KrFvzmUAGgwB0uWlZ7KapRHVC5pdYhqQhgSLNKCFw96U4vfVuQhA6EvaINgTq2keoMIWJaWUi2nvlQK07FwAoKNEtBbqPQCE48AvFLX9AIRepBq1lHLpiPtaldhi6iwA9RORbtDoPRpQVNVT1zitKDF9Y7g2+hAAoUkvH3PfKEALqTMAlA41aCwSm2pO+CbrItmAF+0AlHHfqhIrpk4zoGA222bQoPtOGfQxlWNAuwEacucVoA+pIQYUzGLbmvTwalFxm+seiHWT1hPDjmk+t/pFGTTbnY71NK939NbKysp4b2/vfZ0HnVotKUD57p7qgkfKYqlUutPX1/c0bgvFrTzoZtnNzPhY4iDswK+rsQeej1oWPUq2xzYPavd9f/bW+sbAjI8lTjUH2oIkBY3agh4mCHnQybhsVnV57ZoH/bnW4jyouorGiV09oKHGcKDmsHrGLh5RRyzzIB13AA529Zjy9QyHmsP+C7t4QNJxR+zyIJVNB3CqHfr3jh0WAQhM0o+xy4MARJuj+5OONHT2rK2JXR4UDs/CcHSvju0/Dv81SYhd3NGABCX6IVsZmEX/aRowIgOqAZUBMSCzumOD2CA2yIwAG2TGj3sQG8QGmRFgg8z4cQ9ig9ggMwJskBk/7kFsEBtkRqDGu38BdT89WLHEL+YAAAAASUVORK5CYII="},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAYAAABV7bNHAAAE9UlEQVR4Xu3azUsrVxgG8JOZJENAF0bNxpVLKUg39Q8oheKuq8FqvXVRkdJSShdCQbntpt13VW27kZZurq2VQkD8Wrhru5CuekHhooKLiJk5+TBOnCnP3HmnJ2Nicp3kdsZ7BoaYxODk5/O+c86ZSTC53SmQkD53C0igNgmRQBIoXBORCZIJkgkKJyATFM5P9iCZIJmgcAIyQeH8ZA+SCZIJCicgExTOT/YgmSCZoHACMkHh/GQPkgmSCQonIBMUzk/2IJkgmaBwAjJB4fxkD5IJkgkKJyATFM4vbj1IPF4n3Ffv7NNxAAoeIz0XgXqGFXUgOj48ijv+/UARd3qts2h0+FtRBvJxJicnU/l8HhiKtxOGzRijnbC6ChVVIB/n7OxsLp1Of1WtVlfX1tZ+WFpaMrx/PkBuPCB6BFZXoaIMlDBNc8627dV6va66sXCcsmmaP66vr68uLi6eekDAqQs/i4kKnaYoArnHVK1W55LJ5HeO46jX19fs6upK7BqWaZq/7ezsfDM/P//UAwIS7ZQoat73buKRBCqVSu8zxr5PpVJqIvH8EG3bZpVKxX2kzbZtvr+//56u6394OBZjDDulikru3kmKHFChUBjRNO0ZY0xVVZUlk0kfxHEcJIvV6wjK8w1Iu7u7s1NTU396OIREaQqFFDkgnM4559uMsTcBkEqlmKLg5PXfhnJD2YlI29vbj6anpwkJbwIqNFIkgS4uLt5Op9N5Akin04xKjV6r1WpuXxJKkPcCKYpAMFA4538xxl53nyiKm6Tg9jKQogqUMAzjXUVRfiKUYD8SkwSoXpVbZIFWVlaSMzMz/ziOM0pfHg0bUMEtOAxA4+5WuUUVCAaJYrH4gaqqqwSCsxiQxDMbvQcknOG63ZMiDYQvbxjGl4qiLItI6EfNkmRZlovUzXKLMpCbIuyGYXwhIuGNVuXWbaQ4ALknMsMwHv8fSFEHohQ1RUJP6nW5xQGoAYlz/pgx5vekHpWbP7mNC9CdSboLCfM2THJpsyyLb25uPlpYWAhOS2iS27CmFCegtkjN5m34EDVuYJXLZXZzc8P39vaCSDR/o6USfNSJG9C9kXD6LxQKWHRzw6SqKj84ONBnZ2f/9ia2GI4DiRbf3JXJOAK9MBIGkcViEclx04SkDQ8PA+vZ+Pj4W0dHR6hB4IhIbqnFFahjJMKh5GDi29/f7464sUpweHj46cTExC8CEJCoH8UaqC0SUEzT9MsKyenr6xPLjF1eXv48MjLyuQeEdV0RyI5zgujERN+hYTCJ5HDO3aUSSsvAwICLQ4ttGI1zzn/P5XIfN0kQetGDALqVJMuylkulkn9qz2QyLJvN+hNZLLTRxPf8/Pzb0dHRr1uU2IMBakA6Pj72pyWaprHBwcGGZVusH2HxX9M0Z2Nj4x1d17E4hyZN+4PpQcGlIb/cgJTJZJaHhoaaLtei9Djnv+ZyuU+8phzEif1ZLIhzqydVKpXPUqkUyse/fITSwoCxVqvldV3/aGtrqxy4ZOT2HrpC+xCadDMoP0knJyevZbPZD1VVfYMxplmW9fT09PTJ2NjYloeAkbN4dZauzMZ2JN0qOa3KDVh00wPWa+kaEl7HaJlAgETPXRyxsXX6R+P2e/5NEIHbZ8TKESenty5VP9QSa5WmVqFoeTPWqwIkgjX7zi1vbngVgV6oTUigNlwSqA3Qv3vCAXYdLbDfAAAAAElFTkSuQmCC"},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAYAAABV7bNHAAAD6UlEQVR4Xu3aQWsTQRQH8JnZ7Kko5CiU4smr9OqlNym5FUoxASFEPUpBCAWj0ho8iIL3nkpp+xH00oNaGuhNiBBRCpIEwtKEFqk12WSz8tZ9ZbKNSdtJwk76FoY02wQ2v/zf253JckZbTwFOPr0FCKhPQgiIgNSaCCWIEkQJUhOgBKn5UQ+iBFGC1AQoQWp+1IMoQZQgNQFKkJof9SBKECVITYASpOZHPYgSRAlSE6AEqflRD6IEUYLUBChBan7UgyhBlCA1AUqQmh/1IErQ1UtQMPWuGkHvd+tUYvKxyn8HgQYKpgsQHic8ygO+fgCRB+4bSLB0AMJjFMlk0lxbWwMM4UMhRpsxhgOxBgIVdqBTnHK5/NQwjMeNRmM9l8utJxKJkh8RhHEYYzgACfYrI+kAxCuVSoZz/lKqmfbJycmHvb29d/F4PO9jtBhjMIJQcqIuXHZhBvKO7fDwMBOJRLK2bbNmsxn8gM7R0dF6KpV6lcvljn0geBFidSu7CyGFGqharWaEENlIJMKEEMxxHNZoNFi7jdXz77M2m81vq6uryWw2W4SnAShIFLzhUkkKLZBlWbdN0/yCX7dpmoxzzlzXZd3S1G63K5ubm4l0Ov3dB7IlrEsjhRZoeXlZLC4uFlzXvQVIgANIuEGa6vW6Bybts7a2tu6l0+kfPg6kCaCwN104SaEFApNarfaEc/4WAQzDYDBwg1IDJLnkHMexNjY24ktLS5AkAFJCCjVQqVSKTkxM/GSMXQuWGj6HBAESJEpO0qCQwgzkVVatVnvNOU/jhw+WmnehM0Sk0APt7+9fj0ajBcbYDUSCMxqc2eRtWEhhB/JSZFnWXdM03/tTDM8l2I+GlSQtgKSG/UZOzSiQdADyUuQjrXDOn40SSScgcBHVanVFCJEZFZIuQJiikSPpBDRKJLyocnUDGiYSTEnOTEt0BBookj93g2kJAslI3tlB1+10tVGlcdu2/XVqairmAzUYYzBwcqtliclfqDJSq9UqT05O3hlXIKVya7Va9d3d3dT8/PxnCWhsSkw1SfXt7e1Hc3NzH6UlEVxkO11g07kHBXvnucvNdd36zs7Ow1gs9imwZgRrRx2rj+MEdK5yE0JAWT2YnZ0FHGjG8oIaPMdVR2/+O25A/ZD+5PP55MzMDPQcSAoCyb+C4Bqu9ziOQB1IBwcHLwzDeO667nGxWLw/PT0NOLBBUvB0fiY5WL/jCtSBlM/nbxYKhd8LCwu/pFAAEPabjrLq1v11vVjsd9wYAG+5JPCbvvwLR0dZXSWgYBsJVox8q0zX22bGucT+dxkQ3N/zfqKrBNSvHLv+n4D6sBFQH6C/+o/Aa7ZkXqkAAAAASUVORK5CYII="},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAYAAABV7bNHAAAFiElEQVR4Xu2aT0gjVxzH35vYQFwvHhS2iIcqCBK7otJDU4opIqWlHlq7VbpChbbQg1pDu4eCxUNB2uLKCvUibaEXd420zUK7PVjqoSCKBQVlg5gGVmyMic5obZxkMpnym86bvoz5Z8bDjPsePIw40cmH7/f7fr/fiBFbBQlgxqcwAQaoiEIYIAbIXIgwBTEFMQWZI8AUZI4fyyCmIKYgcwSYgszxYxnEFMQUZI4AU5A5fiyDmIKYgswRYAoyx49lEFMQU5A5AkxB5vixDGIKYgoyR4ApyBw/lkFMQUxB5ggwBZnjZ8cMIvesmPvopb3bLoDo+zTesxHUpYKzAyByj/DVuAGGcYM0Lg2S1QGR++MQQvQmoAicDEKIbBpYaT4qcJWVAelw9vf3v5Jl+UYymVxMpVIxv9//cGxs7FBTCoCRDfvSIFkVkA4nEonMKoryjqIo+r1ijAHA4cLCwmvDw8N/anAkhFCaAgXgCKiylWRlQJjn+S/S6bRPlmUsyyCS/xbGGHEch9Lp9OOpqanXJycn/9LgACSy4Q0AyVQmWRaQIAifI4Q+IspRFAUBpEwmg+A1WZIkBX0+302/3w+WI3BSlJpMQbIkIEEQPkMIfULbiijH4XCogCRJUjcsURT/6O/vv7W8vHyiQQJAtOXKhmRJQDzPLyCE3qCDA2xVUVGRlSWpVArBhpVIJJa6u7vf3dnZObtMSJYEJAgCWOtLOnNAOQDJuJLJpK4kQRAetLa2joiiCNTIJkoiZcCFMsmSgOLx+HMOh2OFwADl5IJDfi6KIgS2+m08Hv/O7XaPGfKobEiWBAQHFc/z/yCEXMXg5IK0t7d3t729/Q5lNRLapAwgKV+04rYsoJOTk0WM8UuFlEPbDYIblETKgVAoNO7xeL7VrAYKooOb1EhF7WZZQNFo9JmqqqpfFEVpLLXKA0hnZ2dqKQA10Obmpq+rq+t7Q2jTditaSFoVkHqqB4PB63V1dT8jhG6UCUlaXV19v6en59c8ditabVsaEEDZ2tqqrq+vD2CMX7gIpEQiodZLiqKcLS4uDgwMDEDo01aD16TazqskKwNSVQQ7EAhc83q9cxzHvVoqJLAZ2E2DdDw/P983MjKymUNJBSFZHZAOaXp6+qnBwcGvMcZvlwNJluWD2dnZN8fHx6G5JYFtbEnOKckOgAgk1NnZ6QgEAnccDsfQRSCB3WBJkvR4YmKid2ZmBprbfHbLOtnsAkiHBIMznufHnE7np8ZeLR80OPrBbrBSqdSjoaGhtwKBwFEBJemQ7AQoC9LR0dEHTqfzrjZpLCooqLShToIliuJab2/vrbW1tb9zZFJWS2I3QFmQYrFYn8vl+gYh5CxKCOYfFKTT09PfvF7ve7u7uyCtZJ5C8v8pXSl/wELX6BPHWCz2cmVl5X1FUa6Vcn8wIoEGF9bx8fEPTU1NH1KASIMLJ5sa2HZUEOGgP+04ODh43uVyPcAYV5cCiR6TLC0t3ezr6/vdAEk/+u0MiLYbDofDz9bU1PyEEHr6ApDkubm57tHR0UcaIJAWaUVsr6BzSgqFQg21tbUPMcYNJUDKbGxs3PZ4PPep2RGpj66ExWgGut3W19evNzY2gpIK9W+ZYDB4u6OjY95witGNrHrU291iRqGorcnKykp1c3Pzj3n6t8z29vbHbW1tAAfmQ0Q1Obv8qwZIb020/u0ex3GvUBQz4XDY19LSAnDARgCIfkxErGXbQrGEaFEvUZVk6N/kaDQ63NDQcE/7JVAQAiAyZcw5s76KCjKGNxeJRF48PDw8crvdOxo80pSSR9Z5J4xXGVBW1W34zxBiIePA7NyM+qoDyqqVNGnBZ841tM85wH8SANGQcmVYwScbTwqgUsP93HUMUBF0DBADVLa71Df+C4rSvGfGge6dAAAAAElFTkSuQmCC"},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAYAAABV7bNHAAAFKklEQVR4Xu3aT0gjdxQH8DczUQwt7UG0gqv0YKE37xaEXgQ1F1lBe7a7pbb3HupuLUulJzHaFHIohbaXQi+hp7bYlh6sWIx6bQkxtB6MIaIxTmaSOOXNzgs/J5M4f9T8ZvkFhmSXBH/zyfe9eTMZCcSjrYAkfNoLCKAbEiKABFCwJvKiJci+P0YwHoAXAYjdh3ZAvrDCDkTrx2d2w+AgCLvR/3kKVZiBaO2yhYPPivWaMK4AgN08I4UVqIGTz+cfdnd3fwAAL5fL5R9jsVhib2+vZsHUAYDdEMsTUhiBGjinp6dPFEX5hK0ZVVU3Z2ZmFra2tlQLpwoACIYbYnlCChtQWxyCKpfLv8VisUe7u7uXAIBAtHlGChOQKxwWaXp6+nE6nSYk3YLyhBQWoAbO8fHxk2g0eq2sWh2WLi4ufp+amnq8v79ftnA8I4UBqIGTy+XMnhONRqGrq8vV4TooEu9ATTikcl9IPAO1xPGDhI17cnLyPavcqNSoedOs1DQC8ArUEkeSJMD0KIoCmqaZz27LzQEJoXCjuYkm70b58gjkCgf3oF6vw+XlpQnmFqlUKv0yODj4rgVDQPhMM9K1czbegFzjIJCqqlCr4ZcPrpAMw4BKpQIHBwcfTkxMpABAszZKESJxC9Q48czlck/ZCZktK8o+i+OmJxHO1dUV5PP5r0ZHRz+1UlSxnrEfcQ8k+cVph8Ti4Puy2ezTsbGxry0YShENkPwm6Ozs7GNVVZ9R2bhNjn0gYnuSHadarf4zOzsb29nZKTFAdL6GRzM+gYrF4luRSOQPwzBkKp+enp5rzdeprFpNi4gUiUTMnoNlhQ9d1w9XV1fn4/H4v8xkbe8/fAKdn59/DgAfmYOIYZgNGI9MuJP2huxqhMaLQwpeHnr+YHD+a4HjeJbPy1FMwvKSJOkZ7RCVBpYZHs5xc/vAz9L7EblWq1FyWBwqK/bw3nRZlgcgcw2Hh4ev9/b2/m0YxvPIMEminuQGiMWh5CQSCSwrzzj4+U4DmX9/eXm5a2lp6RsAmMPBj31QublBcsKJx+PziUTCFw4XQMlkMrKwsPCtoihzuCCajr0i3QUOD0ByvV7/Tpbld1gQr0h3hdNxIE3THiqK8oMsy4DN2A/SXeJ0HEjX9fdlWf4SF+IH6a5xOg6UyWReHR4e/kuSpDf8IOEQSA+cc4I2ZKejZMePYkdHRw/6+/s3vSDRjITXg3BKrlar2fX19fmNjQ08WuE5ldO156ZrPW7Gho4D4SIRqa+v71dZlkduShJ7boWvNU3Lrq2tzVlzDuI4/cTjC6fjJWZ9g/glSZlM5sHQ0NAmIbFNG18jBs5CpVIJE2N+VNf1dDKZfLSysoLJwYmYnY7bTshu0sMLEK2jCclpJ4rF4vfb29upSqVyvri4mC4UCuzJJvszs/3GBbcm197X6RJjF8Mm6SdZlt+071GhUPhiYGDgM+Z3d7qGQ2mhC16efl5uJ8cTUCNJqVTqpfHx8bcNwxhWFOU1AHjl5OTkz5GRkZ8tHEwHpQUxCIbtNb7uB7Jj8QbUQGJuacHbWugWF1o/e0uLUyndCg5PPajVF2eWHbPR+27l5ig3TYnHBNG67Wtj/21PyK0lJgwl5uaLvbf38Jyge0MI01GMCxT77MHdonhakCixG74NASSAghWsSJBIkEhQMAGRoGB+ogeJBIkEBRMQCQrmJ3qQSJBIUDABkaBgfqIHiQSJBAUTEAkK5id6kEiQSFAwAZGgYH6iB4kEiQQFE7jh0/8DBSGJduFXqRkAAAAASUVORK5CYII="},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAYAAABV7bNHAAAGTUlEQVR4Xu2ZbWwURRjHn9nZu9u93jVCeSm91qMeCKUxiEWgCEH6gSiRl0gV30oqjVYgMbxEAyUpRlogTUj0Q6tJjViPBAzahKYmldTEJoICkcZcbCtSKQ1cKQXUK71t72XXzHKj203l0uztHZXZZrN7t3szO7/9P//nmSkCtt2TAGJ87k2AAYqjEAaIATJmIkxBTEFMQcYIMAUZ48c8iCmIKcgYAaYgY/yYBzEFMQUZI8AUZIwf8yCmIKYgYwSYgozxS7UHjdW/YmxIif11KgFp+6bnWjj3BahUASL96nfy6mUAIGAonJRDSgUgCoYDALLjGCwKKBoDRWElNmbG2VqqAFEwFgDgCajW1tZZRUVFXwFA95EjR9aWlZUN6dQ0zqEl5vZkA6LqIaohcGzkuGrVqrTm5ubmXcqveUXclOgaNPVTnue3jRFyiRn1OFpJBSCiHgqHALLdunWrptUpbXwj5EPpyAptwhJluqSUOByO4xpI4xhW4m5NFiDaDzkS9Vhj6hHb29tfcMyffXiF9AMXVBRAwMFjKB1OiQWB29f7F2dlZV1MZaiZDUifyqn3EEACAIihUOj7t6K/zDgrD/J+JQQW4CEbibDVkhMu5aY18Dy/RaeipGY2MwFpVUPAkM/kSEyZhpjQ3d29PTs7+0U/H80qkM7CTGSHn+yLwrIs/z4wMPBuZmZmi86LtGVA4mLpP1oyCxBtV5vKSWhRBWnDzFpZWel+fd/uUwul8yqgc8ITPRjjAgAgKZ+mfe150uokMwBp4RAQVDEqoMuXLxfn5OTs6e/v/8Llcn1E1EQBPSldgJlIhB9t86/wPL+YKMfj8aDOzs6jGOMpvb29W3Jzcy9o6iTy3k0NuUQD0sMhoUT8xlJUVORsbGx8/0Y6//KBkUuons+/WlNTsykcDuO8vDzXouK1ny2S2lUFnbHm+2trazdijJX8/Pzpc59eduLAyIByyJY5ogwFdzudzo9jyjI93MwARL2GwrHV19fPKykp+egkvv3ojpEObhKyQbNAIohsdx/hmhKCDVIXuDgBGoU5o6755TBsHL4Gj3CiUidMhzkKPuHz+coXLFjwV+xG01RkFiCtxwiRSOTcjkhn1ucRPyJpnOwcYPVIbImcg0K+x+qnu/eMvk6/swGGg0KGvI4TGjDGZRMV0KhMNTQ09GWLNbBke6gL3VEUsABWUzmBQQCRwUcVBH1KVL3mQgIg9e8upAgguB6rkTycTakVJiuzAFdijA9MVEC0WlYLwsLCwvSmpqb3ApPTXtkc6lTuyDJ3XiyIhMPhvtgA+T5embE02AVuJMJp++xIJBLxqwGIEN/HwYwVQT9azzuUKttDEkjDu9LS0upjZm2qUZsRYuSBtZNR6kW8z+dbN3te3sGjkRv2Esi4YrPZniVZrqKiwv3m/sqWp4K/gRsJ8J3V3Wu1WpeThqqqqqa9XbHndEtE4jdg8VJPT8+rHo/n54lq0tR1qVHTwpCEnDprP3bsmGf16tXbOjo6viksLDxD0/zmfXtPLQt2gxvZoE1w0zRPzFe+efNmud1un+T1eg+Vl5cTYyZLIWQ3VT3/ppDE16NjFYpUVRQaCT9rRkaGWFdXt3Bx8Xrv8mAPuMlkVXz4qtfrfaa0tPRqDIS2SEwaHDMBadvWL5CNMvBAINAgpQlLu+Ww5aVhP7iQFY6LWZCOkGwJDlc4HI4PdAtoptc+Wr0k2oPG0qJ+TkYA/TOblyTp63fgj/ymyBBS0z3JagoHh8UpI2vA8qHFYtn7f52s6mFRJVEFqbP5hoaGx58vee3EmuA1oUeWgUMY1mG7cliYdLGtrW3JypUrA6lco06Ggigo2hedn6mLZWTv6uraFJ2Vu79YGkAuZIGT9qnBP/v6lrtcLpKtUro2nUxA2gw3asmVLKINDg7WfWvDz83FFuwKDm91Op2fPKhLrto6iYYbt3PnTkd1dXU1AFwSRfFgsuqceAk82QrSZjdt2ifnZCPh9MD/20cPiZo3LfrU4jAZRWA89ZhdB8XrX79era+KTVvCiPdgya6D4j2PPszvCzD61BtvEA/s9VSY9ISCzQDFeV0MEANkLKKZgpiCmIKMEWAKMsaPeRBTEFOQMQJMQcb4MQ9iCmIKMkaAKcgYP+ZBTEFMQcYIMAUZ4/c3WgrZWBfNSVIAAAAASUVORK5CYII="},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAiBJREFUOBGtU0trGmEUdTQzim8aGO3UGlAqgkh8UEJpIVmEdNGS7rotgayzTwmUbJJF2x+Q7EpW2eaxTVpsNq2PiIiYYMAx1YpQsT5iOqPm3MAMieiuHwj33nPu+e65n8Noxpx4PP4C0IJOp9sJh8PnY2ijy4PBgMlkMl9lWa7k8/mjZDL5GYLsKPbEcBFkIZFILNvt9gFud/p8Pme73eYh9Bvcj8P8ewJontfr9Wsej2eK4zheITebzT+Iy5jiHcMwF9FoNKZgWiVIpVJzFovlvd/vf1osFi/S6fQZrFzVarXvlUrlGI0lnueXTCbTOi6aVvpuBUCcAGHN6/U+z2azP7rd7grytxDZFUXxSyQS+QDx00ajoYGlZ7D2CTxOEdHA88tqtXpSLpdjiF+rwFCAKd9gmhj9MMUiwYqFaavV+qher0vwdzDUp6ahUGgfHNlmsz3E1DN3BQQsz9Hv92WVPSKArX6v15MMBoMAAbMqAECE70sAbC6XmxzRe1sijDjg/tJqtUVVAMkB/JdcLtcUwI1xAp1OZ5M4xKUeVQDezrDhOP55XUEQgljWFrb8QBGiGMvdRnOAOOD+pB7CmTskTpKkPTyli2VZK56vcI1DOPajd7vdXuB/C4XCJfDFQCDwjzBVgBJ6W1hYNZvNs5jEYTQa3VTH6CLGrrZarW/YwabSTNg9ASrQwYf0GLe9wqs8oRx+z3HrYTAYLFH+X88NrKIQoAV8X6kAAAAASUVORK5CYII="},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAYAAABV7bNHAAAGqUlEQVR4Xu2ZC0wURxjHv93bx3E8DguovFSoLYIaiEUtD42BE8XWWmos2timIbTxnbQpsW1iYpSYPgzSl2mrMbaJRhrxTC0FxFK1gFqhhWKgAYpWTlMtJHcccLe3t7vNkBuyEqLR5ZZK5pJjE3Kzw/z4ff+Zb48C8rovAYrwuT8BAugBhhBABJC2ECEGEYOIQdoIEIO08SMZRAwiBmkjQAzSxo9kEDGIGKSNADFIGz+SQcQgYpA2AsQgbfxIBhGDJodBY5msaFva+Iye6BLD86uvGMzo6/is+CHvMpGA0NzDb7vdviwkJOQwRVFGr9f7WWlp6SdFRUVuAECQJhTURAHCcGgAMMiy3LhOuDLvhuyGPXySkktHdDmdzrfMZnM1AMgTCWkiAN0Dp76+/qm0tLRf5rpqQ28pHqDAABZDBBzgE2Wz07PRbDafBABplE0PWSiP/nG9AY3AqaioCLdYLB85WXilXLpNf+j5i+pTJKDBABTQsM4QCZ/S8Sd5nn8NALw+k5BN6KVbgOsJaAROV1fXnPj4+DMHvd2z9omdMKAoYAADoJ8IkAlYOBUwX5nZ694dGBho5jhuem9v796oqKhOlUm6QNIL0AicmpqaqKzs7LqtYkvMMdFGLaCnwC42Af6QB6BYvAE8MHDMOE9JdsgnRVG8cy3MuO1XeUjZyU7/+1JDQ0ZmZuZdVS75HZIegPAcBgBgRFE8cUDuXrNX7ISN7AyllEly3u6xlRtmTHt9h7uD2sTFKIv6qeqEhIQdbW1tu78xSxtKhLvUe1wkbKJDrSzLbvBlEsolv5ebXoDQPExXV1cqHx9Vlzx0nlpET4HvuYW93x49WlBYWNjR0tKyPi4ubpXdbm+yWCyfdnR0uIuLi6cXvbvzh/WCLaxV9sAFU5ziun5zyezZs6/6ckl9DHj0JL7PSL0AIXvYwcHBAx+zPW+WeLqpC8YMGLpybUtGRgbayrEJaMEoiPHWTjU1Na1ikpO+Wu2ywXb2CdgiGb8IDAwsAgBRtbv5BQ66qb8B4exhAICTJOnKMuFSkgAA9exiW3Bw8FK32412KFQuajAIFBqLy/LyCuGfaBNlACsX0cay7GIA8OhhkR6A0GGQBQBeluWemUM/B+cwU6FEmHHGbDZv9pmgtgEHLx7HORyOr99nhefrJRF+C4y00zQ90wcIjVMfJMfdJD0ADZcXABhlWb4VPXQhYI1hGnwgRJWHhoZuBQAkFLIBG4QXOTLObrcf3MPLa6tFAVqDprlomo4GANSK+L3M9ALEIUBer7fpWaFxVgRlhNOGxBae5y2+hY4GhMtreJwgCOde9TqT+xSAamPoDYZhngEA16QD1N/ff3gXf+fFMvFfqtWUKv9+7vzSnJycZp9BuJ3A2YgM4s6ePZuywJJ9MXOgj17LBSg7PcrpkJCQQhVY9bjHu8Ta2tpecjwdfXiNqx0K2EhlDx15NT8/f5XVah1QtRNokSh/mLy8vKCysrIf98nCwuMegToeEAKmzq7CpKSkU5OpxEZCOjw8PNBms/20We6ZUyU54XN+FqyGoLrGxsY30tPTu1U9FtXQ0BCfmpp6qBKkzCL3EOQwPOynmT9jYmKye3t7B33ZNSlCeviQiHYxlCeVlZVpaSuWf/eCq5Pvlr2wlZ0K27hwwSjJNV6vtwXpwzBMsmCgl3/pcfGHPALE0wycMAULDdXVL+fm5l7y2YPCHR0R/HpY9HdI35MnGFJzc/Pa2PlzS7YLt9k6yQ0hwMIyQxA8SXPDnfx1WYKLkhcGFRoyDRzsN5rEm62tb6ekpJSr4KBg92v+6HFQxHMMZwoKXR8kvqqqKiMrK2v/ecoTc1x0UpclEUT0qEOhgacYSKc5WM8FKEsUsNXW1r6zcuXKel9Z4WMBfgTi14ZVL4PQPBgSKjUEiktMTDRZrdb82NjY5/iAgNQ+RUYQIYyivYLL1djT01ORl5dX1t7ePuTb6ZA1uLTwAfGxB4QtGmkdfIDQ4RG9ERTabDYzBQUFYejDR44c6XM4HNgQVEYIDApk3F7o9oRRD4PUpYwswiYhMBgQOvOg3+O/BzetCAQCheCgq+5PFvUCpIaEyw1BGW5GfXDGAoTKCDezuKHV9VsOPQGNhoRBYatw5z/Wo4/ReePX3FEfx/UGhOfG86qvYwGa8C8RJwrQw/yTdLNlrEbu/wBo3BvM8bwhAfQAmgQQAaSt4IhBxCBikDYCxCBt/EgGEYOIQdoIEIO08SMZRAwiBmkjQAzSxo9kEDGIGKSNADFIGz+SQQ/g9x/iO2xn4TkwdgAAAABJRU5ErkJggg=="},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAYAAABV7bNHAAAE10lEQVR4Xu2YX2hbVRzHf+fcmzTNtixpaoMUuw6buhX6YlGmbZHK9lBEBPEPjg1BsShSfSijLRn64sOGYqfYqZQVO6kPRYQVnR1VhzPtJkNHFK3r2jGTSaxaa7L2Nn9u75ET7hnXWLqGQ29K+7twyCWcm5P7OZ/f95x7CeCxIgGCfFYmgIBuYQgCQkByIYIGoUFokBwBNEiOH2YQGoQGyRFAg+T4YQahQWiQHAE0SI4fZhAahAbJEUCD5PhhBq0zg1aaECY312tztZ0G8bHEeNZzAYZ/WiGtC2B2ARJAKACIJsYWYAwTkPjkShQdkp2AFAAQTTVB8fE5hKW8JiBtCkDCHg7HYTYnAHBIApAOAFkAyAAAP+fArCatTcCs4lftMEgAUlOp1OsOh+NxXdeva5r2ayKRiM7Ozl4NhUJfjIyMzAFA2gKJA+JNHEWxyQ5A/AZ57qiMsWv3pT673QUK1FAPq6EeaCS3GXUJxym/3/+yCYhD4jZxk/JLzXZItgLSdf3rvdnRPWPGHzkr3KDAcMnepR3XU+9VV1e/aTFIlFp+uW1YQHwi1Ewm0/8iu7j/A32KEqAQJNvhK9c+uDL+3aGmpqZh0xxuj8gjcS5CfEMDoul0+vAxcuXVo9kJUkm2wLShQR31wmlXk3557GJnT0/PN21tbbuHhoYi/f39XDNebqLkRHDbmkl2lVguqDVNe+J758JJA5i6i3rIQ6kLcDkHyQPDrnt0j0FvfAs3fPfCtr+Pv/X2wx0dHVcBIGUGN7fJ9uC2CxCfdTI6OuppaWl5J5PJ/JZMJidphe/9RxYvqZMsBbvIVthB3DBq/AOvOXbCg9H5I8Fg8LgFEM8la6nl77xXsWgX3sVWQOa+h4+Z2zDG4/En1YC/79HFn9VJlgHCKJQRJ5xy17KpM2efa21tPWvaI5Z/sbrZtk+yE1DOInMOc48bAwMDFU8dPBB5NnXN/+XSPBBQIEhc8LG72pgYO3+oubn5U3O55/aIxmFZV7fCtSjgCrsB/QdSIpHY94Obfr4/FQMfcUI5qDDNDLiLlMBH7oA+MXa+MxqNxhobG/eEQqETg4ODf1pKzrpPKuCWC+taDEACEolEIuW76+t/+jCbKH9A3cK8RGEHtL/olGFALS2Bk+7tegkD/RfDcAbi8WNVVVVvAMBi3sq2pkt/sQDdhDQzM7PT6/U+Njc3N8EYK3MEKvqe1ubVaQMgSFXwgAJ3UCXTmZ4/4/P5XjAB8ZVN5NGGBXQTkplNuccRHtzOQKDvGU1Xp5cI8A1lvULghJL+sbS0tHWzAfpfcMdisfvLKitPP6+BO8LXKgDwEIBzWyFJKa1dZvO4oQ2yJiYvd5rNZg9fIuorn2QYjRoAvCUZwLlthL179Ehtd3f378s8zBaWvAX0LmYG5f/N3G57fHzc29DQ0K4oSh0hpIZSeucCY+5SgPhL7e139/b2LiyzYSzglgvrup4A5WdSzigOLRwO+8Ph8EJXVxdfwayvZvk1m6bExNRaX+znf2d9wb/mcKwBWZh3xestXtHa9g/WW4nZduOrHQgB3YIUAkJAqy2m5fuhQWgQGiRHAA2S44cZhAahQXIE0CA5fphBaBAaJEcADZLjhxmEBqFBcgTQIDl+mEFoEBokRwANkuOHGYQGyRn0L5PKr1ggJXIfAAAAAElFTkSuQmCC"},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAYAAABV7bNHAAAExklEQVR4Xu2YUWhbVRjHv5Pc7CY3TdKkLmpcW1KtWMEpUhpLtVOGoFXowxwDu6GLiAoyXyzIhj70QQRLH/RFAp2yPok4p3QrnVUoobSb0hc3yrZoAi7TSLDGLM1tcnOPnJAD1+GaboeexPIFDvfCTci5v/v7/t85lwB+NiRAkM/GBBBQHUMQEAISCxE0CA1Cg8QIoEFi/DCD0CA0SIwAGiTGDzMIDUKDxAigQWL8MIPQIDRIjAAaJMYPM+h/atBGD46KOXFrv24mg/hc2NF6zu6IQ2FHPm7tTm/z280CiENhR1ttWEExKGZt8HMpJjUDID4HBsZeG4oFFAdSAQA2DAuoLYfULIDYPBgcBmYHADhq5wwag8DAlAGgVDsySFJKrZGArDnDQHA4qt/vd01PT+8NhULdHo+nU9O0TlVVO03TXBkcHBxeXFxkoFjJbVuDbswcZg+zhtnjTCQSr62H2949a16jCZqHhJkjP5t5OOd83kwuXwj39vamtzMgDoeHMTOHDQZIZZDi8fjQroFHPt6rz9p+pYVq/3GDAqvai2vhcLgtlUoxg7ZtifFOZQXDc4dBcsRisd2HXjl8Yn8prp0100DBhN3ED+fV5y7a7fZHLUF9m8178z+TmUHWzLGWlBqJRLxjY2N9c3NzV7u7u+84GH158iVj2XvauEr8RAEXIdBnbyufsD92RlGUF2qhveX5wzDKAmRt5TyQmS3OSCTim5+f/3pZ0XseJNq6SknpsHGh5YzxGwkQBb5x9tEWUMh5+qe+j979kcPhOCorf2QBuhmcaiDPzMw82fr0wNSwfhHuJ05oJw6YNbPgJ3Y45XyYdhZgwjCMRGtr6zPZbPbtYDD4i6z8kQnIGsi8WzFA6ujoaMexD96fHdavqJfMtWretBIbfOl6gHYUzAmv1/ueJXN4a5dSXrIAWeFUodTaeTWYY7HYQ4ei0U9fL13zzFX+rlbPvTYHfOW6z/zjUuKJnp6eH2uZw+BY92WbT1qBb8rIoH8tAgOBgLa0tPRqJpP5fWVlJXMwGp08Ul71fmvkiR8A/ITAFarDsR07IQqeo6qqflgDJB2ODIN4S+drHOfCwsJQMBI57iSE7gQovrV+3fWdUSQ+QmFKa6N3Ehv9opy37Xd4DCVfeNzn8/0gM3NulG2rDeJ7LA5ISyaTb86H2t+ZKhmky0YhXimDj5jwmdZC7ymsTaTT6ZNdXV17dF3/3ufzsfKSsqW4WRXKBORkXSubzY5/4g4c+LxE7Wwx7CUmTLoVGipctwYy25xKf/fzX5BkAWKrZhbOarFYPHmkog6cYwgA4C4bwKRGwJ1bfSMQCBxvZCA3ChB/z1PdRlQqlZ+G1siuvyhAOwHosAM8pYDxrM08rSjKvkaXVCMyiAd19WWYYRindJt9j5uAYZpmklKaqFQql3O5XEz2InAz3X+rS4x3Sg6J9Pf3K+Pj48GRkZFMKpXiAWxdAEpbBDYLICskPif+YKwv4xuyzqkHSYZB1jmw/2sqQ5oNUL35NN112QY1HYB6E0JAdQghIARUr4g2vo4GoUFokBgBNEiMH2YQGoQGiRFAg8T4YQahQWiQGAE0SIwfZhAahAaJEUCDxPhhBqFBaJAYATRIjB9mUB1+/wDYa21Yq6kFiQAAAABJRU5ErkJggg=="},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAYAAABV7bNHAAAEBUlEQVR4Xu2XS0hUURiA//t+DGpoEBj0sEVhYBYYutABM6h9WzFaGRQNZY+FUmjMJu1BEK3CFkFIOzcRiIseJhIT+KIsMG0ZJU46ztzx3vjzHjkzmjNyulPCP3A4wz3n3nPOd77/P/dKQL8NCUjEZ2MCBCiHIQSIAIklETKIDCKDxAiQQWL8KAeRQWSQGAEySIwf5SAyiAwSI0AGifGjHEQGkUFiBMggMX6Ug8ggMkiMABkkxo9y0H9mkOiGeGI+bP5u0QnnOyI/Dv+fLTjfefCACgIr34nlC2K9fmwMrGUAwBpL9gLXA5f9PLwnu4jMLee9QQNiMLBWfEBYsx9vEOuLbS4HkM2RgVn22/k+gdkUJCC2YLQGoah+YaDYghEIbxe7jgBYGwOKcNJ+4UFheyCQggLEnsvgaACg+wVB4fU/AWKLZYbwIYlQHABI+TXCwmv8s3KGzWY6BAmIWYFwDFb6+/vrGhsbz09NTfVXV1c/8ycrx2KxU1VVVW3pdPpHX19fW3Nz8xi2GYYhzczMdBiGUdbT09PZ1dX1FQCWfEgICiHx4baZ9efsGzQgtAUBmZZlWePj4xeK9pRH7jqfpQ5v36xpmidxhrW1tfbA61dvmxIftBqlCG4620aKi4tb0IxIJFLefrvnxZNU0jur6nPDQ0MX6+vrX/iQkly4BRJmBQEUjUZ3RiKRhzFjIdySHJFNT4dR+1jG7n1xl6BucRJ2SzYMhfZntM26y3B8IQ5HFdPttgxQvn+/39DQ0DkxMbG41QFhQtYcxxm5Ax8PdKbGZBdUkD0VZND8svJf8TSQsMb21TYtq68GZZIGt0zNPeQsPbBtu20rhxhagMlYdV333a30+MFOZwI8UED2GJxMSAhOyYCD7ZkwyyQduk0tfcRLP9B1/RKXf7bUKcaO59+JemBgYEc4HH40LP1oWgkxDUbtpjUhVrs4CXtlG97Ya0LMO74Ql2oUw+u2TG9bKtXd2tp6vbe3F0809jqw5QDxkKTKykolFotd+alBx13nk3dDPTCrKMoh7BSNRkORa1e/HktM6jVyMdzWyl+qqnoC2wYHB3cdDoff9zpJ/ZxmfJufmztTWlr6PGhz2O4FlaR5O/hPDSkej9eHQqH2ZDL51LKsx6xjIpE4bZpmFAC+zc/Pt5SUlMRW3w6Xl+9JkrR9enr6ckVFBR7z/OdGzqNapEMhAK23GfmM+6cPWXY9kJDKhpnPREU2YL17RccsCJhChtjfBlzQ54nuZkEn+y8GI0A5qBMgAiQWmGQQGUQGiREgg8T4UQ4ig8ggMQJkkBg/ykFkEBkkRoAMEuNHOYgMIoPECJBBYvwoB5FBZJAYATJIjB/lIDKIDBIjQAaJ8aMclIPfL43qI1gdS+mXAAAAAElFTkSuQmCC"},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAYAAABV7bNHAAAEaklEQVR4Xu2ab2gbZRzHf89dLneX5MSlfwadc5WOLKDrYNgR8CZO2DoQqe8URmEvxRb6woCrDjYdOBTTNwrCwD/QvZGCCr6I4r9VGoIOTQXp/LPpwlCWrK3WLN2a3R/53e7w5koLeyRP4X6B4w7a8OQ++fy+v+eeJwzotSYBRnzWJkCA1jGEABEgvhAhg8ggMoiPABnEx48yiAwig/gIkEF8/CiDyCAyiI8AGcTHjzKIDCKD+AiQQXz8RGfQauO7fLf0/75bJKDw2MF1GM6GACUKUDCuBAB4HQbkAEAARzgkEYDCcGQAQEh44Avh2P4Zr/ElFJIoQAgE4cT8Q56YmOgYGxv7EImUy+UDpmnWfFCRAhSUUwBHBQAlkUgoCwsLk6dZ/FHGwDksu5/19/c/Pjc3Z/kGCYPUboNwPLQHzUE4eGjVanV0fss9+cPLLa/U3k3EnQds65iqqid9i4SVWjsBBWOhPXEfjl4sFh/KDQ6efqLZjNfdm6J0MwneTyaseLO53zCMr0Ra1G5AOF4ASAMAvdFovPdmjD34iWXFL7k3G9hWSYbBmGLn4/oZSZIORBrQ7OzsoWw2+7Sqqr2ZRt1rWb8Y3eA4zvlWq/WKrutvRxGQgtkDAAn/rLiuO9fX+N0rsQvGFmCMJQHght/2kZuQoBZVYgEgHcsMQ9t13XP3NS56gH4zesOAsJNFJqRvyyA0KJfL3VUul7/ddvW8R6Ka2g6FQqErn88vRdEgbPHYxTx7KpXKoUz/zhevgK2Yyxc8QDOJPuhmsRZbaY3quv5W1DIomAN5gGzb/m7vtZ/TF91W6DGcQa+kQCmRnWeMbY40oJWVlc+fdf7oO+tchaqDkFy4l6mwR07B61rvj4yx+6MICEvM62KTk5O7h4aGnjcMY2Bz82sA14VaKgeWZc0sLS3lOzs7z0YNEE4UV23zXc0Zr8yuJE3sYikAQKXw6T4ybR7vHzMo3ObRJJwHnetofukBWkjuo3mQX2K6qqr6yMjI1kKh8MWm5qceoD+T+6FUKmVN0/w1agbdNg+q1Wovx7rufvJvsJRdy2cY1tL3+iOQYrLd4SqnZFkejVKJIaBbSmxxcfHUG6nawVdbP3lw8B9cBnBE2WG9ENvxgSRJT0UNUDiktfHx8W3HT7z00WM3SumSM88wj025yynGH56vX7480NPTcylKjxp4r7gohiEdrAlp09PT+7bvHXhnz7WPJVToG+2go/91fSidThdFL7u282EV4YSXXANIeI7V6/UjP6TtZxwAybQ2vaZp2lHRAR184NAUvy2XwbLrLYv2mUxGrlQqx2VZdoaHh5+bmprCOVB4C6gtH+6/g7TboPCXEmz3BFs/+DcEEt76EbbMEYASASgMKbApvHGIzWxD7ImJKrHVvhzael4jQDb0DxhElZiQwL2TQQnQOtQIEAG6k8L69z1kEBlEBvERIIP4+FEGkUFkEB8BMoiPH2UQGUQG8REgg/j4UQaRQWQQHwEyiI8fZdA6/P4BcUpLWD5TX0MAAAAASUVORK5CYII="},function(e,t,a){var n=a(5);Object.defineProperty(t,"__esModule",{value:!0}),t.pdf=void 0;var o,i,r,l,s,u,c,d,f,p,h,m,g=n(a(41)),_=n(a(46)),E=n(a(60)),v=n(a(7)),S=n(a(8)),y=n(a(61)),w=(n(a(62)),a(16)),A=a(25),I=n(a(19)),T=new(o=function(){function e(){var t=this;(0,v.default)(this,e),(0,E.default)(this,"pageWidth",i,this),(0,E.default)(this,"pageHeight",r,this),this.pageRatio=1,(0,E.default)(this,"curPage",l,this),(0,E.default)(this,"totalPage",s,this),this.wrapLeft=0,this.wrapTop=0,this.pages=[],this.pdfId=0,this.marginLeft=0,this.marginTop=0,this.pagingLock=!1,(0,E.default)(this,"initPages",u,this),(0,E.default)(this,"addVirtualPage",c,this),(0,E.default)(this,"saveHistory",d,this),this.goNext=function(){"forbidden"!==I.default.Tool.toolSelected&&t.canNext&&(t.curPage++,A.api.request("wbPageData",{textBookId:I.default.pdf.pdfId,page:t.curPage}).then(function(e){return console.log("\u7ffb\u9875\u6307\u4ee4\u53d1\u51fa\u6210\u529f",(0,w.toJS)(e))}).catch(function(){return console.log("\u7ffb\u9875\u6307\u4ee4\u53d1\u51fa\u5931\u8d25")}))},(0,E.default)(this,"nextPage",f,this),this.goPrev=function(){"forbidden"!==I.default.Tool.toolSelected&&t.canPrev&&(t.curPage--,A.api.request("wbPageData",{textBookId:I.default.pdf.pdfId,page:t.curPage}).then(function(e){return console.log("\u7ffb\u9875\u6307\u4ee4\u53d1\u51fa\u6210\u529f",(0,w.toJS)(e))}).catch(function(){return console.log("\u7ffb\u9875\u6307\u4ee4\u53d1\u51fa\u5931\u8d25")}))},(0,E.default)(this,"prevPage",p,this),(0,E.default)(this,"setView",h,this),(0,E.default)(this,"getPage",m,this)}return(0,S.default)(e,[{key:"canPrev",get:function(){return!this.pagingLock&&this.curPage>1}},{key:"canNext",get:function(){return!this.pagingLock&&this.curPage<this.totalPage}}]),e}(),i=(0,y.default)(o.prototype,"pageWidth",[w.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),r=(0,y.default)(o.prototype,"pageHeight",[w.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),l=(0,y.default)(o.prototype,"curPage",[w.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),s=(0,y.default)(o.prototype,"totalPage",[w.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),u=(0,y.default)(o.prototype,"initPages",[w.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t,a){e.pdfDoc=t,a&&(e.pdfId=a.id),e.pages=[];for(var n=1;n<=t.numPages;n++)e.pages.push({pageInPDF:n,history:[[]]});e.totalPage=e.pages.length,e.curPage=0}}}),c=(0,y.default)(o.prototype,"addVirtualPage",[w.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t,a){t||(t={history:[[]],pageInPDF:-1}),(0,_.default)(t,{pageInPDF:-1}),e.pages.splice(a?a-1:e.curPage,0,t),e.totalPage=e.pages.length}}}),d=(0,y.default)(o.prototype,"saveHistory",[w.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t,a){e.pages[a].history=t}}}),f=(0,y.default)(o.prototype,"nextPage",[w.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.goNext()}}}),p=(0,y.default)(o.prototype,"prevPage",[w.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.goPrev()}}}),h=(0,y.default)(o.prototype,"setView",[w.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t,a){e.pageHeight!==a&&(e.pageHeight=a),e.pageWidth!==t&&(e.pageWidth=t)}}}),m=(0,y.default)(o.prototype,"getPage",[w.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){console.log("get page",t);var n=t?t-1:e.curPage-1;return new Promise(function(t,o){(!e.pdfDoc||e.pages.length<=0||n>=e.totalPage||n<0)&&o(),console.log("listed ",e.pages[n]),e.pages[n].pageInPDF>0?e.pdfDoc.getPage(e.pages[n].pageInPDF).then(function(e){t(e)}):e.pdfDoc.getPage(1).then(function(e){var n=Object.create(e.__proto__);(0,_.default)(n,(0,g.default)({},e,{render:function(t){var n=t.canvasContext;t.viewport;return{promise:new Promise(function(t,o){try{var i=new Image;i.src=a(121),i.onload=function(){var a=n.createPattern(i,"repeat");n.fillStyle=a,n.fillRect(0,0,e.view[2]*I.default.pdf.pageRatio,e.view[3]*I.default.pdf.pageRatio),t()}}catch(r){console.error(r),o()}})}}})),console.log(n,e),t(n)})})}}}),o);t.pdf=T},function(e,t,a){var n=a(5);Object.defineProperty(t,"__esModule",{value:!0}),t.book=t.BookData=void 0;var o,i,r,l,s,u,c,d,f,p,h=n(a(60)),m=n(a(61)),g=(n(a(62)),n(a(7))),_=n(a(8)),E=a(16),v=function(){function e(){(0,g.default)(this,e),this.bookCache={}}return(0,_.default)(e,[{key:"getBook",value:function(e){var t=this;return new Promise(function(a,n){t.bookCache[e]&&a(t.bookCache[e])})}}]),e}();t.BookData=v;var S=new(o=function(){function e(){(0,g.default)(this,e),(0,h.default)(this,"curPage",i,this),(0,h.default)(this,"totalPage",r,this),(0,h.default)(this,"bookUrl",l,this),this.bookId=0,(0,h.default)(this,"scale",s,this),(0,h.default)(this,"width",u,this),(0,h.default)(this,"height",c,this),(0,h.default)(this,"vPages",d,this),(0,h.default)(this,"diffHistory",f,this),this.outlineNotes={},(0,h.default)(this,"exportImage",p,this),this.pageData=[]}return(0,_.default)(e,[{key:"canPrev",get:function(){return this.curPage>1}},{key:"canNext",get:function(){return this.curPage<this.totalPage}}]),e}(),i=(0,m.default)(o.prototype,"curPage",[E.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),r=(0,m.default)(o.prototype,"totalPage",[E.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),l=(0,m.default)(o.prototype,"bookUrl",[E.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),s=(0,m.default)(o.prototype,"scale",[E.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),u=(0,m.default)(o.prototype,"width",[E.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),c=(0,m.default)(o.prototype,"height",[E.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),(0,m.default)(o.prototype,"canPrev",[E.computed],Object.getOwnPropertyDescriptor(o.prototype,"canPrev"),o.prototype),(0,m.default)(o.prototype,"canNext",[E.computed],Object.getOwnPropertyDescriptor(o.prototype,"canNext"),o.prototype),d=(0,m.default)(o.prototype,"vPages",[E.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),f=(0,m.default)(o.prototype,"diffHistory",[E.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),p=(0,m.default)(o.prototype,"exportImage",[E.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),o);t.book=S},function(e,t,a){var n=a(5);Object.defineProperty(t,"__esModule",{value:!0}),t.answer=void 0;var o,i,r,l,s,u,c,d,f,p,h,m,g,_,E,v,S,y,w,A,I,T,b,C,N,x,k,O,D,P=n(a(60)),L=n(a(7)),M=n(a(8)),R=n(a(61)),B=(n(a(62)),a(16)),W=n(a(19)),z=new(o=function(){function e(){var t=this;(0,L.default)(this,e),(0,P.default)(this,"cid",i,this),(0,P.default)(this,"quizId",r,this),(0,P.default)(this,"tid",l,this),(0,P.default)(this,"totalUserNum",s,this),(0,P.default)(this,"teaStatus",u,this),(0,P.default)(this,"optionList",c,this),(0,P.default)(this,"awardCoins",d,this),(0,P.default)(this,"quizData",f,this),(0,P.default)(this,"isMultiQuiz",p,this),(0,P.default)(this,"completeStuNum",h,this),(0,P.default)(this,"correctStuNum",m,this),(0,P.default)(this,"answerList",g,this),(0,P.default)(this,"doneStuList",_,this),(0,P.default)(this,"undoneStuList",E,this),(0,P.default)(this,"timer",v,this),this.timerId=null,(0,P.default)(this,"like",S,this),this.likeAni=[],(0,P.default)(this,"stuShowCard",y,this),(0,P.default)(this,"stuFeedback",w,this),(0,P.default)(this,"stuQuizData",A,this),(0,P.default)(this,"stuSelectAnswer",I,this),(0,P.default)(this,"endAnswer",T,this),(0,P.default)(this,"prepareDetailData",b,this),(0,P.default)(this,"teaQuizStart",C,this),this.setAnswerStatistics=function(){t.isMultiQuiz||t.isMultiOption(t.quizData[0])||(t.answerList=t.quizData[0].optionList.map(function(e){return{id:e.id,option:e.id,count:0}}))},this.isMultiOption=function(e){return e.selectAnswer.length>1},this.isCorrect=function(e,t){return e&&e.join("")===t.join("")},this.startTimer=function(){t.timerId=setInterval(function(){t.timer+=1},1e3)},this.resetTimer=function(){clearInterval(t.timerId),t.timer=0},this.teaReStart=function(){t.resetTimer(),t.teaStatus="reStart"},(0,P.default)(this,"teaQuizEnd",N,this),(0,P.default)(this,"stuQuizStart",x,this),(0,P.default)(this,"stuQuizEnd",k,this),(0,P.default)(this,"stuSubmitAnswer",O,this),(0,P.default)(this,"reduceTotalUserNum",D,this)}return(0,M.default)(e,[{key:"changeEndAnswer",value:function(e){this.endAnswer=e}}]),e}(),i=(0,R.default)(o.prototype,"cid",[B.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),r=(0,R.default)(o.prototype,"quizId",[B.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),l=(0,R.default)(o.prototype,"tid",[B.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),s=(0,R.default)(o.prototype,"totalUserNum",[B.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),u=(0,R.default)(o.prototype,"teaStatus",[B.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"set"}}),c=(0,R.default)(o.prototype,"optionList",[B.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),d=(0,R.default)(o.prototype,"awardCoins",[B.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),f=(0,R.default)(o.prototype,"quizData",[B.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),p=(0,R.default)(o.prototype,"isMultiQuiz",[B.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),h=(0,R.default)(o.prototype,"completeStuNum",[B.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),m=(0,R.default)(o.prototype,"correctStuNum",[B.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),g=(0,R.default)(o.prototype,"answerList",[B.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),_=(0,R.default)(o.prototype,"doneStuList",[B.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),E=(0,R.default)(o.prototype,"undoneStuList",[B.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),v=(0,R.default)(o.prototype,"timer",[B.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),S=(0,R.default)(o.prototype,"like",[B.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),y=(0,R.default)(o.prototype,"stuShowCard",[B.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),w=(0,R.default)(o.prototype,"stuFeedback",[B.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),A=(0,R.default)(o.prototype,"stuQuizData",[B.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),I=(0,R.default)(o.prototype,"stuSelectAnswer",[B.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),T=(0,R.default)(o.prototype,"endAnswer",[B.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),(0,R.default)(o.prototype,"changeEndAnswer",[B.action],Object.getOwnPropertyDescriptor(o.prototype,"changeEndAnswer"),o.prototype),b=(0,R.default)(o.prototype,"prepareDetailData",[B.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.quizData=t,e.isMultiQuiz=!!(t.length>1),e.setAnswerStatistics()}}}),C=(0,R.default)(o.prototype,"teaQuizStart",[B.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.tid=W.default.Tool.userId,console.log("\u53d1\u7b54\u9898\u5361\u7684\u8001\u5e08id:"+e.tid),e.quizId=t.quizId,e.totalUserNum=t.userNum,e.startTimer(),e.teaStatus="end"}}}),N=(0,R.default)(o.prototype,"teaQuizEnd",[B.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.completeStuNum=0,e.correctStuNum=0,e.answerList=[],e.doneStuList=[],e.undoneStuList=[],e.like=[],e.likeAni=[],e.teaStatus="set"}}}),x=(0,R.default)(o.prototype,"stuQuizStart",[B.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.tid=t.uid,3===W.default.Tool.role&&(e.quizId=t.quizId,e.stuQuizData=t.quizList||[],t.quizList&&t.quizList.length&&(e.stuFeedback=!1,e.stuShowCard=!0))}}}),k=(0,R.default)(o.prototype,"stuQuizEnd",[B.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){t&&t.length>0?t.map(function(t){t.usrId===e.tid&&(e.stuShowCard=!1)}):e.stuShowCard=!1}}}),O=(0,R.default)(o.prototype,"stuSubmitAnswer",[B.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.stuSelectAnswer=t,setTimeout(function(){e.stuShowCard=!1,e.stuFeedback=!0},350),1===t.length&&setTimeout(function(){e.stuFeedback=!1},5350)}}}),D=(0,R.default)(o.prototype,"reduceTotalUserNum",[B.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){console.log("\u53d1\u7b54\u9898\u5361\u7684\u8001\u5e08id\uff1a"+e.tid+", \u6211\u81ea\u5df1\u7684id\uff1a"+W.default.Tool.userId),W.default.Tool.userId===e.tid&&(e.totalUserNum=e.totalUserNum>=1?e.totalUserNum-1:0)}}}),o);t.answer=z},function(e,t,a){var n=a(5);Object.defineProperty(t,"__esModule",{value:!0}),t.home=void 0;var o,i,r,l,s,u,c,d,f,p,h,m=n(a(60)),g=n(a(7)),_=n(a(61)),E=(n(a(62)),a(16)),v=new(o=function e(){(0,g.default)(this,e),(0,m.default)(this,"fps",i,this),(0,m.default)(this,"wrapperMarginTop",r,this),(0,m.default)(this,"bodyClientHeight",l,this),(0,m.default)(this,"ctrWidth",s,this),(0,m.default)(this,"ctrHeight",u,this),(0,m.default)(this,"tool",c,this),this.isMac=/Mac OS X/gi.test(navigator.userAgent),this.bgImgMargin={k12:{hori:330,vert:60},win:{hori:{min:324,max:410},vert:60},mac:{hori:408,vert:64}},(0,m.default)(this,"init",d,this),(0,m.default)(this,"resizeBgImage",f,this),(0,m.default)(this,"rightPanelWidthNotify",p,this),(0,m.default)(this,"setTool",h,this)},i=(0,_.default)(o.prototype,"fps",[E.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),r=(0,_.default)(o.prototype,"wrapperMarginTop",[E.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),l=(0,_.default)(o.prototype,"bodyClientHeight",[E.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),s=(0,_.default)(o.prototype,"ctrWidth",[E.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),u=(0,_.default)(o.prototype,"ctrHeight",[E.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),c=(0,_.default)(o.prototype,"tool",[E.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),d=(0,_.default)(o.prototype,"init",[E.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.isMac&&(document.getElementsByTagName("body")[0].style.backgroundPositionY="-"+(e.bgImgMargin.mac.vert-10)+"px"),e.resizeBgImage()}}}),f=(0,_.default)(o.prototype,"resizeBgImage",[E.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var a=document.getElementsByTagName("body")[0],n=e.isMac?"mac":"win";e.isMac?a.style.backgroundSize=a.clientWidth+e.bgImgMargin[n].hori+"px "+(a.clientHeight+e.bgImgMargin[n].vert)+"px":a.clientHeight>e.bodyClientHeight?a.style.backgroundSize=a.clientWidth+e.bgImgMargin[n].hori.max+"px "+(a.clientHeight+e.bgImgMargin[n].vert)+"px":a.style.backgroundSize=a.clientWidth+e.bgImgMargin[n].hori.min+"px "+(a.clientHeight+e.bgImgMargin[n].vert)+"px",e.bodyClientHeight=a.clientHeight}}}),p=(0,_.default)(o.prototype,"rightPanelWidthNotify",[E.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var a=t&&t.width||0,n=document.getElementsByTagName("body")[0];e.isMac&&a&&(n.style.backgroundSize=n.clientWidth+a+10+"px "+(n.clientHeight+e.bgImgMargin.mac.vert)+"px",e.bgImgMargin.mac.hori=a+10)}}}),h=(0,_.default)(o.prototype,"setTool",[E.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.tool=t}}}),o);t.home=v},function(e,t,a){var n=a(5);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,i,r,l,s=n(a(60)),u=n(a(7)),c=n(a(8)),d=n(a(61)),f=(n(a(62)),a(16)),p=new(o=function(){function e(){(0,u.default)(this,e),(0,s.default)(this,"currentState",i,this),(0,s.default)(this,"toastContent",r,this),(0,s.default)(this,"micList",l,this),this.currentState="off",this.micList=[],this.toastContent=null}return(0,c.default)(e,[{key:"changeState",value:function(e){this.currentState=e}},{key:"setList",value:function(e){this.micList=e}},{key:"setToastContent",value:function(e){this.toastContent=e}}]),e}(),i=(0,d.default)(o.prototype,"currentState",[f.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),r=(0,d.default)(o.prototype,"toastContent",[f.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),l=(0,d.default)(o.prototype,"micList",[f.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),(0,d.default)(o.prototype,"changeState",[f.action],Object.getOwnPropertyDescriptor(o.prototype,"changeState"),o.prototype),(0,d.default)(o.prototype,"setList",[f.action],Object.getOwnPropertyDescriptor(o.prototype,"setList"),o.prototype),(0,d.default)(o.prototype,"setToastContent",[f.action],Object.getOwnPropertyDescriptor(o.prototype,"setToastContent"),o.prototype),o);t.default=p},function(e,t,a){var n=a(5);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,i,r,l,s=n(a(60)),u=n(a(7)),c=n(a(8)),d=n(a(61)),f=(n(a(62)),a(16)),p=new(o=function(){function e(){(0,u.default)(this,e),(0,s.default)(this,"currentState",i,this),(0,s.default)(this,"micList",r,this),(0,s.default)(this,"toastContent",l,this),this.currentState="off",this.micList=[],this.toastContent=null}return(0,c.default)(e,[{key:"changeState",value:function(e){this.currentState=e}},{key:"setMicList",value:function(e){this.micList=e}},{key:"setToastContent",value:function(e){this.toastContent=e}}]),e}(),i=(0,d.default)(o.prototype,"currentState",[f.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),r=(0,d.default)(o.prototype,"micList",[f.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),l=(0,d.default)(o.prototype,"toastContent",[f.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),(0,d.default)(o.prototype,"changeState",[f.action],Object.getOwnPropertyDescriptor(o.prototype,"changeState"),o.prototype),(0,d.default)(o.prototype,"setMicList",[f.action],Object.getOwnPropertyDescriptor(o.prototype,"setMicList"),o.prototype),(0,d.default)(o.prototype,"setToastContent",[f.action],Object.getOwnPropertyDescriptor(o.prototype,"setToastContent"),o.prototype),o);t.default=p},function(e,t,a){var n=a(5);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,i,r=n(a(60)),l=n(a(7)),s=n(a(8)),u=n(a(61)),c=(n(a(62)),a(16)),d=new(o=function(){function e(){(0,l.default)(this,e),(0,r.default)(this,"list",i,this)}return(0,s.default)(e,[{key:"setList",value:function(e){this.list=e}}]),e}(),i=(0,u.default)(o.prototype,"list",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),(0,u.default)(o.prototype,"setList",[c.action],Object.getOwnPropertyDescriptor(o.prototype,"setList"),o.prototype),o);t.default=d},function(e,t,a){var n=a(5);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,i,r=n(a(60)),l=n(a(7)),s=n(a(8)),u=n(a(61)),c=(n(a(62)),a(16)),d=new(o=function(){function e(){(0,l.default)(this,e),(0,r.default)(this,"type",i,this)}return(0,s.default)(e,[{key:"setType",value:function(e){this.type=e}}]),e}(),i=(0,u.default)(o.prototype,"type",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),(0,u.default)(o.prototype,"setType",[c.action],Object.getOwnPropertyDescriptor(o.prototype,"setType"),o.prototype),o);t.default=d},function(e,t,a){var n=a(5);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(a(41)),i=n(a(7)),r=n(a(8)),l=n(a(12)),s=n(a(13)),u=n(a(14)),c=n(a(0)),d=a(30),f=n(a(187)),p=n(a(633)),h=n(a(52)),m=a(25),g=n(a(19)),_=a(16),E=n(a(189)),v=n(a(28)),S=a(635);a(636);var y,w=a(637),A=n(a(98)),I=a(93),T=n(a(639)),b=(0,d.inject)("store")(y=(0,d.observer)(y=function(e){function t(e){var a;return(0,i.default)(this,t),(a=(0,l.default)(this,(0,s.default)(t).call(this,e))).scrollWrapperRef=c.default.createRef(),a.scrollFixedTabRef=c.default.createRef(),a.scrollListTitleRef=c.default.createRef(),a.audioRef=c.default.createRef(),a.pageRef=c.default.createRef(),a.userListEl=c.default.createRef(),a.ansTimerId=null,a.unAnsTimerId=null,a.timer=3e3,a.reqAnsweredUsers=function(){a.ansTimerId=setInterval(function(){m.api.request("quizStatistic").then(function(e){a.setState({asData:e.param}),a.updateAnsUser(e.param),1===a.state.filterAnswerType&&a.filterStuList(a.state.filterAnswerType)})},a.timer)},a.reqUnAnsweredUsers=function(){a.unAnsTimerId=setInterval(function(){m.api.request("multiQuizUnSubmitUsers",{quizId:g.default.answer.quizId}).then(function(e){console.log("\u8001\u5e08\u8bf7\u6c42\u672a\u7b54\u7684\u5b66\u751f\u5217\u8868",(0,_.toJS)(e)),g.default.answer.undoneStuList=e.param||[],2===a.state.filterAnswerType&&a.filterStuList(a.state.filterAnswerType)})},a.timer)},a.updateAnsUser=function(e){g.default.Tool.userId===g.default.answer.tid&&"reStart"!==g.default.answer.teaStatus&&(e.stus=e.stus||[],g.default.answer.cid=e.stus.length?e.stus[0].cid:0,g.default.answer.completeStuNum=(e.stus||[]).filter(function(e){return e.answer}).length,g.default.answer.isMultiQuiz?a.setState({percentage:Math.round(g.default.answer.completeStuNum/g.default.answer.totalUserNum*100)||0}):(g.default.answer.correctStuNum=e.stus.filter(function(e){return a.getSingleAns(e.answer)===g.default.answer.quizData[0].selectAnswer.join("")}).length,a.updateStatBar(e.stus)),g.default.answer.doneStuList=e.stus.filter(function(e){return e.answer}).map(function(e){return g.default.answer.isMultiQuiz?(0,o.default)({},e,{corrCount:e.answer.filter(function(e,t){return e.answer===g.default.answer.quizData[t].selectAnswer.join("")}).length,doneCount:e.answer.filter(function(e){return e.answer}).length}):(0,o.default)({},e,{isCorrect:e.answer[0].answer===g.default.answer.quizData[0].selectAnswer.join("")})}))},a.updateStatBar=function(e){if(g.default.answer.isMultiOption(g.default.answer.quizData[0])){var t=[];e.forEach(function(e){var n=a.getSingleAns(e.answer),o=t.findIndex(function(e){return e.option===n});-1===o?t.push({id:n,option:n,count:1}):t[o].count++}),g.default.answer.answerList=t}else g.default.answer.answerList.forEach(function(t){t.count=e.filter(function(e){return a.getSingleAns(e.answer)===t.id}).length})},a.getSingleAns=function(e){return(e||[]).map(function(e){return e.answer}).join("")},a.getCorrRate=function(){return g.default.answer.completeStuNum?Math.round(g.default.answer.correctStuNum/g.default.answer.completeStuNum*100):0},a.getComplateRate=function(e){return g.default.answer.completeStuNum?e/g.default.answer.completeStuNum*100+"%":0},a.getOptionLabelMaxWid=function(){return 8*g.default.answer.answerList.sort(function(e,t){return t.option.length-e.option.length})[0].option.length},a.filterStuList=function(e){a.setState({filterAnswerType:e,filterStuList:1===e?g.default.answer.doneStuList:g.default.answer.undoneStuList})},a.formatterTimer=function(e){return e<10?"0"+e:e},a.isCorr=function(e){return g.default.answer.isMultiQuiz?!!e.corrCount:e.isCorrect},a.like=function(e){g.default.answer.like.push(e.uId),m.api.request("quizLike",{uId:e.uId,quizId:g.default.answer.quizId}),(0,A.default)(30,{target_id:e.uId,source_type:1})},a.listener=function(e,t){e.persist(),console.log("\u70b9\u8d5e\u52a8\u753b",e),e.currentTarget==e.target&&"animationend"===e.type&&e.animationName&&e.animationName.includes("keyframes-like-ani")&&g.default.answer.likeAni.push(t.uId)},a.endAnswer=function(){m.api.request("multiQuizEndAnswer",{cid:g.default.answer.cid,quizId:g.default.answer.quizId}).then(function(e){console.log("\u8001\u5e08\u6210\u529f\u7ed3\u675f\u7b54\u9898",e),g.default.answer.teaReStart(),g.default.answer.changeEndAnswer(!0)})},a.reStart=function(){a.setState({percentage:0,filterStuList:[],filterAnswerType:1,asShow:!1}),g.default.answer.teaQuizEnd(),g.default.answer.changeEndAnswer(!1)},a.asShow=function(){a.setState({asShow:!0}),(0,A.default)(24,{time_node:a.props.store.answer.endAnswer?2:1})},a.onScroll=h.default.throttle(function(e){if("set"!==g.default.answer.teaStatus&&g.default.answer.quizData.length&&e.userListEl&&e.userListEl.current&&e.scrollFixedTabRef&&e.scrollFixedTabRef.current&&e.scrollWrapperRef&&e.scrollWrapperRef.current){var t=e.scrollWrapperRef.current.getBoundingClientRect().top,a=e.userListEl.current.getBoundingClientRect().top<t;console.log("willFix",a),a?(e.scrollFixedTabRef.current.style.position="fixed",e.scrollFixedTabRef.current.style.top=t+"px"):(e.scrollFixedTabRef.current.style.position="relative",e.scrollFixedTabRef.current.style.top="0px")}},100),a.state={filterStuList:[],filterAnswerType:1,labelMaxWid:0,percentage:0,asData:{},asShow:!1,showMicButton:!0},a}return(0,u.default)(t,e),(0,r.default)(t,[{key:"componentDidMount",value:function(){var e=this;(0,_.reaction)(function(){return(0,_.toJS)(g.default.answer.answerList)},function(t){t.length&&e.setState({labelMaxWid:e.getOptionLabelMaxWid()})}),(0,_.reaction)(function(){return g.default.answer.teaStatus},function(t){"end"===t?(e.reqAnsweredUsers(),e.reqUnAnsweredUsers()):(clearInterval(e.ansTimerId),clearInterval(e.unAnsTimerId))}),(0,_.reaction)(function(){return e.props.store.ClassType.type},function(t){4===t&&e.setState({showMicButton:!1})}),I.siderState.observe(function(t){"close"===t.newValue&&e.scrollFixedTabRef&&e.scrollFixedTabRef.current&&(e.scrollFixedTabRef.current.style.position="relative",e.scrollFixedTabRef.current.style.top="0px")}),window.addEventListener("resize",this.onScroll,!1),4===this.props.store.ClassType.type&&this.setState({showMicButton:!1})}},{key:"componentWillUnmount",value:function(){this.setState=function(){},g.default.answer.resetTimer(),clearInterval(this.ansTimerId),clearInterval(this.unAnsTimerId)}},{key:"render",value:function(){var e=this,t=this.state,a=t.filterStuList,n=t.filterAnswerType,i=t.labelMaxWid,r=t.percentage,l=v.default.getInitOptions().currentLocale;return!!g.default.answer.quizData.length&&c.default.createElement("div",{ref:this.pageRef,className:p.default.answerEndContainer,style:(0,o.default)({},this.props.style)},c.default.createElement("div",{className:p.default.scrollWrapper,ref:this.scrollWrapperRef,onScroll:function(){return e.onScroll(e)}},c.default.createElement("div",{className:p.default.scrollInner},!g.default.answer.isMultiQuiz&&c.default.createElement("div",{className:p.default.correctAnswer},c.default.createElement("div",{className:g.default.answer.quizData[0].selectAnswer.length>1?p.default.answer+" "+p.default.multi:p.default.answer+" "+p.default.single},c.default.createElement("span",null,g.default.answer.quizData[0].selectAnswer)),c.default.createElement("label",null,v.default.get("SIDE_TOOLS_ANSWER_CORRECT_ANSWER"))),!g.default.answer.isMultiQuiz&&c.default.createElement("div",{className:p.default.statistics},c.default.createElement("div",{className:p.default.numBox},c.default.createElement("div",{className:p.default.cell+" "+p.default.complete},c.default.createElement("div",{className:p.default.cellValue},c.default.createElement("span",{className:p.default.completeNum+" "+p.default.yellow},g.default.answer.completeStuNum),c.default.createElement("span",{className:p.default.totalNum},"/",g.default.answer.totalUserNum)),c.default.createElement("div",{className:p.default.cellLabel},v.default.get("SIDE_TOOLS_ANSWER_COMPLETE"))),c.default.createElement("div",{className:p.default.cell+" "+p.default.correct},c.default.createElement("div",{className:p.default.cellValue+" "+p.default.yellow},this.getCorrRate()+"%"),c.default.createElement("div",{className:p.default.cellLabel},v.default.get("SIDE_TOOLS_ANSWER_CORRECT_RATIO")))),c.default.createElement("div",{className:p.default.chartBox},g.default.answer.answerList.map(function(t){return c.default.createElement("div",{className:t.id===g.default.answer.quizData[0].selectAnswer.join("")?p.default.chartItem+" "+p.default.correct:""+p.default.chartItem,key:t.id},c.default.createElement("span",{className:p.default.option,style:{minWidth:i+"px"}},t.id),c.default.createElement("div",{className:p.default.progress,style:{width:"calc(100% - "+i+"px - 46px)"}},c.default.createElement("div",{className:p.default.progressInner,style:{width:""+e.getComplateRate(t.count)}})),c.default.createElement("span",{className:p.default.userCount},t.count))}))),g.default.answer.isMultiQuiz&&c.default.createElement("div",{className:p.default.multiStatis},c.default.createElement("div",{className:p.default.ring},c.default.createElement("svg",{style:{height:0,width:0}},c.default.createElement("defs",null,c.default.createElement("linearGradient",{id:"Gradient1",gradientTransform:"rotate(90)"},c.default.createElement("stop",{offset:"10%",stopColor:"#dfd994"}),c.default.createElement("stop",{offset:"85%",stopColor:"#ff7178"})),c.default.createElement("linearGradient",{id:"Gradient2",gradientTransform:"rotate(90)"},c.default.createElement("stop",{offset:"10%",stopColor:"#dfd994"}),c.default.createElement("stop",{offset:"85%",stopColor:"#14ffd3"})),c.default.createElement("pattern",{id:"Pattern",x:"0",y:"0",width:"110",height:"110",patternUnits:"userSpaceOnUse"},c.default.createElement("g",{transform:"rotate(112.5, 55, 55)"},c.default.createElement("rect",{shapeRendering:"crispEdges",x:"0",y:"0",width:"55",height:"110",fill:"url(#Gradient1)"}),c.default.createElement("rect",{shapeRendering:"crispEdges",x:"55",y:"0",width:"55",height:"110",fill:"url(#Gradient2)"}))))),c.default.createElement(S.CircularProgressbar,{value:r,circleRatio:.75,strokeWidth:6,text:r+"%",styles:{path:{stroke:"url(#Pattern)",strokeLinecap:"round",transition:"stroke-dashoffset 0.5s ease 0s",transform:"rotate(0.625turn)",transformOrigin:"center center"},trail:{stroke:"rgba(255,255,255,.2)",transform:"rotate(0.625turn)",transformOrigin:"center center"},text:{fill:"rgba(255,255,255,.7)",fontSize:"24px"}}}),c.default.createElement("span",null,v.default.get("SIDE_TOOLS_ANSWER_COMPLETION_RATE"))),c.default.createElement("div",{className:p.default.infoBox},c.default.createElement("div",{className:p.default.joinNum},v.default.get("SIDE_TOOLS_ANSWER_JOIN_NUMBER")),c.default.createElement("div",{className:p.default.cellValue},c.default.createElement("span",{className:p.default.completeNum+" "+p.default.yellow},g.default.answer.completeStuNum),c.default.createElement("span",{className:p.default.totalNum},"/",g.default.answer.totalUserNum)))),c.default.createElement("div",{className:p.default.userList,ref:this.userListEl},c.default.createElement("div",{className:p.default.listTab,ref:this.scrollFixedTabRef},c.default.createElement("div",{className:p.default.tabItem+" "+(1===n?""+p.default.selected:""),onClick:function(){return e.filterStuList(1)}},v.default.get("SIDE_TOOLS_ANSWER_ANSWERED")),c.default.createElement("div",{style:{fontSize:"zh-CN"===l?"14px":"12px"},className:p.default.tabItem+" "+(2===n?""+p.default.selected:""),onClick:function(){return e.filterStuList(2)}},v.default.get("SIDE_TOOLS_ANSWER_UNANSWERED"))),a.length?c.default.createElement("div",null,c.default.createElement("div",{className:p.default.listItem+" "+p.default.listTitle,ref:this.scrollListTitleRef},c.default.createElement("span",{className:p.default.listItemLabel},v.default.get("SIDE_TOOLS_ANSWER_NAME")),c.default.createElement("span",{className:p.default.listItemLabel},v.default.get("SIDE_TOOLS_ANSWER_SETTING"))),c.default.createElement("ul",null,a.map(function(t){return c.default.createElement("li",{key:t.uId,className:p.default.listItem+"\n                              "+(e.isCorr(t)?""+p.default.correct:""+p.default.error)+"\n                              "+(g.default.answer.isMultiQuiz?""+p.default.multi:"")},c.default.createElement("div",{className:p.default.userInfo},c.default.createElement("div",{className:p.default.userName,title:t.userName},t.userName),t.tags&&JSON.parse(t.tags).tagList&&c.default.createElement("div",{className:p.default.label},JSON.parse(t.tags).tagList.map(function(e){return c.default.createElement("img",{src:e.tagIcon,title:e.tagName,key:e.id})}))),1===n&&c.default.createElement("div",{className:p.default.answerInfo},g.default.answer.isMultiQuiz?c.default.createElement("div",{className:p.default.answer},c.default.createElement("span",null,t.corrCount,"/",t.doneCount),c.default.createElement("i",{className:t.corrCount?""+p.default.corr:""+p.default.wrong})):c.default.createElement("div",{className:p.default.answer},t.answer[0].answer),c.default.createElement("div",{className:p.default.time},t.answer_time<=60?t.answer_time+'"':Math.floor(t.answer_time/60)+"'"+(t.answer_time%60===0?"00":t.answer_time%60)+'"')),c.default.createElement("div",{className:p.default.likeWrap},1===n&&c.default.createElement(c.default.Fragment,null,!g.default.answer.like.includes(t.uId)&&c.default.createElement("a",{className:p.default.like,onClick:function(){(t.isCorrect||t.corrCount)&&e.like(t)}}),g.default.answer.like.includes(t.uId)&&!g.default.answer.likeAni.includes(t.uId)&&c.default.createElement("div",{className:p.default.likeAnimationWrap},c.default.createElement("div",{onAnimationEnd:function(a){return e.listener(a,t)},className:p.default.likeAnimation})),g.default.answer.like.includes(t.uId)&&c.default.createElement("a",{className:p.default.liked}),e.state.showMicButton&&c.default.createElement("div",{className:p.default.connect},c.default.createElement(E.default,{from:"answerEnd",item:t}))),2===n&&!g.default.answer.endAnswer&&c.default.createElement(T.default,{delay:4e3,uId:t.uId}),2===n&&g.default.answer.endAnswer&&e.state.showMicButton&&c.default.createElement("div",{className:p.default.connect},c.default.createElement(E.default,{from:"answerEnd",item:t}))))}))):c.default.createElement("div",{className:p.default.empty}),a.length>200&&c.default.createElement("div",{className:p.default.maxCount},c.default.createElement("span",null,v.default.get("SIDE_TOOLS_ANSWER_MAX_COUNT",{count:200})))))),c.default.createElement("div",{className:f.default.optionCardBtnContainer+" "+f.default.fixed},g.default.answer.doneStuList.length>0&&c.default.createElement("a",{className:f.default.statisBtn,onClick:this.asShow},v.default.get("SIDE_TOOLS_ANSWER_STATISTICS")," ",c.default.createElement("i",null,"\xbb")),"end"===g.default.answer.teaStatus&&c.default.createElement("div",{className:f.default.optionCardBtn+" "+p.default.bottomBtn,onClick:this.endAnswer},c.default.createElement("span",null,v.default.get("SIDE_TOOLS_ANSWER_FINISH")),c.default.createElement("span",null,"\uff08",this.formatterTimer(Math.floor(g.default.answer.timer/60)),":",this.formatterTimer(g.default.answer.timer%60),"\uff09")),"reStart"===g.default.answer.teaStatus&&c.default.createElement("div",{className:f.default.optionCardBtn+" "+p.default.bottomBtn,onClick:this.reStart},v.default.get("SIDE_TOOLS_ANSWER_RESTART"))),this.state.asShow&&c.default.createElement(w.AnswerStat,{asData:this.state.asData,onClose:function(){return e.setState({asShow:!1})}}))}}]),t}(c.default.Component))||y)||y;t.default=b},function(e,t,a){e.exports={answerEndContainer:"answerEnd_answerEndContainer__3okU_",scrollWrapper:"answerEnd_scrollWrapper__3uHgx",scrollInner:"answerEnd_scrollInner__24NvL",correctAnswer:"answerEnd_correctAnswer__1Kunb",answer:"answerEnd_answer__3NECr",single:"answerEnd_single__1iZ_B",multi:"answerEnd_multi__uceGl",statistics:"answerEnd_statistics__3XxuR",numBox:"answerEnd_numBox__3zknT",cell:"answerEnd_cell__1OFSI",chartBox:"answerEnd_chartBox__2MJwv",chartItem:"answerEnd_chartItem__2oluF",option:"answerEnd_option__1mG3_",progress:"answerEnd_progress__3XjRD",progressInner:"answerEnd_progressInner__2YJDx",userCount:"answerEnd_userCount__1WAhy",correct:"answerEnd_correct__2dPcS",multiStatis:"answerEnd_multiStatis__2vg0e",ring:"answerEnd_ring__3G4Nw",infoBox:"answerEnd_infoBox__2j2lo",joinNum:"answerEnd_joinNum__D_Zt7",cellValue:"answerEnd_cellValue__30hV5",cellLabel:"answerEnd_cellLabel__CTRpa",yellow:"answerEnd_yellow__TslO-",totalNum:"answerEnd_totalNum__32dqo",userList:"answerEnd_userList__2V0OA",listTab:"answerEnd_listTab__3Cdz3",tabItem:"answerEnd_tabItem__3AWPo",selected:"answerEnd_selected__3UtJD",listItem:"answerEnd_listItem__1hRjt",listItemLabel:"answerEnd_listItemLabel__1jQFw",userInfo:"answerEnd_userInfo__s3HdR",userName:"answerEnd_userName__3WJxm",answerInfo:"answerEnd_answerInfo__2z2aG",label:"answerEnd_label__3aRvR",likeWrap:"answerEnd_likeWrap__3PP7F",like:"answerEnd_like__37hBC",connect:"answerEnd_connect__3XXqj",remind:"answerEnd_remind__3oVSm",liked:"answerEnd_liked__355f_",likeAnimationWrap:"answerEnd_likeAnimationWrap__3yqVy",likeAnimation:"answerEnd_likeAnimation__2Mfri","keyframes-like-ani":"answerEnd_keyframes-like-ani__3ph3G",error:"answerEnd_error__DhJSt",corr:"answerEnd_corr__24TT7",wrong:"answerEnd_wrong__2lOZg",listTitle:"answerEnd_listTitle__32H5D",maxCount:"answerEnd_maxCount__3FhpT",bottomBtn:"answerEnd_bottomBtn__1bwio",empty:"answerEnd_empty__1M80I","keyframes-like-btn":"answerEnd_keyframes-like-btn__2nzGj","keyframes-like-btn-bli":"answerEnd_keyframes-like-btn-bli__3uNtT","keyframes-like-btn-gen":"answerEnd_keyframes-like-btn-gen__ARHYx"}},function(e,t,a){e.exports={lightConnecting:"micButton_lightConnecting__1d7Fg","keyframes-pic":"micButton_keyframes-pic__goa7Q",lightConnecTalk:"micButton_lightConnecTalk__yXgSf",lightDownTalk:"micButton_lightDownTalk__1dY_o",connecting:"micButton_connecting__1Ww1H","keyframes-mic-connect":"micButton_keyframes-mic-connect__3l2-H",connecTalk:"micButton_connecTalk__3v0Or",downTalk:"micButton_downTalk__13eLX",lightUp:"micButton_lightUp__3bK-J",lightDown:"micButton_lightDown__Bmnq0",up:"micButton_up__3Y_IV",down:"micButton_down__1L1tj","keyframes-light-connect":"micButton_keyframes-light-connect__3JYob"}},,,function(e,t,a){var n=a(5);Object.defineProperty(t,"__esModule",{value:!0}),t.AnswerStat=void 0;var o,i=n(a(41)),r=n(a(7)),l=n(a(8)),s=n(a(12)),u=n(a(13)),c=n(a(14)),d=n(a(0)),f=n(a(638)),p=n(a(19)),h=n(a(28)),m=a(30),g=n(a(17)),_=n(a(189)),E=a(25),v=n(a(98)),S=n(a(262)),y=(0,m.observer)(o=function(e){function t(e){var a;return(0,r.default)(this,t),(a=(0,s.default)(this,(0,u.default)(t).call(this,e))).state={stuTot:0,rewardList:[],tests:[],showMicButton:!0},a.like=function(e){p.default.answer.like.push(e.uId),E.api.request("quizLike",{uId:e.uId,quizId:p.default.answer.quizId}),(0,v.default)(30,{target_id:e.uId,source_type:2})},a.likeAniListener=function(e,t){e.persist(),console.log("\u70b9\u8d5e\u52a8\u753b",e),e.currentTarget==e.target&&"animationend"===e.type&&e.animationName&&e.animationName.includes("keyframes-like-ani")&&(p.default.answer.likeAni.push(t.uId),a.setState({}))},a.el=document.createElement("div"),a.el.style.position="absolute",a.el.style.height="100%",a.el.style.width="100%",a.el.style.display="flex",a.el.style.alignItems="center",a.el.style.justifyContent="center",a.el.style.left="0px",a.el.style.top="0px",a}return(0,c.default)(t,e),(0,l.default)(t,[{key:"componentDidMount",value:function(){4===p.default.ClassType.type&&this.setState({showMicButton:!1}),this.setState((0,i.default)({},this.props.asData,{curTest:this.props.asData.tests&&1===this.props.asData.tests.length?this.props.asData.tests[0]:void 0,curReward:this.props.asData.rewardList&&this.props.asData.rewardList.length>=1&&this.props.asData.tests.length>1?this.props.asData.rewardList[0]:void 0,curAns:this.props.asData.tests&&1===this.props.asData.tests.length?this.props.asData.tests[0].allAns[0]:void 0}));var e=document.getElementById("courseContainerInner");e&&e.appendChild(this.el)}},{key:"componentDidUpdate",value:function(e,t){if(this.props.asData&&e.asData&&e.asData.stus&&this.props.asData.stus&&e.asData.stus.length!==this.props.asData.stus.length){console.log("\u7edf\u8ba1\u66f4\u65b0");var a=t.curTest?this.props.asData.tests.find(function(e){return!!t.curTest&&e.id===t.curTest.id}):void 0;console.log(this.props.asData.rewardList[0]),this.setState((0,i.default)({},this.props.asData,{curTest:a,curAns:t.curAns&&a?a.allAns.find(function(e){return!!t.curAns&&e.id===t.curAns.id}):void 0,curReward:t.curReward?this.props.asData.rewardList.find(function(e){return!!t.curReward&&e.number===t.curReward.number}):!a&&this.props.asData.rewardList&&this.props.asData.rewardList.length>0?this.props.asData.rewardList[0]:void 0}))}}},{key:"componentWillUnmount",value:function(){var e=document.getElementById("courseContainerInner");e&&e.removeChild(this.el),this.setState=function(){}}},{key:"render",value:function(){var e=this,t=this.state,a=t.curTest,n=t.curAns,o=t.curReward,i=t.rewardList,r=t.stuTot,l=t.tests,s=h.default.getInitOptions().currentLocale;return g.default.createPortal(d.default.createElement(S.default,{bounds:"#courseContainerInner"},d.default.createElement("div",{style:{maxHeight:4===p.default.ClassType.type?"396px":"440px"},className:f.default.container},d.default.createElement("p",{className:f.default.title},h.default.get("ANSWER_STAT_TITLE")),d.default.createElement("span",{className:f.default.close,onClick:function(){return e.props.onClose()}}),l.length>1&&d.default.createElement("div",{className:f.default.testsSelector},d.default.createElement("span",{onClick:function(){e.setState({curTest:void 0,curAns:void 0,curReward:i[0]||void 0})},className:f.default.btn+(a?"":" "+f.default.active)},h.default.get("ANSWER_STAT_ALL")),d.default.createElement("ul",{className:f.default.btnList,ref:function(t){return t&&(e.testSelectorEl=t)}},l.map(function(t,n){return d.default.createElement("li",{key:t.id,onClick:function(){e.setState(function(e){var a=t.allAns.findIndex(function(e){return!e.ans});if(-1!==a){var n=t.allAns.splice(a,1);t.allAns=t.allAns.concat(n)}return{curTest:t,curAns:t.allAns[0]||void 0,curReward:void 0}})},className:f.default.btn+(a&&a.id===t.id?" "+f.default.active:"")},n+1)})),d.default.createElement("span",{onClick:function(){e.testSelectorEl&&e.testSelectorEl.scrollTo(e.testSelectorEl.scrollLeft-50,0)},className:f.default.handle+" "+f.default.left}),d.default.createElement("span",{onClick:function(){e.testSelectorEl&&e.testSelectorEl.scrollTo(e.testSelectorEl.scrollLeft+50,0)},className:f.default.handle+" "+f.default.right})),a&&l.length>1&&d.default.createElement("div",{className:f.default.testInfo},d.default.createElement("div",{className:f.default.col},d.default.createElement("div",null,d.default.createElement("span",{className:f.default.bigText+" "+f.default.yellow},(100*(a.stuAcrCnt/a.stuAnsCnt||0)).toFixed()),d.default.createElement("span",{className:f.default.bigText},"%")),d.default.createElement("div",{className:f.default.bottomText},h.default.get("ANSWER_STAT_ACCURACY"))),d.default.createElement("div",{className:f.default.col},d.default.createElement("div",null,d.default.createElement("span",{className:f.default.bigText+" "+f.default.green},a.acrAns)),d.default.createElement("div",{className:f.default.bottomText},h.default.get("ANSWER_STAT_RIGHT"))),d.default.createElement("div",{className:f.default.col},d.default.createElement("div",null,d.default.createElement("span",{className:f.default.bigText+" "+f.default.yellow},a.stuAnsCnt),d.default.createElement("span",{className:f.default.bigText},"/",r)),d.default.createElement("div",{className:f.default.bottomText},h.default.get("ANSWER_STAT_TOTAL")))),d.default.createElement("div",{className:f.default.testDetail},d.default.createElement("div",{className:f.default.testCardWrap},d.default.createElement("div",{className:f.default.card},d.default.createElement("p",{className:f.default.cardTitle},h.default.get("ANSWER_STAT_DETAIL")),d.default.createElement("ul",{className:f.default.ansList},a?a.allAns.map(function(t){return d.default.createElement("li",{key:t.id,onClick:function(){e.setState({curAns:t,curReward:void 0})},className:f.default.ansItem+(n&&n.id===t.id?" "+f.default.active:"")},d.default.createElement("span",{style:{fontSize:"zh-CN"===s?"14px":"12px"},className:f.default.ansLabel+" "+(t.isAcrAns?f.default.greenText:t.ans?f.default.redText:f.default.yellowText)},t.ans||h.default.get("SIDE_TOOLS_ANSWER_UNANSWERED")),"zh-CN"===s?d.default.createElement("span",{className:f.default.stuCount},t.stuCnt,"\u4eba"):d.default.createElement("span",{className:f.default.stuCount},d.default.createElement("span",null,t.stuCnt),d.default.createElement("span",{className:f.default.personIcon})),d.default.createElement("div",{className:f.default.pctWrap},d.default.createElement("span",{className:f.default.pctItem,style:{width:Math.max(2,100*t.stuCnt/a.stuAnsCnt).toFixed()+"%"}})))}):i.map(function(t){return d.default.createElement("li",{key:t.number,onClick:function(){e.setState({curReward:t,curAns:void 0})},className:f.default.ansItem+(o&&o.number===t.number?" "+f.default.active:"")},d.default.createElement("span",{className:f.default.star}),d.default.createElement("span",{className:f.default.ansLabel},t.stars),"zh-CN"===s?d.default.createElement("span",{className:f.default.stuCount},t.stuCnt,"\u4eba"):d.default.createElement("span",{className:f.default.stuCount},d.default.createElement("span",null,t.stuCnt),d.default.createElement("span",{className:f.default.personIcon})),d.default.createElement("div",{className:f.default.pctWrap},d.default.createElement("span",{className:f.default.pctItem,style:{width:Math.max(2,100*t.stuCnt/r).toFixed()+"%"}})))})))),n&&d.default.createElement("div",{className:f.default.testCardWrap},d.default.createElement("div",{className:f.default.card},d.default.createElement("p",{className:f.default.cardTitle},n.ans&&d.default.createElement(d.default.Fragment,null,h.default.get("ANSWER_STAT_SELECTED"),"\uff1a"),a&&d.default.createElement("span",{className:n.isAcrAns?f.default.greenText:n.ans?f.default.redText:f.default.yellowText},n.ans||h.default.get("SIDE_TOOLS_ANSWER_UNANSWERED")),"zh-CN"===s?d.default.createElement("span",{className:f.default.floating},"\u5171",a?n.stuCnt:o&&o.stuCnt,"\u4eba"):d.default.createElement("span",{className:f.default.floating},d.default.createElement("span",null,a?n.stuCnt:o&&o.stuCnt),d.default.createElement("span",{className:f.default.personIcon}))),d.default.createElement("ul",{className:f.default.ansList},a&&(n.stus||[]).filter(function(e){return e}).map(function(t){return d.default.createElement("li",{className:f.default.ansItem,key:t.uId},d.default.createElement("span",{className:f.default.name},t.name),e.state.showMicButton&&d.default.createElement("div",{className:f.default.icon},d.default.createElement(_.default,{from:"answerStat",light:!0,item:t})),d.default.createElement("span",{onClick:function(){n.isAcrAns&&!p.default.answer.like.includes(t.uId)&&e.like(t)},className:f.default.icon+" "+f.default.like+" "+(p.default.answer.like.includes(t.uId)&&f.default.liked)+" "+(!n.isAcrAns&&f.default.disabled)}),p.default.answer.like.includes(t.uId)&&!p.default.answer.likeAni.includes(t.uId)&&d.default.createElement("span",{className:f.default.likeAniWrap},d.default.createElement("span",{className:f.default.likeAni,onAnimationEnd:function(a){return e.likeAniListener(a,t)}})))})))),o&&d.default.createElement("div",{className:f.default.testCardWrap},d.default.createElement("div",{className:f.default.card},d.default.createElement("p",{className:f.default.cardTitle},h.default.get("ANSWER_STAT_GAINS"),"\uff1a",o&&d.default.createElement(d.default.Fragment,null,d.default.createElement("span",{className:f.default.star}),d.default.createElement("span",{className:f.default.ansLabel},o.stars)),"zh-CN"===s?d.default.createElement("span",{className:f.default.floating},"\u5171",o&&o.stuCnt,"\u4eba"):d.default.createElement("span",{className:f.default.floating},d.default.createElement("span",null,o&&o.stuCnt),d.default.createElement("span",{className:f.default.personIcon}))),d.default.createElement("ul",{className:f.default.ansList},o&&(o.stus||[]).map(function(t){return d.default.createElement("li",{className:f.default.ansItem,key:t.uId},d.default.createElement("span",{className:f.default.name},t.name),e.state.showMicButton&&d.default.createElement("div",{className:f.default.icon},d.default.createElement(_.default,{from:"answerStat",light:!0,item:t})),d.default.createElement("span",{onClick:function(){o.stars&&!p.default.answer.like.includes(t.uId)&&e.like(t)},className:f.default.icon+" "+f.default.like+" "+(p.default.answer.like.includes(t.uId)&&f.default.liked)+" "+(!o.stars&&f.default.disabled)}),p.default.answer.like.includes(t.uId)&&!p.default.answer.likeAni.includes(t.uId)&&d.default.createElement("span",{className:f.default.likeAniWrap},d.default.createElement("span",{className:f.default.likeAni,onAnimationEnd:function(a){return e.likeAniListener(a,t)}})))}))))))),this.el)}}]),t}(d.default.Component))||o;t.AnswerStat=y},function(e,t,a){e.exports={container:"answerStat_container__zbiLa",title:"answerStat_title__huLrj",close:"answerStat_close__363e9",testsSelector:"answerStat_testsSelector__2j7r3",handle:"answerStat_handle__8kmlN",left:"answerStat_left__3RtNR",right:"answerStat_right__1ZjLL",btn:"answerStat_btn__1mhoV",btnList:"answerStat_btnList__2elXf",active:"answerStat_active__3ouhp",testInfo:"answerStat_testInfo__3HaPa",col:"answerStat_col__1C8zF",bigText:"answerStat_bigText__8XEaH",green:"answerStat_green__2EYFn",yellow:"answerStat_yellow__29CGk",bottomText:"answerStat_bottomText__1X47k",testCardWrap:"answerStat_testCardWrap__-e1Fy",card:"answerStat_card__YefX9",redText:"answerStat_redText__3F36W",greenText:"answerStat_greenText__2eHld",yellowText:"answerStat_yellowText__2cPxU",cardTitle:"answerStat_cardTitle__1jSoN",floating:"answerStat_floating__1XbID",ansList:"answerStat_ansList__G5gWl",ansItem:"answerStat_ansItem__1zAuF",icon:"answerStat_icon__tJGKo",thumbUp:"answerStat_thumbUp__3dV0j",like:"answerStat_like__337jR",disabled:"answerStat_disabled__27pzQ",liked:"answerStat_liked__1u5tw",likeAniWrap:"answerStat_likeAniWrap__1Q-s9",likeAni:"answerStat_likeAni__Zo2pc","keyframes-like-ani":"answerStat_keyframes-like-ani__1T0Gh",name:"answerStat_name__1BC4Y",ansLabel:"answerStat_ansLabel__35wzv",stuCount:"answerStat_stuCount__3NLmr",pctWrap:"answerStat_pctWrap__gs9Q4",pctItem:"answerStat_pctItem__kYyHj",star:"answerStat_star__13i3Z",personIcon:"answerStat_personIcon__lflYz"}},function(e,t,a){var n=a(5);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,i,r,l=n(a(7)),s=n(a(8)),u=n(a(12)),c=n(a(13)),d=n(a(14)),f=n(a(0)),p=n(a(122)),h=a(25),m=n(a(640)),g=a(30),_=n(a(28)),E=(0,g.inject)("store")((r=i=function(e){function t(e){var a;return(0,l.default)(this,t),(a=(0,u.default)(this,(0,c.default)(t).call(this,e))).froze=function(){console.log("froze"),a.setState({disabled:!0},function(){setTimeout(function(){a.setState({disabled:!1})},a.props.delay)})},a.poke=function(e){h.api.request("quizRemind",{uId:e,quizId:a.props.store.answer.quizId}),a.setState({init:!1})},a.onClick=function(){console.log("click"),a.froze(),a.poke(a.props.uId)},a.state={init:!0,disabled:!1},a}return(0,d.default)(t,e),(0,s.default)(t,[{key:"componentWillUnmount",value:function(){this.setState=function(){}}},{key:"render",value:function(){var e=this,t=this.state,a=(t.init,t.disabled);return f.default.createElement(f.default.Fragment,null,a?f.default.createElement("div",{className:a?m.default.remind+" "+m.default.disabled:m.default.remind,onClick:function(){return!a&&e.onClick()}}):f.default.createElement(p.default,{trigger:["hover"],mouseEnterDelay:.2,overlay:_.default.get("SIDE_TOOLS_ANSWER_POKE"),placement:"top",destroyTooltipOnHide:!0,overlayClassName:"poke-tooltip"},f.default.createElement("div",{className:a?m.default.remind+" "+m.default.disabled:m.default.remind,onClick:function(){return!a&&e.onClick()}})))}}]),t}(f.default.Component),i.defaultProps={delay:2e3},o=r))||o;t.default=E},function(e,t,a){e.exports={remind:"pokeButton_remind__2C0KM",disabled:"pokeButton_disabled__3PoQ9"}},function(e,t,a){var n=a(27),o=a(5);Object.defineProperty(t,"__esModule",{value:!0}),t.PdfSource=void 0;var i=o(a(7)),r=n(a(642)),l=(0,o(a(285)).default)();t.PdfSource=function e(){var t=this;(0,i.default)(this,e),this.fileUrl="",this.file=null,this.files$=new Map,this.loadFile=function(e){return new Promise(function(a,n){if(t.file&&e===t.fileUrl)a(t.file);else if(e&&t.files$.has(e))t.files$.get(e).then(a,n);else if(e){var o=r.getDocument(e).promise;t.files$.set(e,o),o.then(function(n){t.file&&(t.file.cleanup(),t.file.destroy(),t.files$.delete(t.fileUrl)),t.file=n,t.fileUrl=e||"",a(t.file)}).catch(function(e){return n(e)})}else console.error(e),n("url\u4e0d\u5b58\u5728")})},this.loadPage=function(e){return new Promise(function(a,n){t.loadFile(t.fileUrl).then(function(t){t.getPage(e).then(function(e){var t={pageNumber:e.pageNumber,width:+e.view[2]-+e.view[0],height:+e.view[3]-+e.view[1],__originPageData:e};a(t)}).catch(function(e){return n(e)})}).catch(function(e){return n(e)})})},this.renderPage=function(e,n,o,i,r){return new Promise(function(r,s){if(n&&o){var u=n;t.loadPage(e>0?e:1).then(function(t){var n=i&&i.notRender,c=i&&i.notScale,d=i&&i.autoScale,f=o.getBoundingClientRect(),p=f.width,h=f.height,m=2;(l.phone||!c)&&(m=1);var g=t.width,_=t.height,E=p/g,v=h/_,S=Math.min(v,E)||1;if(g/_<1&&d&&(S=(1.77<p/h?1.77*h:p)/g),n)r({scale:S,anotherScale:m,canvasWidth:g*S,canvasHeight:_*S,ctrWidth:p,ctrHeight:h});else if(u.width=c?g*m:g*S,u.height=c?_*m:_*S,e>0)t.__originPageData.render({canvasContext:u.getContext("2d"),viewport:t.__originPageData.getViewport(c?{scale:m}:{scale:S*m})}).promise.then(function(){r({scale:S,anotherScale:m,canvasWidth:g*S,canvasHeight:_*S,ctrWidth:p,ctrHeight:h})}).catch(function(e){return s(e)});else{var y=u.getContext("2d"),w=new Image;w.onload=function(){y&&(y.fillStyle=y.createPattern(w,"repeat")||""),y&&y.fillRect(0,0,c?g*m:g*S,c?_*m:_*S),r({scale:S,anotherScale:m,canvasWidth:g*S,canvasHeight:_*S,ctrWidth:p,ctrHeight:h})},w.onerror=s,w.src=a(121)}}).catch(function(e){return s(e)})}else s("canvasEl\u548ccontainerElement \u4e0d\u5b58\u5728")})}}},,,,,,function(e,t){},,function(e,t){},function(e,t){},function(e,t){},function(e,t){},,,,,function(e,t,a){var n=a(5);Object.defineProperty(t,"__esModule",{value:!0}),t.H5CourseWareSource=void 0;var o=n(a(141)),i=n(a(7)),r=n(a(19)),l=a(25),s=n(a(52));t.H5CourseWareSource=function e(){var t=this;(0,i.default)(this,e),this.file=null,this.fileUrl="",this.filesLoadingMap=new Map,this.courseVersion=-1,this.courseId=0,this.launchPagePromise=null,this.currentPageURL="",this.h5Viewer=null,this.setStoreBookOutLineNotes=function(e){for(var t=0;t<e.length;t++)r.default.book.outlineNotes[t+1]=e[t].note},this.prepareClassRoom=function(e){var a=window.location.search&&window.location.search.includes("cn")?"zh-CN":"en-US";window.ICWClassRoomSDK.setENVVars({language:a,proxyType:"https",themeType:"gen"}),window.ICWClassRoomSDK.setClassRoomBasicInfo(e.uid,e.cid,e.icwId),t.courseId=e.icwId||0,t.courseVersion=-1,window.ICWClassRoomSDK.currentCourseURL.length>0&&window.ICWClassRoomSDK.launchCourse(window.ICWClassRoomSDK.currentCourseURL),window.ICWClassRoomSDK.setAwardStarFunction(function(){l.api.request("starPlus").then(function(e){console.log("sent awarding stars",e)})})},this.getVersionfromICWSDK=function(){return console.log("will get version from sdk"),console.log("before version changed, virtual pages array",JSON.stringify(r.default.book.vPages)),new Promise(function(e,a){window.ICWClassRoomSDK.getVersion(t.courseId).then(function(a){console.log("got version from sdk and it is: "+a),t.courseVersion=a,t.courseVersion>0&&window.ICWClassRoomSDK.currentCourseURL.length>0&&(window.ICWClassRoomSDK.currentCourseURL+="?version="+t.courseVersion);var n=t;window.ICWClassRoomSDK.subscribeVersion(function(e){if(e){var t=(e=JSON.parse(e)).version;if(console.log("version is set from SVC server, and version is: "+t),n.courseId===window.ICWClassRoomSDK.currentCourse.courseId&&n.courseVersion<0&&window.ICWClassRoomSDK.currentCourseURL.indexOf("?version=")<0){n.courseVersion=t,r.default.book.vPages=[],window.ICWClassRoomSDK.currentCourseURL+="?version="+t;var a=[];a.push(l.api.request("wbGetPageNum",{textBookId:r.default.book.bookId})),a.push(l.api.request("wbSyncSetData",{textBookId:r.default.book.bookId})),Promise.all(a).then(function(e){var t=(0,o.default)(e,2),a=t[0],i=t[1];n.currentPageURL="",window.ICWClassRoomSDK.currentCourse.currentPage=a.param.page,r.default.book.bookUrl=window.ICWClassRoomSDK.currentCourseURL,r.default.book.vPages=(i.payload||[]).filter(function(e){return-1===e.crswarePage}).map(function(e){return e.page}),r.default.book.curPage=a.param.page,r.default.book.outlineNotes=[],r.default.book.diffHistory=new Map})}}}),e(a)}).catch(function(e){console.log(e),a()})})},this.loadControllerJS=function(e){return new Promise(function(t,a){e?t():s.default.loadScript("https://i.coursebox.xdf.cn/libraries/icw/online",!0).then(function(){return t()}).catch(function(){return a()})})},this.setCurrentPageURL=function(e){t.currentPageURL=e},this.isCurrentPageInteractive=function(){return!!t.h5Viewer&&!!t.h5Viewer.state.pages&&!(t.h5Viewer.state.pages.length<1)&&!!t.h5Viewer.state.pages[r.default.book.curPage-1]&&!(t.h5Viewer.state.pages[r.default.book.curPage-1].realPageNum<0)&&!!t.file&&!(t.file.pagesArray.length<1)&&!!t.file.pagesArray[r.default.book.curPage-1]&&t.file.pagesArray[r.default.book.curPage-1].isInteractive},this.bindH5Viewer=function(e){t.h5Viewer=e},this.loadFile=function(e){if(e&&e.length>0&&t.fileUrl===e&&t.filesLoadingMap.get(e))return new Promise(function(a,n){console.log("same file is loading now");var o=t.filesLoadingMap.get(e);o&&o.then(function(e){a(e)}).catch(function(a){t.filesLoadingMap.delete(e),n()})});var a=new Promise(function(a,n){t.file&&t.fileUrl===e&&e.length>0?a(t.file):e?(console.log("we are in load file: and url is: "+e),console.log(t.filesLoadingMap),t.fileUrl=e||"",fetch(e).then(function(e){return e.json()}).then(function(n){console.log("fetched page from server"),console.log(n);var o=n.total;console.log("fetched page number is : "+o);var i=parseInt(n.version),l=n.pages;t.setStoreBookOutLineNotes(l),console.log(n.pages),t.currentPageURL="";var s=function(e){return new Promise(function(a,n){a({pageNum:t.file?t.file.pagesArray[e-1].no:-1,width:1920,height:t.file&&"4/3"===t.file.pagesArray[e-1].ratio?1440:1080})})};t.file={numPages:o,pagesArray:l,getPage:s},(3===r.default.Tool.role&&t.courseVersion<0&&i>0?window.ICWClassRoomSDK.setVersion(t.courseId,i,l.length):Promise.resolve()).then(function(){3===r.default.Tool.role&&t.courseVersion<0&&i>0&&(t.courseVersion=i),a(t.file||{numPages:o,pagesArray:l,getPage:s}),t.filesLoadingMap.delete(e)}).catch(function(n){console.log("failed to set version or clear cached data, but still going on"),t.filesLoadingMap.delete(e),a(t.file||{numPages:o,pagesArray:l,getPage:s})})}).catch(function(a){console.log("fetch error !!!!!!!!!!"),console.log(a),t.filesLoadingMap.delete(e),n()})):n()});return console.log("try a new promise set into a map: ",a),e&&e.length>0&&t.filesLoadingMap.set(e,a),a},this.loadPage=function(e){return new Promise(function(a,n){t.loadFile(t.fileUrl).then(function(n){console.log(n.pagesArray),console.log("current page is "+e),console.log("current page is: "+t.currentPageURL),t.currentPageURL.length>0&&n.pagesArray[e-1]&&t.currentPageURL===n.pagesArray[e-1].url?(console.log("same page is refreshing"),n.getPage(e).then(function(t){var n={pageNumber:t.pageNum>-1?t.pageNum:e,width:t.width,height:t.height,pageLoaded:!0};a(n)})):window.ICWClassRoomSDK.initialized.promise.then(function(){return console.log("launch Page url:"+n.pagesArray[e-1].url),t.launchPagePromise?t.launchPagePromise:t.launchPagePromise=window.ICWClassRoomSDK.launchPage(n.pagesArray[e-1].no)}).then(function(o){console.log("returned current page data from SVC"),console.log(o),t.launchPagePromise=null,t.currentPageURL=n.pagesArray[e-1].url,r.default.Tool.enableOperateItem(!1),n.pagesArray[e-1].isInteractive?1===r.default.Tool.role||2===r.default.Tool.role?r.default.Tool.enableOperateItem(!0):3===r.default.Tool.role?(o&&(1===o.is_authorized?(console.log("enable operate item"),r.default.Tool.enableOperateItem(!0)):(console.log("disable operate item"),r.default.Tool.enableOperateItem(!1))),window.ICWClassRoomSDK.subscribeOperationAuth(function(e){console.log("subscribeOperationAuth",e),console.log("student received msg with: "),e=JSON.parse(e),console.log(e.is_authorized,"\u76d1\u542c\u5230\u4e86\u4e92\u52a8\u8bfe\u4ef6\u6388\u6743\u4fe1\u606f"),console.log(e),e.is_authorized?r.default.Tool.enableOperateItem(!0):(console.log("\u76d1\u542c\u5230\u4e86\u53d6\u6d88\u6388\u6743"),r.default.Tool.enableOperateItem(!1))})):r.default.Tool.enableOperateItem(!1):r.default.Tool.enableOperateItem(!1),n.getPage(e).then(function(t){var n={pageNumber:t.pageNum>-1?t.pageNum:e,width:t.width,height:t.height,pageLoaded:!0};a(n)})})}).catch(function(){t.launchPagePromise=null,t.currentPageURL=""})})},this.renderPage=function(e,n,o,i,l){return new Promise(function(i,s){if(l&&"img"===l){if(!n||!o)return console.log("have error with "+e),void s();var u=n;(t.file&&t.file.pagesArray&&t.file.pagesArray[e-1]?new Promise(function(e,t){e()}):t.loadFile(t.fileUrl)).then(function(n){var r=o.getBoundingClientRect(),l=r.width,c=r.height;u.width=l,u.height=9*l/16,console.log("thumbnails' current rendering page is: "+e);var d=u.getContext("2d"),f=new Image;f.onload=function(){e>0?t.file&&t.file.pagesArray&&d&&d.drawImage(f,0,0,u.width,u.height):(d&&(d.fillStyle=d.createPattern(f,"repeat")||""),d&&d.fillRect(0,0,u.width,u.height)),i({scale:1,canvasWidth:u.width,canvasHeight:u.height,ctrWidth:l,ctrHeight:c})},f.onerror=s,f.src=e>0?t.file&&t.file.pagesArray[e-1].thumbnail:a(121)})}else(e<1?new Promise(function(e,a){r.default.Tool.enableOperateItem(!1),t.launchPagePromise=null,t.currentPageURL="",e({width:1920,height:1080})}):t.loadPage(e>0?e:1)).then(function(e){i({scale:0,canvasWidth:e.width,canvasHeight:e.height,ctrWidth:-1,ctrHeight:-1})})})}}},function(e,t,a){},function(e,t,a){var n=a(5),o=a(27);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,r=n(a(7)),l=n(a(8)),s=n(a(12)),u=n(a(13)),c=n(a(14)),d=o(a(0)),f=a(30),p=a(16),h=n(a(19)),m=a(25);a(660);var g=(0,f.observer)(i=function(e){function t(e){var a;return(0,r.default)(this,t),(a=(0,s.default)(this,(0,u.default)(t).call(this,e))).diceItem=d.default.createRef(),a.disposers=[],a.state={tools:[],toolAct:""},a.onToolChange=function(e){a.setState({toolAct:e.role}),h.default.home.tool=e.role,a.onDisabled(),m.api.request("toolsStateInfo",{type:"tool_extra_tool",value:{}})},a.getDom=function(e){return document.getElementsByClassName(e)||[]},a.onDisabled=function(){for(var e=a.getDom("more-item"),t=0;t<e.length;t++){!e[t].classList.contains("active")&&e[t].classList.add("disabled")}},a}return(0,c.default)(t,e),(0,l.default)(t,[{key:"componentWillReceiveProps",value:function(e){var t=this;this.setState({tools:e.toolListData.filter(function(e){return e.isExternalTool})},function(){(t.state.tools.map(function(e){return e.role})||[]).includes(h.default.home.tool)&&t.onDisabled()})}},{key:"componentDidMount",value:function(){var e=this;this.disposers.push((0,p.reaction)(function(){return h.default.home.tool},function(t){if(e.setState({toolAct:t}),"more"===t||""===t)for(var a=e.getDom("more-item"),n=0;n<a.length;n++)a[n].classList.remove("disabled")}))}},{key:"componentWillUnmount",value:function(){this.disposers&&this.disposers.length&&(this.disposers.forEach(function(e){return e()}),this.disposers=[])}},{key:"render",value:function(){var e=this;return d.default.createElement("div",{style:{display:this.props.show?"block":"none"},className:"more-container"},this.state.tools.map(function(t,a){return d.default.createElement("div",{key:a,onClick:function(){return("more"===h.default.home.tool||""===h.default.home.tool)&&e.onToolChange(t)},className:"more-inner"},d.default.createElement("span",{style:{backgroundImage:"url("+t.bigIconURL+")"||!1},className:["more-item",e.state.toolAct===t.role?"active":""].join(" ")}),d.default.createElement("span",{className:"more-txt"},t.text))}))}}]),t}(d.Component))||i;t.default=g},function(e,t,a){},function(e,t,a){var n=a(5),o=a(27);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,r=n(a(7)),l=n(a(8)),s=n(a(12)),u=n(a(13)),c=n(a(14)),d=o(a(0)),f=(0,a(30).observer)(i=function(e){function t(e){return(0,r.default)(this,t),(0,s.default)(this,(0,u.default)(t).call(this,e))}return(0,c.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){return d.default.createElement("div",{style:{display:this.props.show?"block":"none",flex:1}},d.default.createElement("iframe",{id:"third",title:"third-plat-demo",width:"100%",height:"100%",style:{border:"none"},src:this.props.iframeUrl}))}}]),t}(d.Component))||i;t.default=f},function(e,t,a){var n=a(5),o=a(27);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(7)),r=n(a(8)),l=n(a(12)),s=n(a(13)),u=n(a(14)),c=o(a(0)),d=n(a(663)),f=n(a(122)),p=n(a(189)),h=n(a(97)),m=a(25),g=n(a(28));a(190);var _=a(770);a(691);var E,v=a(30),S=(0,v.inject)("store")(E=(0,v.observer)(E=function(e){function t(e){var a;return(0,i.default)(this,t),(a=(0,l.default)(this,(0,s.default)(t).call(this,e))).lock=!1,a.lockLength=!1,a.banTalk=function(e,t){var n=a.state.rosterList;n.find(function(t){return t.uId===e.param.uId}).canTalk=t,a.setState({rosterList:n})},a.liftBan=function(e){m.api.request("liftBanStudent",{uId:e}).then(function(t){if(0===t.statusCode){var n=a.state.rosterList;n.find(function(t){return t.uId===e}).canTalk=!0,a.setState({rosterList:n})}})},a.test=function(){console.log("test")},a.state={rosterList:[],totalNum:0,onlineNum:0,micLength:0,channel:0,contentText:null,derectMic:!1},a}return(0,u.default)(t,e),(0,r.default)(t,[{key:"componentDidMount",value:function(){var e=this;m.api.listen("onlineStudentNotify",function(t){var a=t.param,n=a.rosterList,o=a.totalNum;n=n||[],e.setState({rosterList:n,onlineNum:n.length,totalNum:o})}),m.api.listen("rosterEnterNotify",function(t){setTimeout(function(){var a=e.state.rosterList,n=a.findIndex(function(e){return e.uId===t.param.uId});1===t.param.type&&(n>-1&&a.splice(n,1),a.push(t.param)),2===t.param.type&&n>-1&&a.splice(n,1),e.setState({rosterList:a,onlineNum:a.length})},0)}),m.api.listen("banStudentNotify",function(t){e.banTalk(t,!1)}),m.api.listen("unbanStudentNotify",function(t){e.banTalk(t,!0)}),m.api.listen("totalStudentNotify",function(t){e.setState({totalNum:t.param.totalNum})}),this.listen=m.api.listen("unionMicOrderListChangeNotify",function(t){var a=t.user_array;a=a||[],"on"===e.props.store.RosterMicState.currentState&&(e.props.store.RosterMicState.setMicList(a),0===a.length&&(e.props.store.RosterMicState.changeState("off"),m.api.request("unionMicStart",{um_mode:2,um_avtype:0,um_status:0,um_user_total:2}).then(function(t){console.log("\u76f4\u63a5\u8fde\u9ea6 stop",e,t)})))})}},{key:"componentWillUnmount",value:function(){this.listen&&this.listen.cancel()}},{key:"render",value:function(){var e=this,t=function(t){t.key;var n=t.index,o=t.style,i=e.state.rosterList[n];return c.default.createElement("div",{className:d.default.rosterListItem,key:i.uId,style:o},c.default.createElement(f.default,{trigger:["hover"],placement:"top",overlay:i.nickName,overlayClassName:"rc-replace rc-max",mouseEnterDelay:1,mouseLeaveDelay:.5},c.default.createElement("div",{className:d.default.l},i.nickName)),c.default.createElement("div",{className:d.default.r},!i.canTalk&&c.default.createElement("span",{className:d.default.talkIcon,onClick:function(){return e.liftBan(i.uId)},style:{backgroundImage:"url("+a(692)+")"}}),c.default.createElement("div",{className:d.default.micButton},c.default.createElement(p.default,{from:"roster",item:i}))))};return c.default.createElement("div",{style:{display:this.props.show?"flex":"none"},className:d.default.rosterContent},c.default.createElement("div",{className:d.default.total},c.default.createElement("p",{className:d.default.totalPerson},c.default.createElement("span",null,this.state.onlineNum),c.default.createElement("span",null,"/",this.state.totalNum)),c.default.createElement("p",{className:d.default.totalDesc},g.default.get("ROSTER_ONLINE"))),c.default.createElement("div",{style:{width:"100%",flex:1}},c.default.createElement(_.AutoSizer,null,function(a){var n=a.height,o=a.width;return c.default.createElement(_.List,{width:o,height:n,rowCount:e.state.rosterList.length,rowHeight:44,rowRenderer:t,className:d.default.scroll+" "+d.default.rosterList,style:{outline:"none"}})})),c.default.createElement(h.default,{contentText:this.props.store.RosterMicState.toastContent}))}}]),t}(c.Component))||E)||E;t.default=S},function(e,t,a){e.exports={scroll:"roster_scroll__3g6di",rosterContent:"roster_rosterContent__2cJYC",total:"roster_total__KGOdY",totalPerson:"roster_totalPerson__23_g0",totalDesc:"roster_totalDesc__r0SvJ",rosterList:"roster_rosterList__21rcJ",rosterListItem:"roster_rosterListItem__2cngr",l:"roster_l__C3QeQ",r:"roster_r__1sDmn",talkIcon:"roster_talkIcon__1pPl8",micButton:"roster_micButton__leCiq"}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAAAYCAYAAAAF6fiUAAAGI0lEQVRoQ+2Ya0wUVxTHz53ZnWVneairgiyrq1FAjP1g+wVb0xqjxeCrWmwwWG2igDaaxhg1hg8mfjDVRGJMFB+JMWBMqNQK1ao1mtgqJm0VERorWKE+QlsVBHae997TDEqKuIuz6oaY7GY/TW7+98zvf8695wyB2G9QCZBB3T22OcQMGOQkiBkQM2CQCQzy9m+sAhCAEACM1vu87frhuAxoQC1iQDD5JgAyGwn4EFHsESKEIsJ9BNz+viTuweLiACCeBUIOkrKy7XZNqFXVABP1TQZnszVOfRo3RY0zMNCkKmf3dWTbvxqW9er6UY6/AVHSAFIMA5IkCZzUfHqnIgAighknQdsUQv7FvDwJRo6cAIiPyJ49bX35hDXgiomzOPJjACAAQDUQaEYABhysv5MQGC44hc0T9+3zJ9XVVRNEDyBOJ/v337BjwK+mNstA/ZjOmaBzs9pA3qxyyjROLQOcKmfDqcg3zzpc48/6/U41QYhIP9rxX0FMFEwYRwGIyKDD5KDHyU9PAA2AIIDjA4D7UFoqwc2b44EQAWT5FiktVV9qQK2KASrweiDklkjJ/KkyuR8KqpX51O2+igBDH096Z17Kii9q7MC/hmpAM816E/ktk9H5M+ThYfVVl/MqJzD0RqZvXnbxJlv60Y7fyvwnJmRRBN0jQfN7hJgh+ViZ7/dPNAlxdKenNw8rKnrSf13ICrig0TIAKOBczJgxAHxAvAAACbXrNsR1jh5TnuN2rLJjwBWjs0zntIBynjEQ/F79r1fmxN1OGVJ+IG26Lf1ox/8T4mhuml6P09kwIHyvNx0Qxdr164Wgb/yjmTL5y5YB5zTaisgvzXRLS8Jlfi8cIGTmyZ27NgBA9hzZFbBjwEW9vVXnlr7Xlv6KkrwNBrLscv8sW/rRjv9HHSdLHLo/dJM7YTP/GXxAbDq7a18yZUZ8brzrheM5ZAWcVk0NOd852+Pa3H+DZxduT+Zb8ElZ2bVqRd/GEdYt8Lhcdgw4pz3UdEZ35npSbOkvvXtmm87pusoxubb0ox3/6aAxxST077my/MLR2XPh9oFP9u9XahTFZ6AjeZFHumqrAr5X9BYAcnmO/HwFhIJvCVZ16ZVIePan8W6/HQNOKm0tOmeXF8b7nquAcPqLW09VWhXwXWCuLf2ox9+tT2ai1D2vXwWEgm/xOKZp4xyUeBbYrYATQWMvR76UCzxzkSzf62mtnraaz2W+9bxCUdIcjDQRIAc+S4hba8eAb4P39mqMLg2aZuZK74QB9RfeO5WGlDVpwA78EFhgSz/a8VcrOBrR9Prk/++AcPArGxokYWz6JJM4H+bL5K6tCqhqV8dwkTSAgFV58e7l4eBbYke61BJkfKskyWmLw1zY/Tc90v7nGJPwBp2wqqKkjAH1F7TUlOicbtWdjrTz/rkhu6X++tGOvxJRcgbNLBBZxydud0s4+FZc5cHgKMGE1O4kub4oRLcUdg74plOdhmg0Tj161J/S2HiGio7kS0s+P/4gI/M6AhcQBMoT43YIncpGRNiyfIgnoqn6QOcf07qQNuYervGPa7p3xhBJcvmiacfrxo243jMbIKUSc+1og46NBqNbzo/Pi0g/2vFX/oPxMALU7NJSKa21dYLicDiv5Od3PJj4rmIoCpFkwAJZbqtQlBRmQuryIZ7fQp0OA76UlfmGy3WVAEk4U7gKHvl8Dnw67HFrHkaAOkCs5wDLVgyNjwhQ77Gmu5zWHJGwZ9lMuJ2c6NA5BQ0p1zglOrI6FY16ndFlP0/IfyX9qMaflyeZfv9E4Fw8XfglPE5N7YWDAgARRK4w6lAp4d6VkRqAq1f7gbGLfbudvg4efNKdgxwqOKLXel40LCEiQC/Tn3fnRI6KtEJjpteajn/JKHij+q8df4hupy+fCsTE7o7gWJEQh/U8cgMKC9eCIJQAwMdWqxmqfPa2qwER2CGOqBcPS8ixcwH3rkEb+h/dORpQKR7SmKlfz1z2xvVfK/7i4pGAOMrq861WM9S7W3dFR5ce4JqOxSOTmiI/gtascZHdu/VIwEayFt92/TfwBTiiso4EbmytPQIxA+xxitqqmAFRQ2tPOGaAPU5RW/UfBdNgVcovYJAAAAAASUVORK5CYII="},function(e,t,a){e.exports=a.p+"static/media/connection.2dd519d1.svg"},function(e,t,a){e.exports=a.p+"static/media/leftbar_icon_Roster.eca3bc93.png"},function(e,t,a){e.exports=a.p+"static/media/tool_icon_timing.30ee6970.png"},function(e,t,a){e.exports=a.p+"static/media/tool_icon_countdown.ea4bda2b.png"},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJAAAAAkCAYAAABmHbPbAAAFM0lEQVR4Xu2aT0zbVhzHv88JpoR/hfJvdKHAINBByZRd2LTjtsOknTbtWKlHruOyU6VKvfRQLpV66LHVJLa2mrRdpm7HaeNUrWjpgGZASQv5A0kBYxIn8ZtsC4iJLT1wHCz1+Zjf+9nf932fPPvnnwn4wR1w4ABxkMtTuQPgAHEIHDnAAXJkH0/mAHEGHDnAAXJkH0/mAHEGHDnAAXJkH0/mAHEGHDnAAXJkH09mBigepw0iwW1BwFUAjYzW7akq7isU08Eg2WfMYRrmNT00PtMAofM2BPEqIDD6o+5BVe5DTU+T4LdV9YdSKmSTGCtSBAmBj8VUSlHyE8TbuhElhKgsOcwAJV/Ru4Rgal8C8jJAKcvpAUIAv4iZwTEyzZbBNspreujrB3dBxCnsRYH9FYAW2CZC6oC68zPk8p2q+pNJ0CulEvplGVBkNimHo/xYHh4jUZYsZoDS61SSd9GY22M5rXkMAbKhCGk/eaZ9htf00I0fJEjRRshLp5lmloRnq+pPaoN+sS/Bd2J4AJSKKIx+SH5lmchJAKLZpLHzLPy9g7UXMvqGAxj9oMV0HbvYSETbi6p3pNepp/TQjYcU6Z/1nSe1ksSbjQzOv9OOroFu06TtYiQ8W11/EvTLN0nj0gtPd7EWk9E3FMBopNm8Xjax4TD5hWW1mEVrC5ZJGKf87VFKoxQ+P/DZ112m69jF3ADIS3p0gFKPdS9ic0ugpSKIz4+hyZDJH7uYmwA9+XHzcL0+/6bDpMcu5ipAq0sSlv/JY3C8Hv2hJpMgu5ibAHlBTzlAWwkR22vP0dr3Pi70KCZ/7GJuArS8IGNlXsbARACDowGTHruYqwAJPkA8Byg57X5Jsb6a00X19p+Dz08OY2rpSKubAHlBTzlA8DUC9b1Afh20KGEnva0b0dLZCuJvOoyhdPRA6SZAWg0m1gNKHijmgWTceKruDgbgrz+KoWy9XAWoHGENnvk5w6CJyVYdIqvDTYC8oMcEUJmgndQOEkuv9F96Qu+ipcv8zHgw1FWAyvS8XpEx/5cB0MRHAVwcMO9IB0NrBlAinsOzP3f164Y/bkZP8GwBOis9tgBtKUgtxnR/ukaG0HJBtPyD1QygtTyifxjrNfZJMy721VvqqRlARKDIpIz7fHuXCKpaP5fXagc6Kz12AFGhEZLUqvvT1LQNolq/B6kVQJqO7GZe19PWYQ2PFnMVIKNU38elUAAjYXNZuPhsFy+XtBK/wVTiuwmQF/SUA3RQqrf3tqOj31zGb64mkVmvLPHdBOiojG/GaMR8y1p4KmMttltR4rsK0EGp7q8j+PSrTtMW+PvjNIoFWlHiuwmQF/RYlfGCrw7vTQ6b/Plv7gXUUqGixHcTIF7GW9yly99L8TK+0qB02YtEr5TxUiZhNFEFQe9voagA6rGWm1XMrVaGl/TorYzUT0YTVWgAxE5ASQPqsR6pdcyVVsZ26qiJKoqAYn4ldUjd8ZgrrQytebmdxhRrE/XYf+LWSIR8Z/m4f8ofvaZHb6ZuPZlibqKWz5vgFpmYrao/WjN1K4n+09hLBcRCV8i/LLnMrQzt84nCDm4W87hGgTbGk2cpcK8g4vr4OLHhn+VMlWO8pkf/nENauQklfU0rcBhnlQXBPQil62T8YVX90T7niD3H5VIOQZ8fdSx6tJ1HEPHy+0dYvHGjyp9zsAjgY94+B5h3oLfPGj5jFgc4QCwu8TG2DnCAOByOHOAAObKPJ3OAOAOOHOAAObKPJ3OAOAOOHOAAObKPJ3OAOAOOHPgflQGUUg+yIxwAAAAASUVORK5CYII="},function(e,t,a){e.exports=a.p+"static/media/tool_icon_dice.c69a59d4.png"},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJAAAAAkCAYAAABmHbPbAAAGoklEQVR4Xu2bX0xTVxzHv/e2BcofpSAWSmb2shcaTeaeF7eElPhkotM4ZtyU/YnbxJgB1YwIqA9WZthM2Pwz/0w3l0nc1JgtEh5082HROKKkbNFlbgTaItJCb/9A773nLveWjtoV6BXaW5LTpya99/R7f+dzf3/O+R0G9EMtMA8LMPO4l95KLQAKEIVgXhagAM3LfPTmhQFIkqLjMIyUFSalemafhgW0j3qAYn/e1jZ9r9MZ/W61TgPU0hL9nm6oqJ7UYEn1zVY5X+oAip+sKieDfiuDChcDty86ToVJgtsiocopod8qId0QUT3q4Yl/8eW7Y3MUP5IKiNQDpAi4wQJlLErKGQgeFn5TdJwlPgn6cgKvRwJGCPAKUQSqEJTqi6JcJwNE9cxsstgLJl8RA0d+8eM/8oueCJKK+VIHUGsrC8XzQAcUsCgQdbff7qgpzl96NEgIHvnH6tefa7iOoE4EggRVEBVP1NpKVIGR6sVJ9Hy/7UANm2c46uY5/Dk+XH+k60tN9WBrRw0K8o+C5YDQYD3OfJo5PfEeugVAl5O59eoRc3HR8pVBQcBfXm/f679+NIyNVgltcd4orQABLEpGdZgc00Oc0D/c/a0zJJFKTiTgCBla2/mmFbo8AbnFArylIgCSVoAS9Fzd+ZnTE+EqXREObt4/dPzrLzTVg52nnND5K8GOA+z4ED7pyJyeJCH+XkNDdZAQY0AEwqwUXtfR0TOflEO9B6pw6RD06cEX6RHmDL32831hibHIAAWI6NrQsW0ljEU8DJyAApMAt0VMK0AJek7sOtjn4QMWN++HO8K5Ln91XlM9sDv6oPdbFIAQcuHA6czpiYX4uHz11ub26knC5HEAArwwseWHPT3/y1vT4oFkMZs2sbDK4cukR9hngFFvOFd30GYuLm8PEAkPn7ga95xv6UZY4GE08YBPgBMiLl4kC54HzaDnw9rtNpJvaJcBGhodbbx9rVtTPXh3uw1mph1MBHg83ohjVzOnJ5b7yACVWRncdLKdW/aZzSWVK0OCgIHh4b7mS/uHscZKMPJshU/qHkiesK5NrJL/BPIMKNQZkMMYMBk2wCBDBYCHiFwjj4jEIyDyKJzglTxoY5oAonrmTqDl5FkGyGdiYbIw6P+bxZKposfvk1D1PIHPJcHkI89SOasH6JeAHiuW6RHUGQAxBzxjgFHHKk8SFgkMEg/oIigQeQw8EfByoZBWgKie5BA9lf9UMfD1zAFQNUF/v+qlFwpQqhXfXNfFPHQ2Af1fCMtigK7VtdleWP6cQy7j77oH7O+c29+tpQc6ua3Jtqy0xOGOcLjnfmQ/3nVBUz14o82GinIHWD8w8sCOMyczpyc+B5oKYevEFWZjfukqJWCERu9f0Q0MaxrCHuw93RuWJKUK4whxrT3y3otaAnSl4VDvMB+wyGW8KzLuOnHqrKZ60NjZC91UFcaOuXDwWOb0JPFAtTkvVUusZJR/YggTvhC52xMFSKMQ1ms/2ft0Gb8jcwaSk+iEkHFiV3Pv02V8l6Z6sKdtGiAm5ML+C5nTsxgAOr11n62yrNIRIAR/PP7H/vE3hzLnopMAtGNjrY1ZanTIK9GDIx77nR9/1lQP6mptsOQ4wEwCQ2N2nPopc3qSADRzCNPIA9EqbCq7pkn0HGVGNhooiQeiQMcBvRiqMDph1APNtcIR/X0GD0TL+DkAyrIy/vLqDeaKsspVQRH43Tt0/4PfLtEyPn5lnJbxs4ewOzW7q8OSZOREEWFRDL9243NaxscDRMv42QG6WV2vABSQewNEMbw14wAlbKaerW22VZSWH5Z34x88GWza+52jW8vN1PfXb7ahMPewvBs/6B1punP9lqZ68NZmG8y6w8puvMfXhLM9mdOTZCW6c/UGc9nS8lUhAIPjnvvNGQ1hSdo5gFw99CS6Gy+wIjApaNnOQfUk80DT7RxKG7KXi+6BlhRJSvtxRto55D+UW0gTGriAPD0wtRsPkQATgpYNZVRPXE2UpKFMaenwjEYBKi+VlG2MxIMQaWkoiwGU0EKKiSU6IBRt50A+QZ5f1LKllepJACg+jKXhFE3q7RwxgBKa6kEMLLxcFKCSIgKWJ1o21VM9MwA01VSvHMVaM3XNTUDph85YUz09RjP7mlk22iemOCuO9dCDfHMDlOaQkdqqb0IiHX+TpgcLYyvSMSPFhNGjzdNTlK1HrVMlT0UCLQ+pLgeaScQCHtZP9TlnvY7qSc1TqoQl2aALA9CCzDodZDFagAK0GGctizT/C7rOgaxk1tsMAAAAAElFTkSuQmCC"},function(e,t,a){e.exports=a.p+"static/media/outline.0e5baed6.svg"},function(e,t,a){e.exports=a.p+"static/media/material.3e61e6ce.svg"},function(e,t,a){e.exports=a.p+"static/media/leftbar_icon_test.6ce6e9da.png"},function(e,t,a){var n=a(27),o=a(5);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=o(a(258)),r=o(a(38)),l=o(a(7)),s=o(a(8)),u=o(a(12)),c=o(a(13)),d=o(a(81)),f=o(a(14)),p=n(a(0)),h=o(a(704)),m=o(a(52)),g=a(93),_=o(a(120)),E=o(a(285)),v=a(25),S=o(a(28)),y=a(16),w=function(e){function t(e){var n;return(0,l.default)(this,t),(n=(0,u.default)(this,(0,c.default)(t).call(this,e))).drag=function(){var e=n.boxRef.current,t=n.pageRef.current;e.onmousedown=function(a){var n=(a=a||window.event).clientX-e.offsetLeft,o=a.clientY-e.offsetTop;document.onmousemove=m.default.throttle(function(a){var i=(a=a||window.event).clientX-n,r=a.clientY-o;i<0?i=0:i>t.offsetWidth-e.offsetWidth&&(i=t.offsetWidth-e.offsetWidth),r<0?r=0:r>t.offsetHeight-e.offsetHeight&&(r=t.offsetHeight-e.offsetHeight),e.style.left="calc("+i/t.offsetWidth*100+"% + 0px)",e.style.top="calc("+r/t.offsetHeight*100+"% + 0px)"},30),document.onmouseup=function(e){this.onmousemove=null,this.onmouseup=null}}},n.sleep=function(e){return new Promise(function(t){setTimeout(t,e)})},n.shuffle=function(e){var t,a,n;for(t=e.length-1;t>0;t--)a=Math.floor(Math.random()*(t+1)),n=e[t],e[t]=e[a],e[a]=n;return e},n.startRotate=function(){var e=(0,r.default)(n.imagesList),t=n.shuffle(e),a=[],o=(0,d.default)(n);!function(){var e,n;i.default.async(function(r){for(;;)switch(r.prev=r.next){case 0:e=1;case 1:if(!(e<=5)){r.next=12;break}if(n=t.pop()){r.next=5;break}return r.abrupt("return");case 5:return a.push(n),o.setState({images:a}),r.next=9,i.default.awrap(o.sleep(700));case 9:e++,r.next=1;break;case 12:case"end":return r.stop()}})}(),n.setState({rotate:!0,startInteraction:!0})},n.updatePosition=m.default.throttle(function(){try{n.boxRef.current.style.left=Math.min(n.boxRef.current.offsetLeft,n.pageRef.current.offsetWidth-n.boxRef.current.offsetWidth)+165+"px",n.boxRef.current.style.top=Math.min(n.boxRef.current.offsetTop,n.pageRef.current.offsetHeight-n.boxRef.current.offsetHeight)+"px"}catch(e){}},200),n.isArray=function(e){return(0,y.isObservableArray)(e)||Array.isArray(e)},n.handleHandUp=function(){n.setState({handup:!n.state.handup,disabled:!0},function(){setTimeout(function(){n.setState({disabled:!1})},2e3),n.state.handup?v.api.request("unionMicHandUpDown",{uid_self:n.state.uidSelf,union_mic_channel:n.props.data.union_mic_channel,uid_creator:n.props.data.uid_creator,hand_type:1}).then(function(e){console.log("\u6210\u529f\u6536\u5230 unionMicHandUpDown \u6570\u636e",e)}).catch(function(){console.log("\u6ca1\u6709\u6536\u5230 unionMicHandUpDown \u6570\u636e")}):v.api.request("unionMicHandUpDown",{uid_self:n.state.uidSelf,union_mic_channel:n.props.data.union_mic_channel,uid_creator:n.props.data.uid_creator,hand_type:0}).then(function(e){console.log("\u6210\u529f\u6536\u5230 unionMicHandUpDown \u6570\u636e",e)}).catch(function(){console.log("\u6ca1\u6709\u6536\u5230 unionMicHandUpDown \u6570\u636e")})})},n.state={mode:0,images:[],rotate:!1,startInteraction:!1,handup:!1,creatorIdentity:1,creatorName:"",umMode:0,total:0,uidSelf:0,showHandupBox:!0,showRadar:!1,micList:[],micListMock:[],handupLength:0,isInMicList:!1,first:!0,disabled:!1,showSmallButton:!1,showPage:!1},n.pageRef=p.default.createRef(),n.boxRef=p.default.createRef(),n.imagesList=[{icon:a(147),username:"li",id:"uid-1"},{icon:a(99),username:"wang",id:"uid-2"},{icon:a(259),username:"liu",id:"uid-3"},{icon:a(260),username:"mike",id:"uid-4"},{icon:a(261),username:"andy",id:"uid-5"}],n}return(0,f.default)(t,e),(0,s.default)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.data,n=0===t.um_mode,o=t.start_stamp,i=2===t.um_mode;console.log(t,"\u53d1\u8d77\u8fde\u9ea6\u5b66\u751f\u7aef\u6536\u5230 \u7684\u6570\u636e",o),i||!(n||t.cur_stamp-t.start_stamp<15)&&o||this.setState({showPage:!0});var r=document.getElementById("handupBox");if(r&&(0,E.default)().tablet&&(r.style.top="calc(100% - 174px)"),(0,E.default)().phone&&setTimeout(function(){e.setState({showSmallButton:!0})},3e3),this.state.first&&setTimeout(function(){e.startRotate()},2),this.drag(),g.siderState.observe(function(t){try{"open"===t.newValue&&(e.boxRef.current.style.left=Math.min(e.boxRef.current.offsetLeft,e.pageRef.current.offsetWidth-e.boxRef.current.offsetWidth)+"px")}catch(a){console.log(a)}}),v.api.request("clsSelfInfo").then(function(t){e.setState({uidSelf:t.usrId})}),this.micOrderList=v.api.listen("unionMicOrderListChangeNotify",function(t){e.setState({images:[],rotate:!1});var n=t.user_array;(n=n||[]).length>0?(setTimeout(function(){e.setState({showRadar:!1})},1500),1===n.filter(function(t){return t.user_uid===e.state.uidSelf}).length?e.setState({isInMicList:!0,first:!1,showHandupBox:!1}):e.state.isInMicList&&e.setState({handup:!1},function(){e.setState({isInMicList:!1})}),1===n.length?e.setState({micListMock:[{user_avatar_url:a(99),user_uid:1}]}):e.setState({micListMock:[{user_avatar_url:a(99),user_uid:1},{user_avatar_url:a(147),user_uid:2}]}),e.setState({micList:n}),1===e.state.umMode?e.setState({showHandupBox:!1}):n.length===e.state.total?e.setState({showHandupBox:!1}):1===n.filter(function(t){return t.user_uid===e.state.uidSelf}).length?e.setState({showHandupBox:!1}):e.setState({showHandupBox:!0})):(e.state.isInMicList&&e.setState({handup:!1},function(){e.setState({isInMicList:!1})}),e.setState({showHandupBox:1!==e.state.umMode,showRadar:!1,rotate:!0,micListMock:[],micList:[],isInMicList:!1}))}),this.props.data){var l=this.props.data;try{this.setState({handup:!1,umMode:l.um_mode,creatorName:l.creator_name,showRadar:1===l.um_mode,total:l.um_user_total})}catch(s){}}}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updatePosition),this.setState=function(){},this.micOrderList.cancel()}},{key:"render",value:function(){return p.default.createElement("div",{id:"studentPage",ref:this.pageRef,className:h.default.studentPage,style:{display:this.state.showPage?"block":"none"}},1===this.state.umMode&&this.state.showRadar&&p.default.createElement("div",{className:h.default.radarBox},p.default.createElement("div",{className:this.state.rotate?h.default.sector+" "+h.default.sectorRotate:h.default.sector}),0===this.state.micList.length&&p.default.createElement("div",{className:h.default.camera}),this.state.images.map(function(e,t){return p.default.createElement("div",{style:{backgroundImage:"url("+e.icon+")",top:e.top+"px",left:e.left+"px"},key:e.id,className:h.default.icon+" "+h.default["icon"+(t+1)]})}),1===this.state.micListMock.length?this.state.micListMock.map(function(e){return p.default.createElement("div",{style:{backgroundImage:"url("+e.user_avatar_url+")"},className:h.default.avatar+" "+h.default.unique,key:e.user_uid})}):this.state.micListMock.map(function(e,t){return p.default.createElement("div",{style:{backgroundImage:"url("+e.user_avatar_url+")"},className:h.default.avatar+" "+h.default["avatar"+t],key:e.user_uid})})),!this.state.showSmallButton&&p.default.createElement("div",{id:"handupBox",ref:this.boxRef,className:this.state.showHandupBox?h.default.handupBox:h.default.handupBox+" "+h.default.handupBoxAnimation},p.default.createElement("div",{style:{backgroundImage:"url("+a(705)+")"},className:h.default.icon}),p.default.createElement("div",{className:h.default.textBox},p.default.createElement("div",{className:h.default.nickName},1===this.state.creatorIdentity?S.default.get("STUDENT_LAYER_TEACHER"):S.default.get("STUDENT_LAYER_TA")," "+this.state.creatorName),p.default.createElement("div",{className:h.default.mode},S.default.get("STUDENT_HANDS_NOW")+" ",p.default.createElement("span",null,0===this.state.umMode?S.default.get("STUDENT_HANDS_ASSIGN_INTERACTION"):S.default.get("STUDENT_HANDS_RANDOM_INTERACTION")))),p.default.createElement("div",{className:h.default.waveBox},p.default.createElement(_.default,{onClick:this.handleHandUp,disabled:this.state.disabled,className:h.default.hand,style:{padding:0}},this.state.handup?p.default.createElement("div",{className:h.default.cancel},S.default.get("STUDENT_HANDS_DOWN")):p.default.createElement("div",{className:h.default.up+" "+h.default.upDown})))),this.state.showSmallButton&&this.state.showHandupBox&&p.default.createElement(_.default,{onClick:this.handleHandUp,disabled:this.state.disabled,className:h.default.smallHand,style:{padding:0}},this.state.handup?p.default.createElement("div",{className:h.default.cancel},S.default.get("STUDENT_HANDS_DOWN")):p.default.createElement("div",{className:h.default.up+" "+h.default.upDown})),p.default.createElement("div",{style:{display:"none"}},this.imagesList.map(function(e){return p.default.createElement("img",{src:e.icon,key:e.id,alt:""})})))}}]),t}(p.Component);t.default=w},function(e,t,a){e.exports={studentPage:"student_studentPage__1v3sa",radarBox:"student_radarBox__3teXe",sector:"student_sector__2vUCI",sectorRotate:"student_sectorRotate__3fE69","radar-beam":"student_radar-beam__3LWS8",camera:"student_camera__1iIv-",avatar:"student_avatar__1VH7C",avatar0:"student_avatar0__2AtD8",avatar1:"student_avatar1__33ima",unique:"student_unique__1aMVc",icon:"student_icon__3BRTA",icon1:"student_icon1__7Eddk",icon2:"student_icon2__2aCR8",icon3:"student_icon3__3y1Sz",icon4:"student_icon4__31BSP",icon5:"student_icon5__3HhPd",handupBox:"student_handupBox__3BZKX",textBox:"student_textBox__KBXyE",nickName:"student_nickName__NlNuM",mode:"student_mode__26jep",waveBox:"student_waveBox__2Pfep","keyframes-wave":"student_keyframes-wave__1YoTJ",hand:"student_hand__2-bRe",cancel:"student_cancel__3cCXL",up:"student_up__v_0Kv",upDown:"student_upDown__2M1p9","up-down":"student_up-down__U6MHv",smallHand:"student_smallHand__SInls",handupBoxAnimation:"student_handupBoxAnimation__LdZ6Q"}},function(e,t,a){e.exports=a.p+"static/media/teacherIcon.759a0133.png"},function(e,t,a){var n=a(5);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(a(7)),i=n(a(8)),r=n(a(12)),l=n(a(13)),s=n(a(14)),u=n(a(0)),c=a(25),d=n(a(707)),f=n(a(28)),p=function(e){function t(e){var a;return(0,o.default)(this,t),(a=(0,r.default)(this,(0,l.default)(t).call(this,e))).divRef=u.default.createRef(),a.change=function(){a.setState({exceed:!0})},a.state={exceed:!1},a}return(0,s.default)(t,e),(0,i.default)(t,[{key:"componentDidMount",value:function(){this.divRef.current.scrollWidth>this.divRef.current.offsetWidth||!this.state.exceed&&this.change()}},{key:"componentDidUpdate",value:function(){this.divRef.current.scrollWidth>this.divRef.current.offsetWidth||!this.state.exceed&&this.change()}},{key:"render",value:function(){return this.state.exceed?u.default.createElement("span",{ref:this.divRef,className:d.default.chineseName},this.props.text):u.default.createElement("span",{ref:this.divRef,className:d.default.chineseNameOut},this.props.text)}}]),t}(u.default.Component),h=function(e){function t(e){var a;return(0,o.default)(this,t),(a=(0,r.default)(this,(0,l.default)(t).call(this,e))).debounce=function(e,t){var a=null;return function(){a&&clearTimeout(a),a=setTimeout(function(){e()},t)}},a.firstShow=function(){a.setState({show:!0}),setTimeout(function(){a.setState({add:!0}),a.audioRef.current.play()},520)},a.hide=function(){a.setState({show:!1})},a.click=function(){a.setState({add:!1},function(){setTimeout(function(){a.setState({add:!0})},20),a.audioRef.current.play()})},a.state={add:!1,show:!1,stuList:[],quizId:0,isSmall:/iPhone|Android/i.test(navigator.userAgent)},a.audioRef=u.default.createRef(),a}return(0,s.default)(t,e),(0,i.default)(t,[{key:"componentDidMount",value:function(){var e=this,t=null,a=[];c.api.listen("quizLikeNotify",function(n){e.state.quizId!=n.param.quizId&&(a=[],e.setState({stuList:[],quizId:n.param.quizId})),!t&&e.firstShow(),t&&e.click(),2===a.length?(a.shift(),a.push(n.param)):a.push(n.param),!t&&setTimeout(function(){e.setState({stuList:a})},520),t&&e.setState({stuList:a}),t&&clearTimeout(t),t=setTimeout(function(){e.setState({show:!1}),t=null},5e3)})}},{key:"render",value:function(){var e=f.default.getInitOptions().currentLocale;return u.default.createElement("div",{style:{display:this.state.show?"block":"none"},className:d.default.praiseBox+" "+(this.state.isSmall?d.default.smallScr:d.default.bigScr)},u.default.createElement("div",{className:d.default.bigPic}),u.default.createElement("div",{className:this.state.add?d.default.smallPic+" "+d.default.addAnimation:d.default.smallPic}),u.default.createElement("div",{className:this.state.isSmall?""+d.default.textBox:d.default.textBox},u.default.createElement("div",{className:d.default.textContent},this.state.stuList.map(function(t){return u.default.createElement("div",{className:d.default.item,key:t.uId},u.default.createElement("span",{className:d.default.text},u.default.createElement("img",{className:d.default.avatar,src:t.avatar?t.avatar:a(708),alt:""}),"zh-CN"===e?u.default.createElement(u.default.Fragment,null,u.default.createElement(p,{text:t.sName}),u.default.createElement("span",{style:{verticalAlign:"middle"}},"\u83b7\u5f97\u8868\u626c")):u.default.createElement("span",{style:{verticalAlign:"middle"}},"Praised ",t.sName)))}))),u.default.createElement("audio",{ref:this.audioRef},u.default.createElement("source",{src:a(709),type:"audio/mpeg"})))}}]),t}(u.default.Component);t.default=h},function(e,t,a){e.exports={praiseBox:"praiseLayer_praiseBox__2CtZ0",bigPic:"praiseLayer_bigPic__wX5E8","keyframes-big":"praiseLayer_keyframes-big__-AqRn",smallPic:"praiseLayer_smallPic__1e8Qe",addAnimation:"praiseLayer_addAnimation__1ySNa","keyframes-small":"praiseLayer_keyframes-small__27j1H",btn:"praiseLayer_btn__2S8E4",textBox:"praiseLayer_textBox__1zf1V",textContent:"praiseLayer_textContent__t27_F",item:"praiseLayer_item__DIwnu",text:"praiseLayer_text__3XQWT",avatar:"praiseLayer_avatar__382jr",smallTextBox:"praiseLayer_smallTextBox__1HLAF",bigScr:"praiseLayer_bigScr__2iL1K",smallScr:"praiseLayer_smallScr__1Bn46",chineseNameOut:"praiseLayer_chineseNameOut__1Wvnh",chineseName:"praiseLayer_chineseName__2zGK0"}},function(e,t,a){e.exports=a.p+"static/media/default.9ba94e88.svg"},function(e,t,a){e.exports=a.p+"static/media/likeBtn.4aa4ee8c.mp3"},function(e,t,a){var n=a(5);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(a(7)),i=n(a(8)),r=n(a(12)),l=n(a(13)),s=n(a(14)),u=n(a(0)),c=n(a(711)),d=a(16),f=a(25),p=function(e){function t(e){var a;return(0,o.default)(this,t),(a=(0,r.default)(this,(0,l.default)(t).call(this,e))).divRef=u.default.createRef(),a.change=function(){a.setState({exceed:!0})},a.state={exceed:!1},a}return(0,s.default)(t,e),(0,i.default)(t,[{key:"componentDidMount",value:function(){!this.state.exceed&&this.divRef.current.scrollWidth>this.divRef.current.offsetWidth&&this.change()}},{key:"componentDidUpdate",value:function(){!this.state.exceed&&this.divRef.current.scrollWidth>this.divRef.current.offsetWidth&&this.change()}},{key:"render",value:function(){return this.state.exceed?u.default.createElement("div",{ref:this.divRef,className:c.default.musicNameOut},u.default.createElement("p",{className:c.default.text},u.default.createElement("span",{className:c.default.scrollContent},this.props.text),u.default.createElement("span",{className:c.default.scrollContent},this.props.text))):u.default.createElement("div",{ref:this.divRef,className:c.default.musicName},this.props.text)}}]),t}(u.default.Component),h=function(e){function t(e){var a;return(0,o.default)(this,t),(a=(0,r.default)(this,(0,l.default)(t).call(this,e))).play=function(){f.api.request("audioFileResume").then(function(e){console.log("audioFileResume",(0,d.toJS)(e))})},a.pause=function(){f.api.request("audioFilePause").then(function(e){console.log("audioFilePause",(0,d.toJS)(e))})},a.close=function(){f.api.request("audioFileClose").then(function(e){console.log("audioFileClose",(0,d.toJS)(e))})},a.state={show:"0",playing:"1",showbtn:"1",filename:"",usrId:-1},a}return(0,s.default)(t,e),(0,i.default)(t,[{key:"componentDidMount",value:function(){var e=this;f.api.listen("audioFileUIParamNotify",function(t){try{"string"===typeof t.show&&e.setState({show:t.show,playing:t.playing,showbtn:t.showbtn,filename:t.filename},function(){"1"===e.state.show&&e.setState({usrId:t.usrId})})}catch(a){}}),f.api.listen("clsUserLeaveNotify",function(t){if(t.payload&&t.payload.length){var a=t.payload[0].usrId;"1"===e.state.show&&a===e.state.usrId&&e.setState({show:"0",playing:"1",showbtn:"1",filename:"",usrId:-1})}})}},{key:"render",value:function(){return u.default.createElement("div",{className:"1"===this.state.show?c.default.audioPlayBox+" "+c.default.audioPlayBoxMove:c.default.audioPlayBox,style:{display:(this.state.show,"block")}},u.default.createElement("div",{className:c.default.audioPlayContent},u.default.createElement("div",{className:c.default.musicBox},u.default.createElement("div",{className:"1"===this.state.playing?c.default.musicIcon+" "+c.default.musicRotate:c.default.musicIcon})),u.default.createElement("div",{className:c.default.textContent},u.default.createElement(p,{text:this.state.filename})),"1"===this.state.showbtn&&u.default.createElement("div",{className:c.default.controlBox},"1"===this.state.playing?u.default.createElement("div",{onClick:this.pause,className:c.default.pause+" "+c.default.controlIcon}):u.default.createElement("div",{onClick:this.play,className:c.default.play+" "+c.default.controlIcon}),u.default.createElement("div",{onClick:this.close,className:c.default.close+" "+c.default.controlIcon}))))}}]),t}(u.default.Component);t.default=h},function(e,t,a){e.exports={audioPlayBox:"audioPlayLayer_audioPlayBox__rFKZv",audioPlayContent:"audioPlayLayer_audioPlayContent__25wfA",musicBox:"audioPlayLayer_musicBox__i5kXB",musicIcon:"audioPlayLayer_musicIcon__133QC",musicRotate:"audioPlayLayer_musicRotate__1KWiT","rotate-music":"audioPlayLayer_rotate-music__385PW",textContent:"audioPlayLayer_textContent__3LVMU",musicName:"audioPlayLayer_musicName__WHETJ",musicNameOut:"audioPlayLayer_musicNameOut__3n8P9",text:"audioPlayLayer_text__14Pl8",todayScroll:"audioPlayLayer_todayScroll__2AknK",scrollContent:"audioPlayLayer_scrollContent__1Qh3k",controlBox:"audioPlayLayer_controlBox__1ypbU",controlIcon:"audioPlayLayer_controlIcon__3k4Fc",pause:"audioPlayLayer_pause__3TcIo",active:"audioPlayLayer_active__2uQXO",play:"audioPlayLayer_play__3pfxP",close:"audioPlayLayer_close__2cthD",audioPlayBoxMove:"audioPlayLayer_audioPlayBoxMove__3KgYB"}},function(e,t,a){e.exports={confirm:"confirm_confirm__8YRMG",light:"confirm_light__2B6Os",confirmInner:"confirm_confirmInner__1NkHY",content:"confirm_content__3Qs_3",buttonGroup:"confirm_buttonGroup__1cE3J",cancel:"confirm_cancel__3ZzDL",submit:"confirm_submit__1xXWo"}},function(e,t,a){e.exports=a.p+"static/media/caution_light@2x.c08c70ac.png"},function(e,t,a){e.exports=a.p+"static/media/caution@2x.e0f32b03.png"},function(e,t,a){var n=a(5);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(a(140)),i=n(a(38)),r=n(a(46)),l=n(a(41)),s=n(a(7)),u=n(a(8)),c=n(a(12)),d=n(a(13)),f=n(a(14)),p=n(a(0));a(716),a(717),a(190);var h=a(273),m=n(a(19)),g=a(16),_=a(25),E=n(a(52)),v={pencil:h.PencilStroke,pen:h.PresureStroke,signpen:h.GlowStroke,straight:h.StrightLine,square:h.RectStroke,circle:h.CircleStroke,erase:h.Erase,font:h.FontStroke},S=/Mobi|Android/i.test(navigator.userAgent),y=function(e){function t(e){var a;return(0,s.default)(this,t),(a=(0,c.default)(this,(0,d.default)(t).call(this,e))).CanvasLayersWraperRef=p.default.createRef(),a.editContainerRef=p.default.createRef(),a.textEditRef=p.default.createRef(),a.canvasRef=p.default.createRef(),a.canvasPaintedRef=p.default.createRef(),a.cursorRef=p.default.createRef(),a.time=(new Date).getTime(),a.isDrawing=!1,a.curLine=[],a.oldDraw=[],a.shapeCls=v,a.pressKeys=[],a.paintIndex=-1,a.canvasWidth=0,a.canvasHeight=0,a.isFontTyping=!1,a.canvasWebglPaintedRef=p.default.createRef(),a.diffHistoryHeadIndex=-1,a.diffLatestHeadIndex=-1,a.componentWillUnmount=function(){a.pauseRenderCursor()},a.loadWbData=E.default.debounce(function(e){_.api.request("wbReqData",{textBookId:m.default.book.bookId,page:m.default.book.curPage}).then(e)},500),a.interReactionWhenToolChange=function(e){a.setState({classNamesApplytoCanvasLayers:e?"canvasLayersNoPointerEvents":""})},a.reactionWhenToolChange=function(e){if(a.isToolIn("font")&&(a.isTransStarted||a.isBrushStarted)&&(a.hideInputComponent(a.curPaint),a.isTransStarted&&a.onTransEnd(),a.isBrushStarted&&a.onBrushEnd()),"newPage"!==e)if("redo"!==e)if("undo"!==e){if("color"!==e)if("operateOnCourse"!==e){if(a.setState({classNamesApplytoCanvasLayers:""}),"clearScreen"===e)return _.api.request("wbClearData",{textBookId:m.default.book.bookId,page:m.default.book.curPage}).then(function(){return console.log("\u6e05\u5c4f\u6210\u529f")}),a.oldDraw=[],m.default.book.diffHistory.set(""+(+m.default.book.curPage-1),[]),a.diffHistoryHeadIndex=a.diffLatestHeadIndex=-1,void a.redrawAll();"forbidden"===e&&(a.curLine=[],a.redrawAll(),m.default.Tool.interCoursewareSelected&&a.setState({classNamesApplytoCanvasLayers:"canvasLayersNoPointerEvents"})),a.toolSelected=e}else a.setState({classNamesApplytoCanvasLayers:"canvasLayersNoPointerEvents"})}else a.undoHistory();else a.redoHistory();else a.requestNewPage()},a.requestNewPage=E.default.debounce(function(){_.api.request("wbNewPageData",{textBookId:m.default.book.bookId,page:m.default.book.curPage,num:1}),m.default.book.curPage++,3!==m.default.Tool.role&&_.api.request("wbPageData",{textBookId:m.default.book.bookId,page:m.default.book.curPage})},500),a.WIEngineStatue="init",a.inkEngine=function(e){console.log("req engine",a.WIEngineStatue);var t=new Promise(function(n,o){if("init"===a.WIEngineStatue){e&&o(),a.$WIEngine=t,a.WIEngineStatue="wait";try{E.default.loadScript("./engine/PressurePenEngine.js",!0).then(function(){window.Module.addPostScript(function(){a.WIEngineStatue="loaded",n()})})}catch(i){o()}}else"loaded"===a.WIEngineStatue?n():"wait"===a.WIEngineStatue&&(e&&o(),a.$WIEngine.then(n).catch(o))});return t},a.initInkCanvas=function(){a.canvasWebglPaintedRef.current.width<=0||a.canvasWebglPaintedRef.current.height<=0||(a.inkCanvas=new window.Module.InkCanvas(a.canvasWebglPaintedRef.current,a.canvasWebglPaintedRef.current.width,a.canvasWebglPaintedRef.current.height))},a.onWBData=function(e){if(e.param.textBookId===m.default.book.bookId){var t=e.param.page-1,n=(e.payload||[]).sort(function(e,t){return e.time-t.time}).map(function(e){return(0,l.default)({},e.data||{},{svcId:e.svcId})}).filter(function(t){return!!t.tool||2===e.param.operate}),o=[],s=[];[1,3,5].includes(e.param.operate)&&(s=n.map(function(t){var n=new a.shapeCls[t.tool]([],{id:t.id,userId:t.uid,nickName:t.nickName});return n.magnify?n.magnify(t):(0,r.default)(n,t),3!==e.param.operate&&(n.mergeMethod="append"),n})),[2,3].includes(e.param.operate)&&(o=a.getPagePaints(e.param.page).filter(function(e){return n.map(function(e){return e.svcId}).includes(e.svcId)})),4===e.param.operate?(m.default.book.diffHistory.set(""+ +t,[]),a.diffHistoryHeadIndex=a.diffLatestHeadIndex=-1):(s&&s.length>0||o&&o.length>0)&&(a.savePaint(s,o,{page:e.param.page,notSend:!0}),s&&s.length>0&&a.assignSvcIds(s.map(function(e){return{id:e.id,svcId:e.svcId}}))),e.param.page===m.default.book.curPage&&(0===o.length&&s.length>0?(a.oldDraw=[].concat((0,i.default)(a.oldDraw),(0,i.default)(s)),a.drawNewPaint(s)):(a.oldDraw=a.getPagePaints(e.param.page),a.redrawAll()))}},a.getPagePaints=function(e){var t=[];return(m.default.book.diffHistory.get(""+(+e-1))||[]).forEach(function(e,n){+n<=a.diffHistoryHeadIndex&&(t=t.filter(function(t){return!e.del.map(function(e){return e.id}).includes(t.id)}),t=[].concat((0,i.default)(t),(0,i.default)(e.new)))}),t},a.redrawUp=function(e,t){a.ctx.setTransform(1,0,0,1,0,0),a.ctx.transform(m.default.book.scale,0,0,m.default.book.scale,0,0),a.clearCanvasUp(),e&&e.draw(a.ctx),e&&t&&e.drawController(a.ctx)},a.redrawAll=function(){a.ctxPainted.setTransform(1,0,0,1,0,0),a.ctxPainted.transform(m.default.book.scale,0,0,m.default.book.scale,0,0),a.clearCanvasUp(),a.clearCanvasDown(),a.inkCanvas&&a.inkCanvas.clear({top:0,left:0,width:a.canvasWebglPaintedRef.current.width,height:a.canvasWebglPaintedRef.current.height},window.Module.Color.TRANSPARENT),a.oldDraw.filter(function(e){return e!==a.curPaint&&e!==a.oriPaint}).forEach(function(e){e.draw(a.ctxPainted)})},a.drawNewPaint=function(e){a.ctxPainted.setTransform(1,0,0,1,0,0),a.ctxPainted.transform(m.default.book.scale,0,0,m.default.book.scale,0,0),e.filter(function(e){return e!==a.curPaint&&e!==a.oriPaint}).forEach(function(e){e.draw(a.ctxPainted)})},a.curPaint=null,a.oriPaint=null,a.hitPaint=null,a.animationId=null,a.cursorAnimationId=null,a.isTransStarted=!1,a.isBrushStarted=!1,a.lastButtons=0,a.cursorData={cursorShow:!1,cursorLeft:0,cursorTop:0,cursorRotate:0,cursorImg:""},a.syncDelay=200,a.delP=[],a.addP=[],a.realTimeSyncEnabled=!1,a.onBrushBegin=function(){a.isBrushStarted||a.isTransStarted||(a.isBrushStarted=!0,a.oriPaint=null,a.curPaint=new a.shapeCls[a.toolSelected](a.curLine,{color:m.default.Tool.selectColor}),a.isToolIn("erase")?a.delP=a.addP=[]:a.realTimeSyncEnabled&&a.savePaint(a.curPaint,[],{mergeMethod:"append"}))},a.onBrushUpdate=function(){a.oriPaint=a.curPaint.clone(),a.curPaint&&a.curPaint.update&&a.curPaint.update(a.curLine,{keys:a.pressKeys}),a.isToolIn("erase")?a.onErase():a.realTimeSyncEnabled&&a.curPaint&&a.oriPaint&&a.oriPaint.svcId>0&&a.savePaintThrottle(a.curPaint.clone(),a.oriPaint.clone(),{mergeMethod:"update"})},a.onBrushEnd=function(e){a.isBrushStarted=!1,a.isToolIn("erase")?(a._onErase(),a.delP&&a.delP.length>0&&a.savePaint([],a.delP.filter(function(e){return e.svcId>0}),(0,l.default)({},e,{mergeMethod:"append"})),a.addP&&a.addP.length>0&&a.savePaint(a.addP,[],(0,l.default)({},e,{mergeMethod:"append"}))):!a.curPaint||a.curPaint.isValid&&!a.curPaint.isValid()||a.isToolIn("erase")||(a.oldDraw.push(a.curPaint.clone()),a.drawNewPaint([a.curPaint.clone()]),a.realTimeSyncEnabled&&a.oriPaint&&a.oriPaint.svcId>0&&a.savePaintThrottle(a.curPaint.clone(),a.oriPaint.clone(),(0,l.default)({},e,{mergeMethod:"update"})),!a.realTimeSyncEnabled&&a.savePaint(a.curPaint.clone(),[],(0,l.default)({},e,{mergeMethod:"append"}))),a.curPaint=a.oriPaint=null},a.onTransBegin=function(e){!e||a.isTransStarted||a.isBrushStarted||(a.oriPaint=e,a.curPaint=a.oriPaint.clone(),a.isTransStarted=!0,a.redrawAll())},a.onTransUpdate=function(){!a.oriPaint||a.curPaint&&"font"===a.curPaint.tool&&a.curPaint.isEditting||(a.curPaint=a.oriPaint.transform(a.curLine,{keys:a.pressKeys}),a.realTimeSyncEnabled&&a.savePaintThrottle(a.curPaint.clone(),a.oriPaint.clone(),{mergeMethod:"update"}))},a.onTransEnd=function(e){a.oriPaint&&(a.realTimeSyncEnabled&&a.curPaint&&a.savePaintThrottle(a.curPaint.clone(),a.oriPaint.clone(),(0,l.default)({},e,{mergeMethod:"append"})),!a.realTimeSyncEnabled&&a.curPaint&&a.savePaint(a.curPaint.clone(),a.oriPaint.clone(),(0,l.default)({},e,{mergeMethod:"append"})),a.curPaint&&(a.oldDraw=[].concat((0,i.default)(a.oldDraw.filter(function(e){return e!==a.oriPaint})),[a.curPaint.clone()])),a.oriPaint=a.curPaint=null,a.isTransStarted=!1,a.redrawAll())},a._onErase=function(){if(a.curPaint instanceof h.Erase&&"erase"===a.curPaint.tool){var e=a.curPaint,t=!1,n=[],o=[];a.oldDraw.forEach(function(a){var r=!1;if(a.userId===m.default.Tool.userId||1===m.default.Tool.role||2===m.default.Tool.role){if("whole"===e.mode)r=!!e.intersectPaint(a);else if("part"===e.mode)if("square"===a.tool){var l=e.crossRect(a);r=!!l,l&&l.length>0&&(n=[].concat((0,i.default)(n),(0,i.default)(l)))}else if("straight"===a.tool){var s=e.crossLine(a);r=!!s,s&&s.length>0&&(n=[].concat((0,i.default)(n),(0,i.default)(s)))}else if("pencil"===a.tool||"signpen"===a.tool){var u=e.crossCurve(a);r=!!u,u&&u.length>0&&(n=[].concat((0,i.default)(n),(0,i.default)(u)))}else if("circle"===a.tool){var c=e.crossCircle(a);r=!!c,c&&c.length>0&&(n=[].concat((0,i.default)(n),(0,i.default)(c)))}else r=!!e.intersectPaint(a);r&&o.push(a),t=r||t}}),a.curPaint.updateHitTestIndex(),t&&((n.length>0||o.length>0)&&(a.oldDraw=[].concat((0,i.default)(a.oldDraw.filter(function(e){return!o.includes(e)})),(0,i.default)(n))),a.redrawAll(),a.delP=[].concat((0,i.default)(a.delP),o),a.addP=[].concat((0,i.default)(a.addP),(0,i.default)(n)).filter(function(e){return!a.delP.map(function(e){return e.id}).includes(e.id)}),console.log("onErase",a.delP.map(function(e){return e.svcId}),a.addP))}},a.onErase=E.default._throttle(a._onErase,100),a._onLeave=function(e){a.cursorData.cursorShow=!1,a.pointerId===e.pointerId&&a._onUp(e),a.setState({cursorShow:!1}),setTimeout(function(){a.setState({showTooltip:!1})},200)},a._onEnter=function(e){},a.pointerId=void 0,a._onDown=function(e){if(void 0===a.pointerId&&(a.pointerId=e.pointerId),a.lastButtons=e.buttons,!a.isToolIn("forbidden")){var t=a._getOffsetXY(e),n=t.x,o=t.y,i=a._getHitPaint(n,o),r=i.isHitPaint,l=i.hitPaint;a.curLine=[{x:n,y:o,p:Math.abs(e.pressure)||.5}],a.isToolIn("pencil","pen","signpen","erase")?a.onBrushBegin():a.isToolIn("straight","square","circle","font")?a.isToolIn("font")&&(a.isTransStarted||a.isBrushStarted)?(a.hideInputComponent(a.curPaint),a.isTransStarted&&a.onTransEnd(),a.isBrushStarted&&a.onBrushEnd()):!a.isToolIn("font")||a.isTransStarted||a.isBrushStarted||r&&(!r||"font"===l.tool)?!r||a.toolSelected!==l.tool||a.isTransStarted||a.isBrushStarted?a.isToolIn("font")||a.onBrushBegin():a.onTransBegin(l):(a.onBrushBegin(),a.showInputComponent(a.curPaint)):"transform"===a.toolSelected&&r&&a.onTransBegin(l),a.animationId=window.requestAnimationFrame(a.renderCanvas)}},a._onMove=function(e){if(!a.pointerId||a.pointerId===e.pointerId)if(1!==e.buttons||0!==a.lastButtons||a.isTransStarted||a.isBrushStarted){a.lastButtons=e.buttons;var t=a._getOffsetXY(e),n=t.x,o=t.y,i=a._getHitPaint(n,o),r=i.isHitPaint,l=i.hitPaint;a.isToolIn("forbidden")||a.curLine.push({x:n,y:o,p:Math.abs(e.pressure)||.5}),a.isToolIn("pencil","pen","signpen","erase")&&a.isBrushStarted&&a.onBrushUpdate(),a.isToolIn("straight","square","circle","font","transform")&&(!a.isToolIn("font")&&a.isBrushStarted&&a.onBrushUpdate(),a.isTransStarted&&a.onTransUpdate()),a.onCursorUpdate(e,n,o,r,l),a._onHoverPaint(n,o,r,l)}else a._onDown(e)},a._onUp=function(e){if(a.pointerId===e.pointerId&&(a.pointerId=void 0),a.lastButtons=0,!a.isToolIn("forbidden")){var t=a._getOffsetXY(e),n=t.x,o=t.y;if(a.curLine.push({x:n,y:o,p:Math.abs(e.pressure)||.5}),a.isToolIn("pencil","pen","signpen","erase")&&(a.onBrushEnd(),a.redrawAll()),a.isToolIn("straight","square","circle","transform")&&(a.isBrushStarted&&a.onBrushEnd(),a.isTransStarted&&a.onTransEnd(),a.redrawAll()),"font"===a.toolSelected){a.isTransStarted&&a.onTransEnd();var i=a._getHitPaint(n,o),r=i.isHitPaint,l=i.hitPaint;if(r&&"font"===l.tool){var s=+(new Date).getTime();l.lastClickTime<s-500?l.lastClickTime=s:(a.onTransBegin(l),a.showInputComponent(a.curPaint),a.redrawAll())}}window.cancelAnimationFrame(a.animationId),a.animationId=null}},a._onInput=function(e){a.updateFontText(a.curPaint),a.realTimeSyncEnabled&&a.curPaint&&0!==a.curPaint.svcId&&(a.oriPaint=a.curPaint.clone(),(a.isBrushStarted||a.isTransStarted)&&a.savePaint(a.curPaint.clone(),a.oriPaint.clone(),{mergeMethod:"update"}))},a._onHoverPaint=E.default._debounce(function(e,t,n,o){var i="",r=!1;a.oldDraw.forEach(function(e){r=r||e.isHover!==!(e!==o),a.isToolIn("erase")&&(e.isHover=!(e!==o));var t=m.default.Tool.nickName===e.nickName;e===o&&!t&&(i=e.nickName+"")}),a.isToolIn("erase")&&r&&a.redrawAll(),a.setState({showTooltip:n,tooltipLeft:e*m.default.book.scale,tooltipTop:t*m.default.book.scale,author:n?i:""})},200),a.onCursorUpdate=function(e,t,n,o,i){var l=m.default.Tool.cursor[a.toolSelected].cursor,s=0;o&&i&&a.isToolIn("straight","square","circle","transform","font")&&a.isToolIn(i.tool,"transform")?(a.hitPaint=i,!a.isTransStarted&&a.redrawUp(a.hitPaint,!0),l=i.getCursorType?m.default.Tool.cursor[i.getCursorType(t,n)].cursor:m.default.Tool.cursor.transform.cursor,s=i.getDegrees?i.getDegrees():0):(a.hitPaint=null,!a.isTransStarted&&!a.isBrushStarted&&a.clearCanvasUp()),(0,r.default)(a.cursorData,{cursorShow:e.target===a.canvasRef.current,cursorLeft:t*m.default.book.scale-36,cursorTop:n*m.default.book.scale-36,cursorRotate:s,cursorImg:l})},a.isToolIn=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.includes(a.toolSelected)},a._getHitPaint=function(e,t){var n;return{isHitPaint:!!(n=a.oldDraw.find(function(a){return a.hitCheck(e,t)||a.hitController&&a.hitController(e,t)})),hitPaint:n}},a._getOffsetXY=function(e){var t=a.canvasRef.current.getBoundingClientRect(),n=t.left,o=t.top,i=void 0!==e.nativeEvent.offsetX?e.nativeEvent.offsetX:e.nativeEvent.clientX-n,r=void 0!==e.nativeEvent.offsetY?e.nativeEvent.offsetY:e.nativeEvent.clientY-o;return{x:i/m.default.book.scale,y:r/m.default.book.scale}},a.renderCanvas=function(e){a.curPaint&&"font"===a.curPaint.tool&&a.curPaint.isEditting||a.curPaint&&a.redrawUp(a.curPaint,a.isTransStarted),!a.animationId&&console.log("anim frame start"),a.animationId=window.requestAnimationFrame(a.renderCanvas)},a.renderCursor=function(){a.setState(a.cursorData),!a.cursorAnimationId&&console.log("anim cursor start"),a.cursorAnimationId=window.requestAnimationFrame(a.renderCursor)},a.pauseRenderCursor=function(){window.cancelAnimationFrame(a.cursorAnimationId),a.cursorAnimationId=null,console.log("anim cursor end",a.cursorAnimationId)},a.showInputComponent=function(e){a.setState({editContainerShow:!0},function(){setTimeout(function(){a.textEditRef.current.focus()},0),!e.svcId&&(e.fontSize=m.default.Tool.prompt.fontSize.value),a.textEditRef.current.innerHTML=e.content;var t=a.canvasRef.current,n=t.currentStyle||window.getComputedStyle(t);a.textEditRef.current.style.left=parseFloat(n.marginLeft)+e.x0*m.default.book.scale-2+"px",a.textEditRef.current.style.top=parseFloat(n.marginTop)+e.y0*m.default.book.scale-2+"px",a.textEditRef.current.style.color=e.color,a.textEditRef.current.style.fontSize=e.fontSize*m.default.book.scale+"px",a.textEditRef.current.style.width=e.width*m.default.book.scale*1.05+"px",a.textEditRef.current.style.maxHeight=m.default.book.height-e.y0*m.default.book.scale+"px",a.textEditRef.current.style.maxWidth=m.default.book.width-e.x0*m.default.book.scale+"px",a.textEditRef.current.style.minWidth=Math.min(e.minWidth*m.default.book.scale*1.05,m.default.book.width-e.x0*m.default.book.scale)+"px"}),e.isEditting=!0},a.html2Escape=function(e){return(navigator.platform.includes("Win")?e.replace(/(\n\n)+/g,"\n"):e).replace(/[<>&"]/g,function(e){return{"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;"}[e]})},a.updateFontText=function(e){e.oldContent=e.content,e.content=a.html2Escape(a.textEditRef.current.innerText),e.updateHeight(a.textEditRef.current.clientHeight),a.textEditRef.current.style.width=(e.getTextSize().width+2*e.fontSize)*m.default.book.scale*1.05+4+"px"},a.hideInputComponent=function(e){a.updateFontText(e),e.updateSize(a.textEditRef.current.clientWidth,a.textEditRef.current.clientHeight),e.isEditting=!1,a.setState({editContainerShow:!1})},a.duplicate=function(){if("transform"===a.toolSelected&&a.paintSelected){var e=a.paintSelected.transform([{x:0,y:0},{x:5,y:5}]);a.savePaint(e),a.oldDraw.push(e),a.paintIndex=a.oldDraw.length-1,a.paintSelected=e.clone(),a.redrawAll(),a.redrawUp(a.paintSelected,!0)}},a.deletePaint=function(){a.hitPaint&&(a.savePaint([],a.hitPaint),a.oldDraw=a.getPagePaints(m.default.book.curPage),a.redrawAll())},a.curlineAppend=function(e){var t=a.canvasRef.current.getBoundingClientRect(),n=t.left,o=t.top,i=void 0!==e.nativeEvent.offsetX?e.nativeEvent.offsetX:e.nativeEvent.clientX-n,r=void 0!==e.nativeEvent.offsetY?e.nativeEvent.offsetY:e.nativeEvent.clientY-o,l={x:i/m.default.book.scale,y:r/m.default.book.scale},s=l.x,u=l.y;a.curLine.push({x:s,y:u,p:-1===e.pressure?.5:e.pressure})},a.onWindowKeyDown=function(e){m.default.home.isMac?(!a.pressKeys.some(function(t){return t===e.key})&&a.pressKeys.push(e.key),console.log(a.pressKeys),["Meta","y"].every(function(e){return a.pressKeys.includes(e)})&&a.redoHistory(),["Meta","z"].every(function(e){return a.pressKeys.includes(e)})&&a.undoHistory(),a.pressKeys.includes("Backspace")&&a.deletePaint()):a.pressKeys.some(function(t){return t===e.key})||(a.pressKeys.push(e.key),["Control","y"].every(function(e){return a.pressKeys.includes(e)})&&a.redoHistory(),["Control","z"].every(function(e){return a.pressKeys.includes(e)})&&a.undoHistory(),a.pressKeys.includes("Delete")&&a.deletePaint())},a.onWindowKeyUp=function(e){m.default.home.isMac?a.pressKeys=[]:a.pressKeys.some(function(t){return t===e.key})&&(a.pressKeys=a.pressKeys.filter(function(t){return t!==e.key}))},a.diffTargetIndex=0,a.diffSourceIndex=0,a.savePaint=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,o=n&&n.page||m.default.book.curPage,i=n&&n.keepHeadIndex||!1;!m.default.book.diffHistory.has(""+(+o-1))&&m.default.book.diffHistory.set(""+(+o-1),[]);var l={new:e?a.beArray(e).map(function(e){var t=e.clone();return t.isHover=!1,t}):[],del:t?a.beArray(t).map(function(e){var t=e.clone();return t.isHover=!1,t}):[]},s=(0,g.toJS)(m.default.book.diffHistory)[""+(+o-1)],u=n&&n.mergeMethod||(l.new.find(function(e){return!!e.mergeMethod})||{}).mergeMethod||"append";"append"===u?(i||m.default.book.curPage!==o||(a.diffHistoryHeadIndex>=-1&&a.diffHistoryHeadIndex<s.length-1&&s.splice(a.diffHistoryHeadIndex+1),a.diffHistoryHeadIndex=a.diffLatestHeadIndex=s?s.length:0),0===s.length?s=[l]:s.push(l)):"update"===u&&l.new.forEach(function(e){var t=s.reverse().find(function(t){return t.new.map(function(e){return e.id}).includes(e.id)});t&&(0,r.default)(t.new.find(function(t){return t.id===e.id}),e,{mergeMethod:"update"})}),m.default.book.diffHistory.set(""+(+o-1),s),console.log("Head "+a.diffHistoryHeadIndex+", Latest "+a.diffLatestHeadIndex),n&&n.notSend||(l.new.length>0&&0===l.del.length?a.sendNewPaint(l.new,o):0===l.new.length&&l.del.length>0?a.sendDelPaint(l.del,o):l.new.length>0&&l.del.length>0&&a.beArray(l.new).every(function(e){return 0!==e.svcId})&&a.sendEditPaint(l.new.map(function(e){return e.mergeMethod=u,e}),o))},a.savePaintThrottle=E.default._throttleLast(a.savePaint,a.syncDelay),a.appendDiff=function(){},a.assignDiff=function(){},a.sendNewPaint=function(e,t){e.length>0&&_.api.request("wbAddData",{textBookId:m.default.book.bookId,page:t||m.default.book.curPage,payload:a.beArray(e).map(function(e,t){return{id:t+1,data:e.minify?e.minify():e}})}).then(function(t){a.assignSvcIds(t.payload.map(function(t){return{id:e.map(function(e){return e.id})[t.id-1],svcId:t.svcId}}))}).catch(function(t){console.error("\u767d\u677f\u7b14\u8ff9add\u64cd\u4f5c\u5931\u8d25",t),1376263===t.statusCode&&(console.error("\u7b14\u8ff9\u8d85\u5927"),a.oldDraw=a.oldDraw.filter(function(t){return!a.beArray(e).some(function(e){return e.id===t.id})}),a.redrawAll())})},a.sendDelPaint=function(e,t){e.length>0&&_.api.request("wbDelData",{textBookId:m.default.book.bookId,page:t||m.default.book.curPage,payload:a.beArray(e).map(function(e){return e.svcId||null}).filter(function(e){return e})}).catch(function(e){return console.error("\u767d\u677f\u7b14\u8ff9delete\u64cd\u4f5c\u5931\u8d25",e)})},a.sendEditPaint=function(e,t){e.length>0&&_.api.request("wbEditData",{textBookId:m.default.book.bookId,page:t||m.default.book.curPage,payload:a.beArray(e).map(function(e){return{svcId:e.svcId,data:e.minify?e.minify():e}})}).catch(function(e){return console.error("\u767d\u677f\u7b14\u8ff9edit\u64cd\u4f5c\u5931\u8d25",e)})},a.undoHistory=function(){if(a.diffHistoryHeadIndex>=0){var e=m.default.book.curPage,t=(m.default.book.diffHistory.get(""+(+e-1))||[])[a.diffHistoryHeadIndex]||null;if(!t)return;a.diffHistoryHeadIndex--,a.savePaint(t.del,t.new,{keepHeadIndex:!0,mergeMethod:"append"}),a.oldDraw=a.getPagePaints(e),a.redrawAll()}},a.redoHistory=function(){var e=m.default.book.curPage;if(a.diffHistoryHeadIndex<a.diffLatestHeadIndex){var t=(m.default.book.diffHistory.get(""+(+e-1))||[])[a.diffHistoryHeadIndex+1]||null;if(!t)return;a.diffHistoryHeadIndex++,a.savePaint(t.new,t.del,{keepHeadIndex:!0,mergeMethod:"append"}),a.oldDraw=a.getPagePaints(e),a.redrawAll()}},a.export=function(){try{var e=document.createElement("canvas");e.width=a.canvasRef.current.width,e.height=a.canvasRef.current.height;var t=e.getContext("2d");return t&&t.drawImage(a.canvasWebglPaintedRef.current,0,0),t&&t.drawImage(a.canvasPaintedRef.current,0,0),t&&t.drawImage(a.canvasRef.current,0,0),e.toDataURL()}catch(n){return!1}},a.toolSelected="pencil",a.penShape={pencil:"icon-tool_cursor_pencil_nib",pen:"icon-tool_cursor_brush_nib",signpen:"icon-tool_cursor_marker_nib"},a.textPointArr=[],a.state={editContainerShow:!1,left:0,top:0,width:0,author:"",showTooltip:!1,tooltipLeft:0,tooltipTop:0,cursorShow:!1,cursorLeft:0,cursorTop:0,cursorRotate:0,canvasLeft:0,canvasTop:0,cursorImg:"",classNamesApplytoCanvasLayers:""},a}return(0,f.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){var e=this;this.ctx=this.canvasRef.current.getContext("2d"),this.ctxPainted=this.canvasPaintedRef.current.getContext("2d"),document.addEventListener("keydown",this.onWindowKeyDown,!1),document.addEventListener("keyup",this.onWindowKeyUp,!1),document.addEventListener("pointerleave",this._onLeave),(0,g.reaction)(function(){return m.default.book.bookUrl},function(t){m.default.book.diffHistory.clear(),m.default.book.curPage&&e.loadWbData(function(t){e.clearCanvasDown(),e.clearCanvasUp(),e.onWBData(t)}),e.pointerId=void 0}),(0,g.reaction)(function(){return{width:m.default.book.width,height:m.default.book.height,ctrWidth:m.default.home.ctrWidth,ctrHeight:m.default.home.ctrHeight}},function(t){setTimeout(function(){e.canvasWebglPaintedRef.current.width=+t.width,e.canvasWebglPaintedRef.current.height=+t.height,e.canvasPaintedRef.current.width=+t.width,e.canvasPaintedRef.current.height=+t.height,e.canvasRef.current.width=+t.width,e.canvasRef.current.height=+t.height,e.redrawAll()},0),e.setState({canvasLeft:(t.ctrWidth-t.width)/2,canvasTop:(t.ctrHeight-t.height)/2})}),m.default.book.curPage&&this.loadWbData(this.onWBData),(0,g.observe)(m.default.book,"curPage",function(t){var a=t.newValue,n=t.oldValue;if(!a)return null;(e.isTransStarted||e.isBrushStarted)&&(e.isToolIn("font")&&e.hideInputComponent(e.curPaint),e.isTransStarted&&e.onTransEnd({page:n}),e.isBrushStarted&&e.onBrushEnd({page:n})),m.default.book.diffHistory.has(""+(+a-1))||m.default.book.diffHistory.set(""+(+a-1),[]);var o=m.default.book.diffHistory.get(""+(+a-1));e.diffHistoryHeadIndex=e.diffLatestHeadIndex=o?o.length-1:-1,e.oldDraw=e.getPagePaints(a),e.redrawAll(),-1===e.diffHistoryHeadIndex&&e.loadWbData(e.onWBData),e.pointerId=void 0}),(0,g.reaction)(function(){return(0,g.toJS)(m.default.book.vPages)},function(t){t.forEach(function(e){var t=m.default.book.diffHistory.has(""+(+e-1))&&m.default.book.diffHistory.get(""+(+e-1));if(t&&t.length)for(var a=(0,i.default)(m.default.book.diffHistory.keys()),n=0;n<a.length;n++){var o=a[n];+o>=+e-1&&m.default.book.diffHistory.delete(""+ +o)}}),t.includes(m.default.book.curPage)&&(e.oldDraw=[],e.redrawAll())}),(0,g.reaction)(function(){return m.default.Tool.toolSelected},this.reactionWhenToolChange),(0,g.reaction)(function(){return m.default.Tool.interCoursewareSelected},this.interReactionWhenToolChange),this.reactionWhenToolChange(m.default.Tool.toolSelected),(0,g.reaction)(function(){return m.default.book.exportImage.get("wbImage")},function(t){""===t&&m.default.book.exportImage.set("wbImage",e.export())}),(0,g.reaction)(function(){return m.default.Tool.prompt.fontSize.value},function(t){if(e.curPaint&&"font"===e.curPaint.tool){var a=e.curPaint;a.fontSize=t,e.textEditRef.current.style.fontSize=a.fontSize*m.default.book.scale+"px",e.updateFontText(a)}}),!_.api.isListen("wbDataNotify")&&_.api.listen("wbDataNotify",this.onWBData),!_.api.isListen("wbToggleCursorNotify")&&_.api.listen("wbToggleCursorNotify",function(t){e.CanvasLayersWraperRef.current.style.cursor=t.param&&void 0!==t.param.show?t.param.show?"default":"none":"default"===e.CanvasLayersWraperRef.current.style.cursor?"none":"default"}),this.renderCursor()}},{key:"clearCanvasUp",value:function(){this.ctx.clearRect(0,0,this.canvasRef.current.width/m.default.book.scale,this.canvasRef.current.height/m.default.book.scale)}},{key:"clearCanvasDown",value:function(){this.ctxPainted.clearRect(0,0,this.canvasPaintedRef.current.width/m.default.book.scale,this.canvasPaintedRef.current.height/m.default.book.scale)}},{key:"beArray",value:function(e){return((0,g.isObservable)(e)?(0,g.isObservableArray)(e):Array.isArray(e))?e:[e]}},{key:"assignSvcIds",value:function(e){var t=this,a={};Object.assign.apply(Object,[a].concat((0,i.default)(e.map(function(e){return(0,o.default)({},e.id,e.svcId)})))),this.curPaint&&this.curPaint.id in a&&this.curPaint.assign({svcId:a[this.curPaint.id]}),this.oldDraw.forEach(function(e){if(e.id in a){var n=e.svcId!==a[e.id];e.assign({svcId:a[e.id]});var o=e.clone();(0,r.default)(o,{mergeMethod:"update"}),t.realTimeSyncEnabled&&n&&t.savePaint([o],[o],{mergeMethod:"update"})}}),m.default.book.diffHistory.forEach(function(e,t){(m.default.book.diffHistory.get(t)||[]).forEach(function(e){[].concat((0,i.default)(e.new),(0,i.default)(e.del)).forEach(function(e){e.id in a&&e.assign({svcId:a[e.id]})}),e.new=e.new.slice()})})}},{key:"render",value:function(){return p.default.createElement("div",{id:"CanvasLayersWraper","touch-action":"none",onPointerMove:this._onMove,onPointerDown:this._onDown,onPointerUp:this._onUp,onPointerLeave:this._onLeave,onPointerEnter:this._onEnter,ref:this.CanvasLayersWraperRef,className:this.state.classNamesApplytoCanvasLayers},p.default.createElement("canvas",{className:"canvas-stroke","touch-action":"none",width:"0",height:"0",ref:this.canvasRef}),p.default.createElement("canvas",{className:"canvas-stroke canvas-painted","touch-action":"none",width:"0",height:"0",ref:this.canvasPaintedRef}),p.default.createElement("canvas",{className:"canvas-stroke canvas-painted","touch-action":"none",width:"0",height:"0",ref:this.canvasWebglPaintedRef}),!S&&p.default.createElement("div",{className:"tooltip "+(this.state.showTooltip&&this.state.author?"show":"hidden"),style:{left:this.state.tooltipLeft+this.state.canvasLeft,top:this.state.tooltipTop+this.state.canvasTop}},p.default.createElement("div",{className:"tooltip-content"},p.default.createElement("span",null,this.state.author)),p.default.createElement("div",{className:"tooltip-arrow"})),p.default.createElement("div",{className:"pencil-cursor",ref:this.cursorRef,style:{transform:"translate(\n            "+(this.state.cursorLeft+this.state.canvasLeft)+"px,\n            "+(this.state.cursorTop+this.state.canvasTop)+"px\n            )\n            rotate("+this.state.cursorRotate+"deg)",display:this.state.cursorShow?"block":"none",background:this.state.cursorImg}},["pencil","pen","signpen"].includes(this.toolSelected)&&p.default.createElement("i",{style:{color:m.default.Tool.selectColor},className:"pen-shape "+this.penShape[this.toolSelected]})),this.state.editContainerShow&&p.default.createElement("div",{tabIndex:-1,contentEditable:!0,id:"textEdit","touch-action":"none",ref:this.textEditRef,onPointerDown:function(e){e.stopPropagation()},onPointerUp:function(e){e.stopPropagation()},onInput:this._onInput,spellCheck:!1}))}}]),t}(p.default.Component);t.default=y},function(e,t,a){},function(e,t,a){},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(e){return parseInt(e,16)},n=function(e,t){var a,n=e.r,o=e.g,i=e.b,r=e.a;return"rgba("+n+", "+o+", "+i+", "+(a=t,!isNaN(parseFloat(a))&&isFinite(a)?t:r)+")"},o=function(e,t){var o=function(e){var t=e.r,n=e.g,o=e.b,i=e.a;return{r:a(t),g:a(n),b:a(o),a:+(a(i)/255).toFixed(2)}}(function(e){var t=3===e.length||4===e.length;return{r:t?""+e.slice(0,1)+e.slice(0,1):e.slice(0,2),g:t?""+e.slice(1,2)+e.slice(1,2):e.slice(2,4),b:t?""+e.slice(2,3)+e.slice(2,3):e.slice(4,6),a:(t?""+e.slice(3,4)+e.slice(3,4):e.slice(6,8))||"ff"}}(function(e){return"#"===e.charAt(0)?e.slice(1):e}(e)));return n(o,t)};t.default=o},function(e,t,a){var n=a(5);Object.defineProperty(t,"__esModule",{value:!0}),t.PresureStroke=void 0;var o=n(a(46)),i=n(a(7)),r=n(a(8)),l=n(a(12)),s=n(a(13)),u=n(a(81)),c=n(a(14)),d=n(a(19)),f=a(85),p=a(276),h=function(e){function t(e,a){var n;return(0,i.default)(this,t),(n=(0,l.default)(this,(0,s.default)(t).call(this,e,a))).userId=d.default.Tool.userId,n.nickName=d.default.Tool.nickName,n.tool="pen",n.buildPath=function(e){try{n.pathBuilder||(n.pathBuilder=new window.Module.PressurePathBuilder,n.pathBuilder.setNormalizationConfig(.4,.88),n.pathBuilder.setPropertyConfig(window.Module.PropertyName.Width,1,d.default.Tool.prompt.paintBrush.option[1].value,1,NaN,window.Module.PropertyFunction.Sigmoid,.7,!1)),!n.smoothener&&(n.smoothener=new window.Module.MultiChannelSmoothener(n.pathBuilder.stride)),n.inputPhase==window.Module.InputPhase.Begin&&n.smoothener.reset();var t=n.pathBuilder.addPoint(n.inputPhase,e,Math.sqrt(e.p)),a=n.smoothener.smooth(t,n.inputPhase==window.Module.InputPhase.End),o=n.pathBuilder.addPathPart(a).getPath();n.path=window.Module.readFloats(o.points)}catch(i){console.log("TCL: buildPath -> error",i)}},n.drawPath=function(e,t){try{n.strokeRenderer=new window.Module.StrokeRenderer(e,e);var a=(0,p.hexToRgb)(n.color),o=a.r,i=a.g,r=a.b;n.strokeRenderer.configure({brush:new window.Module.DirectBrush,color:window.Module.Color.from(o,i,r)});var l=(n.path||[]).slice().map(function(e,t){return e*(t%3<2?d.default.book.scale:1)}),s=window.Module.PathBuilder.createPath(new Float32Array(l),3);s.points&&s.points.length>0&&n.strokeRenderer.draw(s,!0)}catch(u){console.error("\u538b\u611f\u7b14 drawPath \u9519\u8bef\uff0c\u5c1d\u8bd5\u4f7f\u7528\u666e\u901a\u753b\u7b14",u),n.draw(t)}},n.updateLine=function(e,t){n._updateLine(e);try{n.path=new Float32Array([]),n.inputPhase=window.Module.InputPhase.Begin,e&&e.length>0&&n.buildPath(e[0]),n.inputPhase=window.Module.InputPhase.Move,e.slice(1,e.length-1).forEach(function(e){n.buildPath(e)}),n.inputPhase=window.Module.InputPhase.End,e&&e.length>1&&n.buildPath(e[e.length-1])}catch(a){console.log("TCL: updateLine -> error",a)}},n.update=n.updateLine,n.clone=function(e){var t=n.getNewInstance(e);return t.line=JSON.parse(JSON.stringify(n.line)),t.color=n.color,t.width=n.width,n.path&&(t.path=new Float32Array(Object.values(n.path)).slice()),t.tool=n.tool,t.svcId=e?0:n.svcId,t.userId=n.userId,t.nickName=n.nickName,t.mergeMethod=n.mergeMethod,t},n.magnify=function(e){var t=[];if(e.line.every(function(e){return"string"===typeof e}))for(;e.line.length>0;)t.push(e.line.splice(0,10));(0,o.default)((0,u.default)(n),e,{line:t.map(function(e){return e.map(function(e){return parseFloat(e)})}).map(function(e){return{x0:e[0],y0:e[1],x1:e[2],y1:e[3],cp1x:e[4],cp1y:e[5],cp2x:e[6],cp2y:e[7],ps0:e[8],ps1:e[9]}}),path:e.path&&new Float32Array(Object.values(e.path))})},n.transform=function(e,t){var a=e[e.length-1].x-e[0].x,o=e[e.length-1].y-e[0].y,i=n.clone(t&&t.newId);return i.line.forEach(function(e){["x0","x1","cp1x","cp2x"].forEach(function(t){e[t]+=a}),["y0","y1","cp1y","cp2y"].forEach(function(t){e[t]+=o})}),i.path=i.path.map(function(e,t){switch(t%3){case 0:return e+a;case 1:return e+o;default:return e}}),i},n.width=d.default.Tool.prompt.paintBrush.option[1].value||2.5,n}return(0,c.default)(t,e),(0,r.default)(t,[{key:"getNewInstance",value:function(e){return new t([],e?{}:{id:this.id})}},{key:"draw",value:function(e){var t=this;arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.line.forEach(function(a,n){e.beginPath(),e.strokeStyle=t.color||"",e.lineCap="round";var o=Math.pow(Math.E,-9*((a.ps0+a.ps1)/2-.5));e.lineWidth=1/(o+1)*t.width/d.default.book.scale,e.moveTo(a.x0,a.y0),e.bezierCurveTo(a.cp1x,a.cp1y,a.cp2x,a.cp2y,a.x1,a.y1),e.stroke()})}}]),t}(f.PencilStroke);t.PresureStroke=h},function(e,t,a){var n=a(5);Object.defineProperty(t,"__esModule",{value:!0}),t.CircleStroke=void 0;var o=n(a(7)),i=n(a(8)),r=n(a(12)),l=n(a(13)),s=n(a(14)),u=a(277),c=a(85),d=n(a(19)),f=function(e){function t(){var e,a;(0,o.default)(this,t);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(a=(0,r.default)(this,(e=(0,l.default)(t)).call.apply(e,[this].concat(i)))).tool="circle",a.getNewInstance=function(e){return new t([],e?{}:{id:a.id})},a.hitCheck=function(e,t){var n=a.pointRotated(e,t,!0),o=n.x,i=n.y;return Math.abs(a.normalDistance(o,i)-(a.x1-a.x0)/2)<10/d.default.book.scale},a.intersectCheck=function(e,t,n,o){var i=a.normalDistance(e,t),r=a.normalDistance(n,o),l=Math.abs((a.x1-a.x0)/2);return(i-l)*(r-l)<0||a.hitCheck(e,t)||a.hitCheck(n,o)},a}return(0,s.default)(t,e),(0,i.default)(t,[{key:"draw",value:function(e){e.beginPath(),e.lineWidth=this.width,e.lineCap="round",e.strokeStyle=this.color||"#fff";var t=Math.abs(this.x1-this.x0)/2,a=Math.abs(this.y1-this.y0)/2;e.ellipse((this.x1+this.x0)/2,(this.y1+this.y0)/2,Math.max(t,2),Math.max(a,2),this.rotation,0,2*Math.PI),e.stroke()}},{key:"normalDistance",value:function(e,t){if(this.x0===this.x1&&this.y0===this.y1)return(0,c.distance)({x:e,y:t},{x:this.x0,y:this.y0});var a=(this.y1-this.y0)/(this.x1-this.x0),n=(t-(this.y0+this.y1)/2)/a+(this.y0+this.y1)/2;return(0,c.distance)({x:e,y:n},{x:(this.x0+this.x1)/2,y:(this.y0+this.y1)/2})}}]),t}(u.RectStroke);t.CircleStroke=f},function(e,t,a){var n=a(5);Object.defineProperty(t,"__esModule",{value:!0}),t.Erase=void 0;var o=n(a(38)),i=n(a(7)),r=n(a(8)),l=n(a(12)),s=n(a(13)),u=n(a(14)),c=a(85),d=n(a(274)),f=n(a(19)),p=a(197);function h(e){var t={x:e.x0,y:e.y0},a={x:e.x1,y:e.y1},n={x:e.cp1x,y:e.cp1y},o={x:e.cp2x,y:e.cp2y},i=m(n,o,.5),r=m(t,n,.5),l=m(o,a,.5),s=m(r,i,.5),u=m(l,i,.5),c=m(s,u,.5);return[{x0:t.x,y0:t.y,x1:c.x,y1:c.y,cp1x:r.x,cp1y:r.y,cp2x:s.x,cp2y:s.y,ps0:1,ps1:1},{x0:c.x,y0:c.y,x1:a.x,y1:a.y,cp1x:u.x,cp1y:u.y,cp2x:l.x,cp2y:l.y,ps0:1,ps1:1}]}function m(e,t,a){return{x:(1-a)*e.x+a*t.x,y:(1-a)*e.y+a*t.y}}function g(e,t,a,n,o){var i=new c.PencilStroke;i.color=o.color,i.width=o.width;var r=m(e,t,.5),l=m(e,a,.5),s=m(a,n,.5),u=m(t,n,.5);return i.line=function(e,t){for(var a=e.slice(),n=0;n<t;n++)a=a.map(function(e){return h(e)}).flat();return a}([{x0:r.x,y0:r.y,x1:l.x,y1:l.y,cp1x:m(r,e,.55).x,cp1y:m(r,e,.55).y,cp2x:m(l,e,.55).x,cp2y:m(l,e,.55).y,ps0:1,ps1:1},{x0:l.x,y0:l.y,x1:s.x,y1:s.y,cp1x:m(l,a,.55).x,cp1y:m(l,a,.55).y,cp2x:m(s,a,.55).x,cp2y:m(s,a,.55).y,ps0:1,ps1:1},{x0:s.x,y0:s.y,x1:u.x,y1:u.y,cp1x:m(s,n,.55).x,cp1y:m(s,n,.55).y,cp2x:m(u,n,.55).x,cp2y:m(u,n,.55).y,ps0:1,ps1:1},{x0:u.x,y0:u.y,x1:r.x,y1:r.y,cp1x:m(u,t,.55).x,cp1y:m(u,t,.55).y,cp2x:m(r,t,.55).x,cp2y:m(r,t,.55).y,ps0:1,ps1:1}],4),[i]}var _=function(e){function t(e){var a;return(0,i.default)(this,t),(a=(0,l.default)(this,(0,s.default)(t).call(this,e))).isErased=!1,a.isDebug=!0,a.tool="erase",a.radius=20,a.mode="whole",a.updateIndex=0,a.hitTestIndex=0,a.seg=32,a.updateLine=function(e){var t=e.length,n=(0,d.default)(e.slice(Math.floor(t/a.seg)*a.seg),3);a.points=[].concat((0,o.default)(a.points.slice(0,a.updateIndex)),(0,o.default)(n)),t%a.seg===a.seg-1&&(a.updateIndex=a.points.length)},a.update=a.updateLine,a.intersectPaint=function(e){var t=a.points.slice(a.hitTestIndex);return!(t.length<=1)&&t.slice(1).some(function(a,n){var o=t[n];return e.intersectCheck(o.x,o.y,a.x,a.y)})},a.updateHitTestIndex=function(){a.points.length-a.updateIndex>1&&(a.hitTestIndex=a.updateIndex)},a.crossCurve=function(e){var t=[],n=a.points.slice(a.hitTestIndex);if(n.length<=1)return null;var i=-1,r=-1,l=n.slice(1).some(function(t,o){var l=n[o],s=!1,u=!1;return e.line.forEach(function(e,n){var o=(0,c.intersects2Line)(l.x,l.y,t.x,t.y,e.x0,e.y0,e.x1,e.y1),d=(0,c.isPointAroundLine)(e.x0,e.y0,l.x,l.y,t.x,t.y,a.radius),f=(0,c.isPointAroundLine)(e.x1,e.y1,l.x,l.y,t.x,t.y,a.radius);o||d||f?(-1===i&&(i=n),-1===r&&(r=n),i>n&&(i=n),r<n&&!u&&(r=n),s=!0):u=!0}),s});if(l){var s=e.clone();i>=1&&(s.line=[].concat((0,o.default)(e.line.slice(0,i)),[h(e.line[i])[0]]),t.push(s.clone(!0))),r<e.line.length-1&&(s.line=[h(e.line[r])[1]].concat((0,o.default)(e.line.slice(r+1))),t.push(s.clone(!0)))}return l?t:null},a.crossLine=function(e){var t=a.points.slice(a.hitTestIndex),n=[];return t.length<=1?null:t.slice(1).some(function(o,i){var r=t[i],l=(0,c.isPointAroundLine)(e.x0,e.y0,r.x,r.y,o.x,o.y,a.radius),s=(0,c.isPointAroundLine)(e.x1,e.y1,r.x,r.y,o.x,o.y,a.radius);if(l&&s)return!0;if((0,c.intersects2Line)(r.x,r.y,o.x,o.y,e.x0,e.y0,e.x1,e.y1)){var u=(0,c._get2LineCorssPoint)(r.x,r.y,o.x,o.y,e.x0,e.y0,e.x1,e.y1),d=(0,c.distance)(u,{x:e.x0,y:e.y0}),f=(0,c.distance)(u,{x:e.x1,y:e.y1}),h={x:(e.x0-u.x)/d,y:(e.y0-u.y)/d},m={x:a.radius*h.x,y:a.radius*h.y};return n=[d>a.radius&&new p.StrightLine([{x:e.x0,y:e.y0,p:1},{x:u.x+m.x,y:u.y+m.y,p:1}],{color:e.color}),f>a.radius&&new p.StrightLine([{x:u.x-m.x,y:u.y-m.y,p:1},{x:e.x1,y:e.y1,p:1}],{color:e.color})].filter(Boolean),!0}return!1})?n:null},a.crossRect=function(e){var t,n=e.swith2Line(),o=!1;return t=n.map(function(e){var t=a.crossLine(e);return t?(o=!0,t):e}).flat(),o?t:null},a.crossCircle=function(e){var t=a.points.slice(a.hitTestIndex),n=[];return t.length<=1?null:t.slice(1).some(function(o,i){var r=t[i];return!!e.intersectCheck(r.x,r.y,o.x,o.y)&&(n=(n=g({x:e.x0,y:e.y0},{x:e.x1,y:e.y0},{x:e.x0,y:e.y1},{x:e.x1,y:e.y1},e)).map(function(e){return a.crossCurve(e)||[]}).flat(),!0)})?n:null},a.radius=f.default.Tool.eraseRadius||20,a.mode=f.default.Tool.eraseType||"whole",a}return(0,u.default)(t,e),(0,r.default)(t,[{key:"draw",value:function(e){e.strokeStyle="rgba(27,255,204,1)",e.fillStyle="rgba(255,255,255,0.5)";var t=this.points[this.points.length-1];e.beginPath(),e.lineWidth=1,e.arc(t.x,t.y,this.radius,0,2*Math.PI),e.fill(),e.stroke()}}]),t}(c.PencilStrokeOrigin);t.Erase=_},function(e,t,a){var n=a(5);Object.defineProperty(t,"__esModule",{value:!0}),t.FontStroke=void 0;var o=n(a(38)),i=n(a(46)),r=n(a(7)),l=n(a(12)),s=n(a(13)),u=n(a(8)),c=n(a(14)),d=a(273),f=n(a(19)),p=function(e){function t(e,a){var n;return(0,r.default)(this,t),(n=(0,l.default)(this,(0,s.default)(t).call(this,e,a))).fontSize=14,n.lineHeight=1.2,n.oldContent=null,n.content=null,n.color="black",n.isEditting=!1,n.lastClickTime=(new Date).getTime(),n.tool="font",n.minWidth=100,n.isSame=function(e){return[n.x0-e.x0,n.x1-e.x1,n.y0-e.y0,n.y1-e.y1].every(function(e){return Math.abs(e)<.1})&&n.content===e.content&&n.color===e.color&&n.fontSize===e.fontSize},n.isValid=function(){return!!n.content},n.update=function(){},n.clone=function(e){var a=new t([{x:n.x0,y:n.y0}],e?{}:{id:n.id});return(0,i.default)(a,{x0:n.x0,y0:n.y0,x1:n.x1,y1:n.y1,fontSize:n.fontSize,lineHeight:n.lineHeight,content:n.content,color:n.color,tool:n.tool,svcId:e?0:n.svcId,userId:n.userId,nickName:n.nickName,lastClickTime:n.lastClickTime,mergeMethod:n.mergeMethod}),a},n.updateTime=function(e){n.lastClickTime=e},n.updateHeight=function(e){n.y1=n.y0+e/f.default.book.scale},n.hitCheck=function(e,t){return n.x0<e&&e<n.x1&&n.y0<t&&t<n.y1},n.intersectCheck=n.hitCheck,n.getNewInstance=function(e){return new t([],e?{}:{id:n.id})},n.transform=function(e,t){var a=n._transform(e,t),o=a.newPaint,i=(a.ratioOnY,a.ratioOnX),r=a.isOnCorner,l=a.isOnXAsix;a.isOnYAsix,a.isOnRotate;return(r||l)&&(o.fontSize=n.fontSize*i),o},n.draw=function(e){function t(t){return e.measureText(t).width}var a,i;e.font=Math.round(n.fontSize)+"px/"+n.lineHeight+" \u5fae\u8f6f\u96c5\u9ed1",e.fillStyle=n.color,e.textAlign="left",e.textBaseline="bottom",(a=n.content||"",i=n.width,[].concat.apply([],a.split("\n").map(function(e){return[].concat.apply([],function e(a,n){var i=-1;if(!a)return[""];if(t(a)<n||a.length<=1)return[a];for(i=1;i<=a.length&&!(t(a.substring(0,i))>n);i++);return[a.substring(0,i)].concat((0,o.default)(e(a.substring(i),n)))}(e,i))}))).forEach(function(t,a){e.fillText(t,n.x0,n.y0+(a+1)*n.fontSize*n.lineHeight)})},n.getTextSize=function(e){var t=document.createElement("div");t.innerHTML=e||n.content||"",t.style.fontSize=n.fontSize+"px",t.style.opacity="0",t.style.position="fixed",t.style.lineHeight="1",t.style.whiteSpace="pre",document.documentElement.appendChild(t);var a=t.getBoundingClientRect(),o=a.width,i=a.height;return t.remove(),{width:o,height:i}},n.updateSize=function(e,t){n.x1=n.x0+(e-4)/f.default.book.scale/1.05,n.y1=n.y0+t/f.default.book.scale},n.disableRotation=!0,n.fontSize=f.default.Tool.prompt.fontSize.value/f.default.book.scale,n.width<n.fontSize&&(n.x1=n.x0+n.minWidth),n.content=a&&a.content||"",n.y1=n.y0+n.fontSize*n.lineHeight,a&&a.color&&(n.color=a.color),n}return(0,c.default)(t,e),(0,u.default)(t,[{key:"width",get:function(){return this.x1-this.x0}}]),t}(d.RectStroke);t.FontStroke=p},function(e,t,a){var n=a(5);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,i=n(a(38)),r=n(a(41)),l=n(a(7)),s=n(a(8)),u=n(a(12)),c=n(a(13)),d=n(a(14)),f=n(a(0)),p=n(a(724)),h=n(a(19)),m=a(25),g=n(a(28)),_=n(a(52)),E=a(30),v=a(16),S=n(a(272)),y=a(725);a(730);var w=(0,E.observer)(o=function(e){function t(e){var a;return(0,l.default)(this,t),(a=(0,u.default)(this,(0,c.default)(t).call(this,e))).cardRef=f.default.createRef(),a.optionRef=f.default.createRef(),a.optionListRef=f.default.createRef(),a.remindRef=f.default.createRef(),a.bodyContentRef=f.default.createRef(),a.remindObj=null,a.getCurrQuiz=function(e){return{currQuiz:h.default.answer.stuQuizData[e]}},a.getUndoneCount=function(){return a.state.selectAnswer.filter(function(e){return!e.length}).length},a.resize=function(){if(a.state.isMobile)setTimeout(function(){a.setState({offset:10,cardWid:a.calcMbConWidth()},function(){a.cardRef&&a.cardRef.current&&(a.cardRef.current.style.transform="translateX("+(a.state.isCollapse?"-"+a.state.cardWid+"px":"0")+")")})},10);else{var e=Math.floor(document.getElementsByTagName("body")[0].clientWidth),t=e<305?2:4,n=Math.ceil(h.default.answer.optionList.length/t);a.optionListRef.current&&(a.optionListRef.current.style.maxWidth=e<305?"80px":"160px"),setTimeout(function(){var o=40*Math.min(h.default.answer.optionList.length,t);a.optionListRef.current&&(a.optionListRef.current.style.width=o+"px",a.optionListRef.current.style.height=(n>1?30*n+10*(n-1):40)+"px"),a.optionRef.current&&(!a.state.isCollapse&&(a.optionRef.current.style.width=o+88+"px"),a.optionRef.current.style.height=a.optionListRef.current.clientHeight+"px"),a.cardRef.current&&(a.cardRef.current.style.height=a.optionListRef.current.clientHeight+22+"px"),a.setState({cardWid:o+145,perLineOptCount:t},function(){console.log("clientWid: "+e+", cardWid: "+a.state.cardWid)})},0)}},a.calcMbConWidth=function(){var e=document.querySelector("body"),t=parseInt(getComputedStyle(e).width),n=Math.max.apply(Math,h.default.answer.stuQuizData.map(function(e){return e.vecOption.length}));return a.cardRef&&a.cardRef.current?48*n+167>t?(a.cardRef.current.style.width=t-20+"px",t-20):(a.cardRef.current.style.width=48*n+147+"px",48*n+147):0},a.handleCard=function(){a.setState({showRemind:!1}),a.state.isMobile?a.setState({isCollapse:!a.state.isCollapse},function(){a.cardRef&&a.cardRef.current&&(a.cardRef.current.style.transform="translateX("+(a.state.isCollapse?"-"+a.state.cardWid+"px":"0")+")")}):a.state.isCollapse?a.setState({offset:10,isCollapse:!1}):a.setState({offset:36-a.state.cardWid,isCollapse:!0})},a.selectAnswer=function(e,t,n){a.state.selectAnswer.forEach(function(a,o){if(o===e)if(t){var i=a.indexOf(n);-1===i?(a.push(n),a.sort()):a.splice(i,1)}else a.splice(0,a.length),a.push(n)}),a.setState({selectAnswer:a.state.selectAnswer})},a.verifySubBtnStat=function(){return-1!==a.state.selectAnswer.findIndex(function(e){return e.length})},a.onPrev=function(){a.state.currNumber&&a.setState((0,r.default)({currNumber:a.state.currNumber-1},a.getCurrQuiz(a.state.currNumber-1)))},a.onNext=function(){a.state.currNumber!==h.default.answer.stuQuizData.length-1&&a.setState((0,r.default)({currNumber:a.state.currNumber+1},a.getCurrQuiz(a.state.currNumber+1)))},a.onSubmit=function(){a.verifySubBtnStat()&&(1!==h.default.answer.stuQuizData.length&&a.getUndoneCount()?a.setState({showConfirm:!0}):a.onConfirm())},a.onConfirm=function(){a.setState({offset:-a.state.cardWid,isCollapse:!0});var e=h.default.answer.stuQuizData.map(function(e,t){return(0,r.default)({vecResult:a.state.selectAnswer[t],isCorrect:!(e.vecAnswer.join("")!==a.state.selectAnswer[t].join("")),isEmpty:!a.state.selectAnswer[t].length},e)});m.api.request("multiQuizSubmitAnswer",{cid:h.default.answer.cid,quizId:h.default.answer.quizId,vecAnswer:e}),a.onCancel(function(){h.default.answer.stuSubmitAnswer(e)})},a.onCancel=function(e){a.setState({showConfirm:!1},function(){e&&e()})},a.mobileSwiperChange=function(e){a.setState({currNumber:e,currQuiz:h.default.answer.stuQuizData[e]})},a.state={currQuiz:null,currNumber:0,selectAnswer:[],isMulti:!1,isCollapse:!1,offset:0,cardWid:0,perLineOptCount:4,isMobile:/Mobi|Android/i.test(navigator.userAgent),showConfirm:!1,showRemind:!1,show:!1},a}return(0,d.default)(t,e),(0,s.default)(t,[{key:"componentDidMount",value:function(){var e=this;(0,v.reaction)(function(){return h.default.answer.stuShowCard},function(t){e.setState({show:t,currQuiz:h.default.answer.stuQuizData[0],isMulti:h.default.answer.stuQuizData.length>1},function(){t?(e.setState({offset:-e.cardRef.current.clientWidth,selectAnswer:(0,i.default)(Array(h.default.answer.stuQuizData.length||0)).map(function(e){return[]})}),setTimeout(function(){e.setState({offset:10,cardWid:e.state.isMobile?e.calcMbConWidth():e.cardRef.current.clientWidth})},10)):e.setState({isCollapse:!1,offset:0,cardWid:0,selectAnswer:[],currNumber:0,currQuiz:null})})}),this.remindObj=m.api.listen("quizRemindNotify",function(t){console.log("\u6233\u4e00\u6233"),e.setState({showRemind:!0},function(){e.remindRef&&e.remindRef.current&&(e.remindRef.current.style.left=e.state.isMobile?"14px":e.state.offset+e.state.cardWid+10+"px",e.remindRef.current.style.bottom=e.state.isMobile&&e.cardRef.current.clientHeight+10+"px")}),e.timer&&clearTimeout(e.timer),e.timer=setTimeout(function(){e.setState({showRemind:!1}),e.timer=null},4e3)}),this.state.isMobile&&window.addEventListener("resize",_.default.debounce(this.resize,100),!1)}},{key:"componentWillUnmount",value:function(){this.setState=function(){},this.remindObj.cancel(),window.removeEventListener("resize",this.resize)}},{key:"render",value:function(){var e=this,t=this.state,a=t.currQuiz,n=t.currNumber,o=t.selectAnswer,i=t.isMulti,r=t.isMobile,l=(t.isCollapse,t.cardWid),s=Math.max.apply(Math,h.default.answer.stuQuizData.map(function(e){return e.vecOption.length})),u=Math.ceil(s/Math.floor((l-147)/48));return h.default.answer.stuShowCard&&a?f.default.createElement(f.default.Fragment,null,f.default.createElement("div",{ref:this.cardRef,className:p.default.stuAnswerCard+" \n          "+(this.state.isCollapse?""+p.default.collapse:""+p.default.open)+" \n          "+(r?""+p.default.mobi:""+p.default.web)+"\n          "+(i?""+p.default.multi:""+p.default.single)+"\n        ",style:r?{bottom:0}:{left:this.state.offset+"px"}},f.default.createElement("div",{className:p.default.cardInner},f.default.createElement("div",{className:p.default.body},f.default.createElement("div",{className:p.default.bodyContent,ref:this.bodyContentRef},f.default.createElement("i",{className:p.default.switchIcon,onClick:this.handleCard}),f.default.createElement("div",{className:p.default.optionWapper,ref:this.optionRef},!r&&i&&f.default.createElement("div",{className:p.default.switchBtn},f.default.createElement("a",{className:p.default.prev+" "+(!n&&""+p.default.disabled),onClick:this.onPrev}),f.default.createElement("a",{className:p.default.next+" "+(n===h.default.answer.stuQuizData.length-1&&""+p.default.disabled),onClick:this.onNext})),f.default.createElement("div",{className:p.default.breif},i&&f.default.createElement("span",{className:p.default.quizNumber},g.default.get("SIDE_TOOLS_ANSWER_STU_QUIZ_NUM",{number:n+1})),f.default.createElement("span",{className:p.default.title},a.vecAnswer.length>1?g.default.get("SIDE_TOOLS_ANSWER_MULTI_CHOICE"):g.default.get("SIDE_TOOLS_ANSWER_SINGLE_CHOICE")),f.default.createElement("div",{className:p.default.award},f.default.createElement("span",null,"+",a.awardCoins),f.default.createElement("i",null))),f.default.createElement("div",{className:p.default.optionInner},r?f.default.createElement(y.Carousel,{showThumbs:!1,showStatus:!1,showIndicators:h.default.answer.stuQuizData.length>1,showArrows:!1,swipeable:!0,width:l-147+"px",onChange:this.mobileSwiperChange,selectedItem:this.state.currNumber},h.default.answer.stuQuizData.map(function(t,i){return f.default.createElement("div",{key:i,className:p.default.optionList+" "+(r?"line-"+e.state.perLineOptCount:""),ref:e.optionListRef,style:{height:1===u?"100px":2===u?"136px":3===u?"180px":"256px"}},t.vecOption.map(function(t,r){return f.default.createElement("a",{key:t.id,className:o.length&&(o[i]||[]).includes(t.id)?p.default.option+" "+p.default.active:""+p.default.option,onClick:function(){return e.selectAnswer(n,a.vecAnswer.length>1,t.id)}},t.id)}))})):f.default.createElement("div",{className:p.default.optionList+" "+(r?"line-"+this.state.perLineOptCount:""),ref:this.optionListRef},a.vecOption.map(function(t,i){return f.default.createElement("a",{key:t.id,className:o.length&&(o[n]||[]).includes(t.id)?p.default.option+" "+p.default.active:""+p.default.option,onClick:function(){return e.selectAnswer(n,a.vecAnswer.length>1,t.id)}},t.id)})),!i&&f.default.createElement("a",{className:this.verifySubBtnStat()?""+p.default.confirmBtn:p.default.confirmBtn+" "+p.default.disabled,onClick:this.onSubmit},g.default.get("SIDE_TOOLS_ANSWER_SUBMIT_SHORT"))),i&&f.default.createElement("a",{className:this.verifySubBtnStat()?""+p.default.confirmBtn:p.default.confirmBtn+" "+p.default.disabled,onClick:this.onSubmit},g.default.get("SIDE_TOOLS_ANSWER_SUBMIT_SHORT"),f.default.createElement("span",{className:p.default[r?"mobileTips":""]},g.default.get("SIDE_TOOLS_ANSWER_SUBMIT_MULTI",{done:h.default.answer.stuQuizData.length-this.getUndoneCount(),total:h.default.answer.stuQuizData.length})))))))),f.default.createElement(S.default,{show:this.state.showConfirm,isLight:!0,content:g.default.get("SIDE_TOOLS_ANSWER_SUBMIT_CONFIRM",{total:h.default.answer.stuQuizData.length,undone:this.getUndoneCount(),done:h.default.answer.stuQuizData.length-this.getUndoneCount()}),confirm:{text:g.default.get("SIDE_TOOLS_ANSWER_SUBMIT_SHORT"),onConfirm:this.onConfirm},cancel:{text:g.default.get("CONFIRM_CANCEL"),onCancel:this.onCancel}}),this.state.showRemind&&f.default.createElement("div",{className:r?p.default.remind+" "+p.default.mbRemind:""+p.default.remind,ref:this.remindRef},f.default.createElement("i",null),f.default.createElement("span",null,f.default.createElement("p",null,g.default.get("SIDE_TOOLS_ANSWER_POKE_TEXT")),f.default.createElement("p",null,g.default.get("SIDE_TOOLS_ANSWER_POKE_TEXTS"))))):""}}]),t}(f.default.Component))||o;t.default=w},function(e,t,a){e.exports={stuAnswerCard:"stuAnswerCard_stuAnswerCard__2KMN4",web:"stuAnswerCard_web__3qSPN",collapse:"stuAnswerCard_collapse__1NoPx",cardInner:"stuAnswerCard_cardInner__Zj1sb",switchIcon:"stuAnswerCard_switchIcon__1mAt7",open:"stuAnswerCard_open__1s2r0",mobi:"stuAnswerCard_mobi__2tzr6",header:"stuAnswerCard_header__1C45t",body:"stuAnswerCard_body__awkOC",bodyContent:"stuAnswerCard_bodyContent__3YeML",optionWapper:"stuAnswerCard_optionWapper__1xs3J",switchBtn:"stuAnswerCard_switchBtn__1kL_R",prev:"stuAnswerCard_prev__vspJT",next:"stuAnswerCard_next__tp5fH",disabled:"stuAnswerCard_disabled__1FQGL",breif:"stuAnswerCard_breif__2NMtz",title:"stuAnswerCard_title__2nCy_",award:"stuAnswerCard_award__2aw7a",quizNumber:"stuAnswerCard_quizNumber__1Cbs0",option:"stuAnswerCard_option__j1AUC",active:"stuAnswerCard_active__zGk3Q",confirmBtn:"stuAnswerCard_confirmBtn__y1BeD",optionList:"stuAnswerCard_optionList__3Y8xo",optionInner:"stuAnswerCard_optionInner__310Y6",multi:"stuAnswerCard_multi__1e8ui",mobileTips:"stuAnswerCard_mobileTips__3F2on","line-2":"stuAnswerCard_line-2__2Hd-G","line-4":"stuAnswerCard_line-4__1bP44",remind:"stuAnswerCard_remind__3XmiD","keyframes-remind":"stuAnswerCard_keyframes-remind__qplPG",mbRemind:"stuAnswerCard_mbRemind__3EbdA","mb-keyframes-remind":"stuAnswerCard_mb-keyframes-remind__3lebg"}},,,,,,,function(e,t,a){var n=a(5),o=a(27);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,r=n(a(7)),l=n(a(8)),s=n(a(12)),u=n(a(13)),c=n(a(14)),d=o(a(0)),f=n(a(732)),p=n(a(19)),h=a(16),m=a(30),g=a(25),_=n(a(733)),E=(n(a(28)),(0,m.observer)(i=function(e){function t(e){var a;return(0,r.default)(this,t),(a=(0,s.default)(this,(0,u.default)(t).call(this,e))).audioPlayRef=d.default.createRef(),a.isMultiple=!0,a.state={show:!1,isMobile:/Mobi|Android/i.test(navigator.userAgent),isMini:/iPhone|Android/i.test(navigator.userAgent),isCorr:!1},a}return(0,c.default)(t,e),(0,l.default)(t,[{key:"componentDidMount",value:function(){var e=this;(0,h.reaction)(function(){return p.default.answer.stuFeedback},function(t){if(p.default.answer.stuSelectAnswer&&1===p.default.answer.stuSelectAnswer.length){var a=p.default.answer.stuSelectAnswer[0].isCorrect;if(e.setState({isCorr:a}),t)e.setState({show:!0}),setTimeout(function(){e.audioPlayRef.current&&e.audioPlayRef.current.play(a?"correct":"error")},0);else{if(e.setState({show:!1}),!a)return;g.api.request("aniCoin",{count:p.default.answer.stuSelectAnswer[0]&&p.default.answer.stuSelectAnswer[0].awardCoins||0})}e.isMultiple=p.default.answer.stuQuizData.length>1}})}},{key:"render",value:function(){return!this.isMultiple&&3===p.default.Tool.role&&d.default.createElement("div",{className:f.default.feedbackLayer+" "+(this.state.isMobile?""+f.default.mobi:"")+" "+(this.state.isMini?""+f.default.mini:""),style:{display:this.state.show?"block":"none"}},this.state.isCorr&&d.default.createElement("div",{className:f.default.answerCorrect},d.default.createElement("div",{className:f.default.animationWrap},d.default.createElement("div",{className:f.default.animation}),d.default.createElement("div",{className:f.default.awardsWrap},d.default.createElement("div",{className:f.default.awards+" "+f.default["awards-"+p.default.answer.stuSelectAnswer[0].awardCoins]},!1)))),!this.state.isCorr&&d.default.createElement("div",{className:f.default.answerError},d.default.createElement("div",{className:f.default.animationWrap},d.default.createElement("div",{className:f.default.animation}))),d.default.createElement(_.default,{ref:this.audioPlayRef}))}}]),t}(d.Component))||i);t.default=E},function(e,t,a){e.exports={feedbackLayer:"animation_feedbackLayer__3Z_m0",mini:"animation_mini__PrIk0",answerError:"animation_answerError__oobC2",animationWrap:"animation_animationWrap__1tby6",animation:"animation_animation__3vWp5","keyframes-answer-error-gen":"animation_keyframes-answer-error-gen__1R2qg",answerCorrect:"animation_answerCorrect__381Yw","keyframes-answer-correct-gen":"animation_keyframes-answer-correct-gen__3Oz7z",awardsWrap:"animation_awardsWrap__1aXWc",awards:"animation_awards__3CRvw","awards-1":"animation_awards-1__3C4eV","keyframes-award-gen-1":"animation_keyframes-award-gen-1__2eVi7","awards-2":"animation_awards-2__2LiOo","keyframes-award-gen-2":"animation_keyframes-award-gen-2__1pFmv","awards-3":"animation_awards-3__Lz0sD","keyframes-award-gen-3":"animation_keyframes-award-gen-3__1_jUH","awards-4":"animation_awards-4__oaBZr","keyframes-award-gen-4":"animation_keyframes-award-gen-4__1M5v0","awards-5":"animation_awards-5__2r8a6","keyframes-award-gen-5":"animation_keyframes-award-gen-5__1fkN7","awards-6":"animation_awards-6__7Xia1","keyframes-award-gen-6":"animation_keyframes-award-gen-6__2YFdQ","keyframes-answer-error":"animation_keyframes-answer-error__1uzCa","keyframes-answer-error-bli":"animation_keyframes-answer-error-bli__2GErV","keyframes-answer-correct":"animation_keyframes-answer-correct__3hEwd","keyframes-answer-correct-bli":"animation_keyframes-answer-correct-bli__cUAre","keyframes-awards":"animation_keyframes-awards__3OpW1","keyframes-awards-bli":"animation_keyframes-awards-bli__2PSYt"}},function(e,t,a){var n=a(5);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(a(7)),i=n(a(8)),r=n(a(12)),l=n(a(13)),s=n(a(14)),u=n(a(0)),c=a(734),d=a(735),f=function(e){function t(e){var a;return(0,o.default)(this,t),(a=(0,r.default)(this,(0,l.default)(t).call(this,e))).errorAudioRef=u.default.createRef(),a.correctAudioRef=u.default.createRef(),a.play=function(e){"error"===e?(console.log("----error play-----"),a.errorAudioRef.current.play()):(console.log("----correct play-----"),a.correctAudioRef.current.play())},a.state={},a}return(0,s.default)(t,e),(0,i.default)(t,[{key:"render",value:function(){return u.default.createElement("div",null,u.default.createElement("audio",{ref:this.errorAudioRef,autoPlay:!1},u.default.createElement("source",{src:c,type:"audio/mpeg"})),u.default.createElement("audio",{ref:this.correctAudioRef,autoPlay:!1},u.default.createElement("source",{src:d,type:"audio/mpeg"})))}}]),t}(u.default.Component);t.default=f},function(e,t,a){e.exports=a.p+"static/media/answerError.d5570d9d.mp3"},function(e,t,a){e.exports=a.p+"static/media/answerCorrect.271fe80b.mp3"},function(e,t,a){var n=a(5);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,i=n(a(7)),r=n(a(8)),l=n(a(12)),s=n(a(13)),u=n(a(14)),c=n(a(0)),d=n(a(737)),f=n(a(19)),p=a(25),h=n(a(28)),m=a(30),g=a(16),_=n(a(17)),E=(0,m.observer)(o=function(e){function t(e){var a;return(0,i.default)(this,t),(a=(0,l.default)(this,(0,s.default)(t).call(this,e))).cardRef=c.default.createRef(),a.optionRef=c.default.createRef(),a.optionListRef=c.default.createRef(),a.isMobile=/Mobi|Android/i.test(navigator.userAgent),a.getStarCount=function(){var e=0;return f.default.answer.stuSelectAnswer.forEach(function(t){t.vecAnswer.join("")===t.vecResult.join("")&&(e+=t.awardCoins)}),e},a.close=function(){f.default.answer.stuFeedback=!1},a.el=document.createElement("div"),a.el.style.position="absolute",a.el.style.height="100%",a.el.style.width="100%",a.el.style.left="0px",a.el.style.top="0px",a.state={starCount:0,show:!1},a}return(0,u.default)(t,e),(0,r.default)(t,[{key:"componentDidMount",value:function(){var e=this;(0,g.reaction)(function(){return f.default.answer.stuFeedback},function(t){var a=e.getStarCount();!f.default.answer.stuSelectAnswer||f.default.answer.stuSelectAnswer.length<=1||(e.setState({show:t,starCount:t?a:0}),t&&a>0&&setTimeout(function(){p.api.request("aniCoin",{count:a})},3e3))});var t=document.getElementById("courseContainerInner");t&&t.appendChild(this.el)}},{key:"componentWillUnmount",value:function(){var e=document.getElementById("courseContainerInner");e&&e.removeChild(this.el)}},{key:"render",value:function(){return _.default.createPortal(3===f.default.Tool.role&&c.default.createElement("div",{className:d.default.starContainer+" "+d.default[this.isMobile?"mb":""],style:{display:this.state.show?"block":"none",maxHeight:4===f.default.ClassType.type?"310px":"440px"}},c.default.createElement("div",{className:this.state.starCount?d.default.header+" "+d.default.star:d.default.header+" "+d.default.nostar},c.default.createElement("img",{src:this.state.starCount?a(738):a(739)}),c.default.createElement("span",{style:{display:this.state.starCount?"block":"none"}},this.state.starCount),c.default.createElement("p",null,this.state.starCount?h.default.get("SIDE_TOOLS_ANSWER_GET_STAR",{number:this.state.starCount}):h.default.get("SIDE_TOOLS_ANSWER_NO_STAR"))),c.default.createElement("span",{className:d.default.close,onClick:this.close}),c.default.createElement("div",{className:d.default.scrollWrapper},c.default.createElement("ul",{className:d.default.scrollInner},c.default.createElement("li",{className:d.default.starList+" "+d.default.title},c.default.createElement("p",{className:d.default.number},h.default.get("SIDE_TOOLS_ANSWER_QUIZ_TITLE")),c.default.createElement("p",{className:d.default.corrAnswer,style:{color:"rgba(0, 0, 0, 0.6)"}},h.default.get("SIDE_TOOLS_ANSWER_CORR_ANSWER")),c.default.createElement("p",{className:d.default.myAnswer},h.default.get("SIDE_TOOLS_ANSWER_MY_ANSWER")),c.default.createElement("p",{className:d.default.star},h.default.get("SIDE_TOOLS_ANSWER_GAIN_STAR"))),f.default.answer.stuSelectAnswer.map(function(e,t){return c.default.createElement("li",{className:d.default.starList,key:t},c.default.createElement("p",{className:d.default.number},t+1),c.default.createElement("p",{className:d.default.corrAnswer},e.vecAnswer.join("")),c.default.createElement("p",{className:d.default.myAnswer,style:{color:e.isEmpty?"#FFA146":e.isCorrect?"#11C28C":"#FF7C7C"}},e.isEmpty?h.default.get("SIDE_TOOLS_ANSWER_UNANSWERED"):e.vecResult.join("")),c.default.createElement("p",{className:d.default.star},c.default.createElement("span",null,e.isEmpty||!e.isCorrect?0:e.awardCoins),c.default.createElement("i",null)))})))),this.el)}}]),t}(c.default.Component))||o;t.default=E},function(e,t,a){e.exports={starContainer:"starstat_starContainer__26rdK",header:"starstat_header__2rgag",star:"starstat_star__2juOq",nostar:"starstat_nostar__qxP8R",close:"starstat_close__aROD1",scrollWrapper:"starstat_scrollWrapper__6bbBn",scrollInner:"starstat_scrollInner__30Mfp",starList:"starstat_starList__JtaCm",title:"starstat_title__yYMT6",number:"starstat_number__3Mxgn",corrAnswer:"starstat_corrAnswer__3hXlO",myAnswer:"starstat_myAnswer__275vB",mb:"starstat_mb__3TYED"}},function(e,t,a){e.exports=a.p+"static/media/ribbon.28148956.png"},function(e,t,a){e.exports=a.p+"static/media/come_on.9450b8ef.png"},function(e,t,a){var n=a(5),o=a(27);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(7)),r=n(a(8)),l=n(a(12)),s=n(a(13)),u=n(a(14)),c=o(a(0)),d=a(30),f=n(a(19)),p=n(a(196)),h=n(a(741));a(742);var m=n(a(743)),g=n(a(122));a(190);var _,E=n(a(28)),v=n(a(52)),S=/Mobi|Android/i.test(navigator.userAgent),y=(0,d.observer)(_=function(e){function t(e){var a;return(0,i.default)(this,t),(a=(0,l.default)(this,(0,s.default)(t).call(this,e))).switchTool=v.default.debounce(function(e,t){"forbidden"!==f.default.Tool.toolSelected&&(t?f.default.Tool.switchTool(e,t):"clearScreen"===e?f.default.Tool.cToggle=!0:f.default.Tool.switchTool(e))},100),a.onPenSliderChange=function(e){f.default.Tool.onPenSliderChange(e)},a.onEraseSliderChange=function(e){f.default.Tool.onEraseSliderChange(e)},a.onFontSliderChange=function(e){f.default.Tool.onFontSliderChange(e)},a.tabItemSelect=function(e,t){f.default.Tool.tabItemSelect(e,t)},a.preventBubble=function(e){e.stopPropagation()},a}return(0,u.default)(t,e),(0,r.default)(t,[{key:"componentWillReceiveProps",value:function(e){}},{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this;return(3===f.default.ClassType.type?1===f.default.Tool.role:f.default.Tool.isMountedTool)?c.default.createElement("div",{className:p.default.toolCon,id:"toolCon"},c.default.createElement("div",{className:p.default.toolBar},c.default.createElement("ul",{onPointerDown:function(t){return e.preventBubble(t)}},f.default.Tool.tools.map(function(t,a){switch(t.className){case"color":return t.auth&&c.default.createElement("li",{key:t.className,className:[p.default[t.className],t.active?p.default.active:"","forbidden"===f.default.Tool.toolSelected?p.default.disabled:""].join(" "),onPointerDown:function(){return e.switchTool(t.className,a)},onMouseDown:function(){return e.switchTool(t.className,a)}},t.show?c.default.createElement(h.default,null,f.default.Tool.prompt.color.option.map(function(n,o){return c.default.createElement("span",{key:""+t.className+o,className:[""+p.default.colorItem,""+p.default[f.default.Tool.tools[a].currentIndex===o?"active":""],""+p.default["#000000"===n?"blk":""],""+p.default[S?"":"colorItemHover"]].join(" "),onPointerDown:function(){return e.tabItemSelect(t.className,o)},onMouseDown:function(){return e.tabItemSelect(t.className,o)}},c.default.createElement("span",{className:p.default.colorItemSmall,style:{backgroundColor:n}}))})):null,"forbidden"!==f.default.Tool.toolSelected?S?c.default.createElement("div",{className:p.default.colorInner,style:{backgroundColor:f.default.Tool.prompt.color.value}}):c.default.createElement(g.default,{trigger:["hover"],placement:"bottom",overlay:E.default.get(t.hoverTitle),overlayClassName:"rc-replace",mouseEnterDelay:0,mouseLeaveDelay:0,align:{offset:[0,20]}},c.default.createElement("div",{className:p.default.colorInner,style:{backgroundColor:f.default.Tool.prompt.color.value}})):c.default.createElement("div",{className:p.default.colorInner,style:{backgroundColor:f.default.Tool.prompt.color.value}}));case"font":return t.auth&&c.default.createElement("li",{key:t.className,className:[p.default[t.className],t.active?p.default.active:"","forbidden"===f.default.Tool.toolSelected?p.default.disabled:""].join(" "),onPointerDown:function(){return e.switchTool(t.className,a)},onMouseDown:function(){return e.switchTool(t.className,a)}},"forbidden"!==f.default.Tool.toolSelected&&c.default.createElement(g.default,{trigger:["hover"],placement:"bottom",overlay:E.default.get(t.hoverTitle),overlayClassName:"rc-replace",mouseEnterDelay:0,mouseLeaveDelay:0,align:{offset:[0,10]}},c.default.createElement("div",{className:p.default.hoverTip})),t.show?c.default.createElement(h.default,null,c.default.createElement("span",{className:p.default.smallFontMark},"A"),c.default.createElement(m.default,{step:6,min:f.default.Tool.prompt.fontSize.min,max:f.default.Tool.prompt.fontSize.max,calibration:!0,value:f.default.Tool.prompt.fontSize.value,onChange:e.onFontSliderChange}),c.default.createElement("span",{className:p.default.bigFontMark},"A")):null);case"pencil":return t.auth&&c.default.createElement("li",{key:t.className,className:[p.default[t.className],t.active?p.default.active:"","forbidden"===f.default.Tool.toolSelected?p.default.disabled:""].join(" "),onPointerDown:function(){return e.switchTool(t.className,a)},onMouseDown:function(){return e.switchTool(t.className,a)}},"forbidden"!==f.default.Tool.toolSelected?S?c.default.createElement("div",{className:p.default.hoverTip}):c.default.createElement(g.default,{trigger:["hover"],placement:"bottom",overlay:E.default.get(t.hoverTitle),overlayClassName:"rc-replace",mouseEnterDelay:0,mouseLeaveDelay:0,align:{offset:[0,10]}},c.default.createElement("div",{className:p.default.hoverTip})):c.default.createElement("div",{className:p.default.hoverTip}),t.show?c.default.createElement(h.default,null,f.default.Tool.prompt.paintBrush.option.map(function(n,o){return c.default.createElement(g.default,{key:""+t.className+o,trigger:S?[]:["hover"],placement:"top",overlay:E.default.get(n.hoverTitle),overlayClassName:"rc-replace",mouseEnterDelay:0,mouseLeaveDelay:0,align:{offset:[0,-17]}},c.default.createElement("span",{className:[""+p.default.penItem,""+p.default[f.default.Tool.tools[a].currentIndex===o?"active":""]].join(" "),onPointerDown:function(){return e.tabItemSelect(t.className,o)},onMouseDown:function(){return e.tabItemSelect(t.className,o)}}))}),!S&&c.default.createElement("span",{className:p.default.verline}),!S&&c.default.createElement("span",{className:p.default.sc}),c.default.createElement(m.default,{sliderStyle:S?{margin:"0 10px"}:null,step:1,min:f.default.Tool.prompt.paintBrush.min,max:f.default.Tool.prompt.paintBrush.max,value:f.default.Tool.prompt.paintBrush.value,onChange:e.onPenSliderChange}),!S&&c.default.createElement("span",{id:"bc",className:p.default.bc})):null);case"erase":return S||3===f.default.Tool.role?t.auth&&c.default.createElement("li",{key:t.className,className:[p.default[t.className],t.active?p.default.active:"","operateOnCourse"===t.className?f.default.Tool.interCoursewareSelected?"":p.default.hidden:"forbidden"===f.default.Tool.toolSelected?p.default.disabled:""].join(" "),onPointerDown:function(){return e.switchTool(t.className)},onMouseDown:function(){return e.switchTool(t.className)}},"forbidden"!==f.default.Tool.toolSelected&&c.default.createElement(g.default,{trigger:["hover"],placement:"bottom",overlay:E.default.get(t.hoverTitle),overlayClassName:"rc-replace",mouseEnterDelay:.5,mouseLeaveDelay:0,align:{offset:[0,10]}},c.default.createElement("div",{className:p.default.hoverTip}))):t.auth&&c.default.createElement("li",{key:t.className,className:[p.default[t.className],t.active?p.default.active:"","forbidden"===f.default.Tool.toolSelected?p.default.disabled:""].join(" "),onPointerDown:function(){return e.switchTool(t.className,a)},onMouseDown:function(){return e.switchTool(t.className,a)}},"forbidden"!==f.default.Tool.toolSelected?S?c.default.createElement("div",{className:p.default.hoverTip}):c.default.createElement(g.default,{trigger:["hover"],placement:"bottom",overlay:E.default.get(t.hoverTitle),overlayClassName:"rc-replace",mouseEnterDelay:0,mouseLeaveDelay:0,align:{offset:[0,10]}},c.default.createElement("div",{className:p.default.hoverTip})):c.default.createElement("div",{className:p.default.hoverTip}),t.show?c.default.createElement(h.default,null,S?f.default.Tool.prompt.erase.option.map(function(n,o){return c.default.createElement("span",{key:""+t.className+o,className:[""+p.default.eraseItem,""+p.default[f.default.Tool.tools[a].currentIndex===o?"active":""]].join(" "),onPointerDown:function(){return e.tabItemSelect(t.className,o)},onMouseDown:function(){return e.tabItemSelect(t.className,o)}})}):f.default.Tool.prompt.erase.option.map(function(n,o){return c.default.createElement(g.default,{key:""+t.className+o,trigger:["hover"],placement:"top",overlay:E.default.get(n.hoverTitle),overlayClassName:"rc-replace",mouseEnterDelay:0,mouseLeaveDelay:0,align:{offset:[0,-17]}},c.default.createElement("span",{className:[""+p.default.eraseItem,""+p.default[f.default.Tool.tools[a].currentIndex===o?"active":""]].join(" "),onPointerDown:function(){return e.tabItemSelect(t.className,o)},onMouseDown:function(){return e.tabItemSelect(t.className,o)}}))}),!S&&c.default.createElement("span",{id:"verline",className:p.default.verline}),c.default.createElement(m.default,{disabled:"whole"===f.default.Tool.eraseType,sliderStyle:S?{margin:"0 10px"}:"whole"===f.default.Tool.eraseType?{cursor:"not-allowed"}:null,step:1,min:f.default.Tool.prompt.erase.min,max:f.default.Tool.prompt.erase.max,value:f.default.Tool.prompt.erase.value,onChange:e.onEraseSliderChange})):null);case"shape":return t.auth&&c.default.createElement("li",{key:t.className,className:[p.default[t.className],t.active?p.default.active:"","forbidden"===f.default.Tool.toolSelected?p.default.disabled:""].join(" "),onPointerDown:function(){return e.switchTool(t.className,a)},onMouseDown:function(){return e.switchTool(t.className,a)}},"forbidden"!==f.default.Tool.toolSelected&&c.default.createElement(g.default,{trigger:["hover"],placement:"bottom",overlay:E.default.get(t.hoverTitle),overlayClassName:"rc-replace",mouseEnterDelay:0,mouseLeaveDelay:0,align:{offset:[0,10]}},c.default.createElement("div",{className:p.default.hoverTip})),t.show?c.default.createElement(h.default,null,f.default.Tool.prompt.shape.option.map(function(n,o){return c.default.createElement("span",{key:""+t.className+o,className:[""+p.default.shapeItem,""+p.default[f.default.Tool.tools[a].currentIndex===o?"active":""]].join(" "),onPointerDown:function(){return e.tabItemSelect(t.className,o)},onMouseDown:function(){return e.tabItemSelect(t.className,o)}})})):null);default:return t.auth&&c.default.createElement("li",{key:t.className,className:[p.default[t.className],t.active?p.default.active:"","operateOnCourse"===t.className?f.default.Tool.interCoursewareSelected?"":p.default.hidden:"forbidden"===f.default.Tool.toolSelected?p.default.disabled:""].join(" "),onPointerDown:function(){return e.switchTool(t.className)},onMouseDown:function(){return e.switchTool(t.className)}},"forbidden"!==f.default.Tool.toolSelected&&c.default.createElement(g.default,{trigger:["hover"],placement:"bottom",overlay:E.default.get(t.hoverTitle),overlayClassName:"rc-replace",mouseEnterDelay:.5,mouseLeaveDelay:0,align:{offset:[0,10]}},c.default.createElement("div",{className:p.default.hoverTip})))}})))):""}}]),t}(c.Component))||_;t.default=y},function(e,t,a){var n=a(5),o=a(27);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,r=n(a(7)),l=n(a(8)),s=n(a(12)),u=n(a(13)),c=n(a(14)),d=o(a(0)),f=a(30),p=n(a(196)),h=n(a(19)),m=n(a(28)),g=(0,f.observer)(i=function(e){function t(e){var a;return(0,r.default)(this,t),(a=(0,s.default)(this,(0,u.default)(t).call(this,e))).hackProPosition=function(){var e,t=document.getElementById("toolTip");/Mobi|Android/i.test(navigator.userAgent)?(t.style.flexWrap="wrap",t.style.minWidth="220px",t.style.borderRadius="35px",e=t.getBoundingClientRect().width,t.style.left=-e/2+18+"px","color"===h.default.Tool.toolSelected&&(t.getBoundingClientRect().left<0?a.setState({isShrink:!0},function(){t.style.left="-55px"}):a.setState({isShrink:!1}))):document.getElementById("toolCon").getBoundingClientRect().width<600&&"color"===h.default.Tool.toolSelected?a.setState({isShrink:!0},function(){t.style.left="-55px"}):a.setState({isShrink:!1},function(){e=t.getBoundingClientRect().width,t.style.left=-e/2+18+"px"})},a.redrawPenPath=function(){var e=h.default.Tool.prompt.paintBrush.value,t=68,a=20,n=16,o=60;return"m"+t+","+a+" \n    c-0,0 0,"+(40-a-e/2)+" -"+(t-40)+","+(40-a-e/2)+"\n    c-"+(40-n)+",0 -"+(40-n)+","+(o-40+e/2)+" -"+(40-n)+","+(o-40+e/2)+" \n    c0,0 0,-"+(o-40-e/2)+" "+(40-n)+",-"+(o-40-e/2)+"\n    c"+(t-40)+",0 "+(t-40)+",-"+(40-a+e/2)+" "+(t-40)+",-"+(40-a+e/2)+"z"},a.toolTipRef=d.default.createRef(),a.state={isShrink:!1},a}return(0,c.default)(t,e),(0,l.default)(t,[{key:"componentDidMount",value:function(){this.hackProPosition(),window.addEventListener("resize",this.hackProPosition)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.hackProPosition)}},{key:"render",value:function(){var e=this;return d.default.createElement("div",{ref:this.toolTipRef,className:p.default.toolTip+" "+p.default[this.state.isShrink?"shrink":""],id:"toolTip",onPointerDown:function(e){e.stopPropagation()},onWheel:function(e){h.default.Tool.onWheelChange(e,h.default.Tool.toolSelected)}},this.props.children,d.default.createElement("div",{style:{display:["font","pencil","pen","signpen","erase"].includes(h.default.Tool.toolSelected)?"block":"none"}},function(){switch(h.default.Tool.toolSelected){case"font":return d.default.createElement("div",{className:p.default.topTips},d.default.createElement("span",{style:{fontSize:h.default.Tool.prompt.fontSize.value,color:h.default.Tool.prompt.color.value}},"A"),d.default.createElement("span",null,h.default.Tool.prompt.fontSize.value));case"erase":return"part"===h.default.Tool.eraseType&&d.default.createElement("div",{className:p.default.topTips},d.default.createElement("span",{style:{width:h.default.Tool.eraseRadius,height:h.default.Tool.eraseRadius,backgroundColor:"rgba(255,255,255,0.5)",border:"1px solid rgba(27,255,204,1)",borderRadius:"50%",boxSizing:"border-box"}}),d.default.createElement("span",null,m.default.get("BTOOL_HOVTEXT_ERASE_RADIUS")));case"pencil":return d.default.createElement("div",{className:p.default.topTips},d.default.createElement("svg",{width:"80",height:"80"},d.default.createElement("line",{x1:"30",x2:"50",y1:"50",y2:"30",stroke:h.default.Tool.selectColor,strokeWidth:h.default.Tool.prompt.paintBrush.value,strokeLinecap:"round"})));case"pen":return d.default.createElement("div",{className:p.default.topTips},d.default.createElement("svg",{width:"80",height:"80"},d.default.createElement("path",{d:e.redrawPenPath(),strokeOpacity:"null",strokeWidth:"1",stroke:h.default.Tool.selectColor,fill:h.default.Tool.selectColor})));case"signpen":return d.default.createElement("div",{className:p.default.topTips},d.default.createElement("svg",{width:"80",height:"80"},d.default.createElement("line",{x1:"30",x2:"50",y1:"50",y2:"30",stroke:h.default.Tool.selectColor,strokeWidth:h.default.Tool.prompt.paintBrush.value,strokeLinecap:"butt"})));default:return null}}()))}}]),t}(d.Component))||i;t.default=g},,function(e,t,a){var n=a(27),o=a(5);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=o(a(41)),r=o(a(7)),l=o(a(8)),s=o(a(12)),u=o(a(13)),c=o(a(14)),d=n(a(0));a(744);var f=function(e){function t(e){var a;return(0,r.default)(this,t),(a=(0,s.default)(this,(0,u.default)(t).call(this,e))).pPageX=0,a.transX=0,a.pWidth=0,a.sliding=!1,a.rs=function(){a.pPageX=a.sliderRef.current.getBoundingClientRect().left},a.down=function(e){"wbSlider"===e.target.id&&!a.props.disabled&&a.setState({sliding:!0},function(){a.setPoAndValue(e)})},a.move=function(e){e.stopPropagation(),a.state.sliding&&a.setPoAndValue(e)},a.up=function(e){e.stopPropagation(),a.setState({sliding:!1})},a.setPoAndValue=function(e){e.pageX-a.pPageX>a.pWidth-a.transX?a.setStateAsync({left:a.pWidth-2*a.transX}):e.pageX-a.pPageX<a.transX?a.setStateAsync({left:0}):a.setStateAsync({left:e.pageX-a.pPageX-a.transX})},a.setStateAsync=function(e){a.setState(e,function(){var e,t=a.state.left/(a.pWidth-2*a.transX)*(a.max-a.min)/a.step,n=a.min+a.step*Math.floor(t),o=a.min+a.step*(Math.floor(t)+1);e=t-Math.floor(t)<=.5?n:o,1!==a.step&&a.resetPosition(),a.props.onChange(e)})},a.resetPosition=function(){if(a.value>=a.min&&a.value<=a.max&&(a.value-a.min)%a.step===0){var e=(a.value-a.min)/(a.max-a.min)*(a.pWidth-2*a.transX);a.setState({left:e})}else console.error("params error")},a.sliderRef=d.default.createRef(),a.pointRef=d.default.createRef(),a.trackRef=d.default.createRef(),a.step=e.step||1,a.value=e.value,a.max=e.max,a.min=e.min,a.state={left:0,sliding:!1},a}return(0,c.default)(t,e),(0,l.default)(t,[{key:"componentDidMount",value:function(){var e=this;setTimeout(function(){e.pPageX=e.sliderRef.current.getBoundingClientRect().left,e.pWidth=e.sliderRef.current.getBoundingClientRect().width,e.transX=e.pointRef.current.offsetWidth/2,e.trackRef.current.style.width=e.pWidth-2*e.transX+"px",e.resetPosition(),e.pointRef.current.style.visibility="visible",window.addEventListener("pointermove",e.move),window.addEventListener("pointerup",e.up),window.addEventListener("resize",e.rs)},0)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("pointermove",this.move),window.removeEventListener("pointerup",this.up),window.removeEventListener("resize",this.rs)}},{key:"componentWillReceiveProps",value:function(e){e.step===this.step&&e.min===this.min&&e.max===this.max&&e.value===this.value||(this.step=e.step,this.max=e.max,this.min=e.min,this.value=e.value,this.resetPosition())}},{key:"render",value:function(){var e=this,t=[],a=this.props.pointStyle?this.props.pointStyle:{};if(this.props.calibration)for(var n=(this.max-this.min)/this.step,o=0;o<n+1;o++)t.push(d.default.createElement("div",{key:o,style:{position:"absolute",left:o/n*100+"%",bottom:0,width:"1px",height:"4px",backgroundColor:"#123B52",pointerEvents:"none"}}));return d.default.createElement("div",{className:"wbSlider",style:this.props.sliderStyle?this.props.sliderStyle:null,ref:this.sliderRef,id:"wbSlider","touch-action":"none",onPointerDown:function(t){t.stopPropagation(),e.down(t.nativeEvent)},onMouseDown:function(e){e.stopPropagation()}},d.default.createElement("div",{className:"wbPoint"+(this.props.disabled?" disabled":""),id:"wbPoint",ref:this.pointRef,style:(0,i.default)({transform:"translateX("+this.state.left+"px) translateY(-50%)",visibility:"hidden"},a)},d.default.createElement("div",{className:"hovering",style:{display:this.state.sliding&&!/Mobi|Android/i.test(navigator.userAgent)?"block":"none"}})),d.default.createElement("div",{className:"wbTrackWrapper",ref:this.trackRef},d.default.createElement("div",{className:"wbTrack",style:this.props.trackStyle?this.props.trackStyle:null},t)))}}]),t}(d.Component);t.default=f},function(e,t,a){},function(e,t,a){var n=a(5),o=a(27);Object.defineProperty(t,"__esModule",{value:!0}),t.TurnPageNew=void 0;var i,r=n(a(7)),l=n(a(8)),s=n(a(12)),u=n(a(13)),c=n(a(14)),d=o(a(0)),f=n(a(746)),p=a(30),h=n(a(19)),m=a(25),g=(0,p.observer)(i=function(e){function t(){var e,a;(0,r.default)(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(a=(0,s.default)(this,(e=(0,u.default)(t)).call.apply(e,[this].concat(o)))).onPrev=function(){!h.default.book.canPrev||3===h.default.Tool.role||2===h.default.Tool.role&&1===h.default.Tool.assistantStatus||(h.default.book.curPage--,m.api.request("wbPageData",{textBookId:h.default.book.bookId,page:h.default.book.curPage}))},a.onNext=function(){!h.default.book.canNext||3===h.default.Tool.role||2===h.default.Tool.role&&1===h.default.Tool.assistantStatus||(h.default.book.curPage++,m.api.request("wbPageData",{textBookId:h.default.book.bookId,page:h.default.book.curPage}))},a}return(0,c.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){return h.default.Tool.isMountedPage?d.default.createElement("div",{id:"turnPageWraper",className:f.default.turnPageWraper+" "+(2===h.default.Tool.role&&1===h.default.Tool.assistantStatus?"disabled":"")},d.default.createElement("a",{href:"javascript:void(0);",className:f.default.prevBtn+" "+(h.default.book.canPrev?"":f.default.disabled),onClick:this.onPrev}),d.default.createElement("label",null,d.default.createElement("span",{className:f.default.currPage},h.default.book.curPage),d.default.createElement("span",{className:f.default.splitLine},"/"),d.default.createElement("span",{className:f.default.totalPage},h.default.book.totalPage)),d.default.createElement("a",{href:"javascript:void(0);",className:f.default.nextBtn+" "+(h.default.book.canNext?"":f.default.disabled),onClick:this.onNext})):""}}]),t}(d.Component))||i;t.TurnPageNew=g},function(e,t,a){e.exports={turnPageWraper:"turnPage_turnPageWraper__1TtFx",teachingPlanBtn:"turnPage_teachingPlanBtn__3YTy4",disabled:"turnPage_disabled__3MaAm",prevBtn:"turnPage_prevBtn___mQQv",nextBtn:"turnPage_nextBtn__1uUlQ",currPage:"turnPage_currPage__1dzNZ",totalPage:"turnPage_totalPage__24xaZ"}},function(e,t,a){var n=a(27),o=a(5);Object.defineProperty(t,"__esModule",{value:!0}),t.H5BookViewer=void 0;var i=o(a(46)),r=o(a(38)),l=o(a(7)),s=o(a(8)),u=o(a(12)),c=o(a(13)),d=o(a(81)),f=o(a(14)),p=n(a(0)),h=a(148),m=a(282),g=a(25);a(283);var _=o(a(19)),E=o(a(52)),v=a(16),S=a(93),y=o(a(97)),w=o(a(28)),A=o(a(284)),I=o(a(119)),T=function(e){function t(e){var n;return(0,l.default)(this,t),(n=(0,u.default)(this,(0,c.default)(t).call(this,e))).bookViewContainer=p.default.createRef(),n.h5Height="57%",n.h5Width="100%",n.listenersArray=[],n.resizeHanlder=null,n.reactionsArray=[],n.loadFileTimerId=null,n.pageLoadedTimer=null,n.currentPage=0,n.source=h.h5CourseWareSource,n.state={pages:[],errMessage:null},n.onPage=function(e){e&&n.state.pages[e-1]&&n.showPage(e)},n.init=function(e){console.log("entering h5Bookviewer init pages"),n.source.loadFile(e).then(function(e){n.setState({errMessage:null}),n.setState(function(){var t=(0,r.default)(Array(e.numPages)).map(function(t,a){return{id:I.default.v4(),src:e.pagesArray[a].url,realPageNum:a+1,loaded:!1}});return _.default.book.vPages.forEach(function(e){t.splice(e-1,0,{id:I.default.v4(),src:a(121),realPageNum:-1,loaded:!0})}),_.default.book.curPage>t.length&&(_.default.book.curPage=t.length),_.default.book.totalPage=t.length,n.currentPage=_.default.book.curPage,{pages:t}},function(){n.currentPage&&n.onPage(n.currentPage)})}).catch(function(t){console.log("init err: ",t),n.loadFileTimerId?(clearTimeout(n.loadFileTimerId),m.BookViewer.source===h.h5CourseWareSource&&n.setState({errMessage:w.default.get("BOOK_LOAD_FAIL_MESSAGE")})):n.loadFileTimerId=setTimeout(function(){n.init(e)},500)})},n.showPage=function(e){var t=n.state.pages[e-1];t&&n.bookViewContainer&&n.bookViewContainer.current&&n.source.renderPage(t.realPageNum,null,null).then(function(e){if(!n.bookViewContainer)throw new Error("element not initialized");if(n.bookViewContainer&&n.bookViewContainer.current){var t=n.bookViewContainer.current.getBoundingClientRect(),a=e.canvasWidth||1920,o=e.canvasHeight||1080,r=t.width/a,l=t.height/o,s=Math.min(l,r)||1;console.log("original width: is "+n.h5Width),n.h5Height=(o*s).toString(),n.h5Width=(a*s).toString(),console.log("changed width: is "+n.h5Width),(0,i.default)(_.default.book,{scale:s,width:a*s,height:o*s}),(0,i.default)(_.default.home,{ctrWidth:t.width,ctrHeight:t.height}),n.setState(function(e){var t=e.pages.slice();return n.currentPage&&t[n.currentPage-1]&&(t[n.currentPage-1].loaded=!0),{pages:t,errMessage:null}}),n.pageLoadedTimer&&clearTimeout(n.pageLoadedTimer),n.pageLoadedTimer=setTimeout(function(){var e=document.getElementById("h5-iframe-element");e&&e.contentDocument&&e.contentDocument.body&&""===e.contentDocument.body.innerHTML&&n.onLoadPageError(),clearTimeout(n.pageLoadedTimer),n.pageLoadedTimer=null},1e4)}}).catch(function(t){console.error("book rendered page "+e+" fail, will retry"),setTimeout(function(){n.setState(function(e){return{pages:e.pages.slice()}},function(){n.showPage(e)})},200)})},n.addPage=function(e){n.setState(function(t){var n=t.pages.slice();return n.splice(e-1,0,{id:I.default.v4(),src:a(121),realPageNum:-1,loaded:!0}),_.default.book.totalPage=n.length,{pages:n}},function(){n.currentPage=_.default.book.curPage,e===_.default.book.curPage&&n.onPage(e)})},n.onLoadPageError=function(){console.log("something goes wrong during loading current page"),m.BookViewer.source===h.h5CourseWareSource&&n.setState({errMessage:w.default.get("ICW_LOAD_PAGE_ERROR")})},n.reactionsArray=[],n.listenersArray=[],h.h5CourseWareSource.bindH5Viewer((0,d.default)(n)),n}return(0,f.default)(t,e),(0,s.default)(t,[{key:"componentDidMount",value:function(){var e=this;(0,v.reaction)(function(){return _.default.book.bookUrl},function(t,a){e.loadFileTimerId=null,e.init(t),e.reactionsArray.push(a)}),(0,v.reaction)(function(){return(0,v.toJS)(_.default.book.vPages)},function(t,a){console.log("virtual pages changed in h5 book viewer"),e.reactionsArray.push(a),t.forEach(function(t){e.addPage(t)})}),(0,v.reaction)(function(){return _.default.book.curPage},E.default.debounce(function(t,a){t<1||(e.currentPage=t,window.ICWClassRoomSDK&&window.ICWClassRoomSDK.mediaRecord&&window.ICWClassRoomSDK.mediaRecord.endRecord&&window.ICWClassRoomSDK.mediaRecord.endRecord(),e.onPage(t),e.reactionsArray.push(a))},500));var t=E.default.debounce(function(e){_.default.book.curPage&&e.state.pages[_.default.book.curPage-1]&&(e.currentPage=_.default.book.curPage,e.showPage(_.default.book.curPage))},250);(0,v.reaction)(function(){return _.default.home.wrapperMarginTop},function(a){t(e),e.reactionsArray.push(a)}),window.addEventListener("resize",this.resizeHanlder=function(){t(e)},!1),S.siderState.observe(function(){t(e)}),t(this),!g.api.isListen("wbPageDataNotify")&&this.listenersArray.push(g.api.listen("wbPageDataNotify",function(e){e.param.textBookId===_.default.book.bookId&&e.param.page&&(_.default.book.curPage=e.param.page)})),!g.api.isListen("wbNewPageDataNotify")&&this.listenersArray.push(g.api.listen("wbNewPageDataNotify",function(e){if(e.param.textBookId===_.default.book.bookId){for(var t=[],a=function(a){var n=e.payload[a];n.crswarePage<0&&!_.default.book.pageData.some(function(e){return e.seq===n.seq})&&t.push(n)},n=0;n<e.payload.length;n++)a(n);_.default.book.pageData=e.payload,t.length&&console.log("newpage",t.map(function(e){return e.page})),t.length&&(_.default.book.vPages=t.map(function(e){return e.page}))}}))}},{key:"componentWillUnmount",value:function(){this.listenersArray.forEach(function(e){e&&e.cancel&&e.cancel()}),this.reactionsArray.forEach(function(e){e&&e.dispose&&e.dispose()}),window.removeEventListener("resize",this.resizeHanlder,!1),h.h5CourseWareSource.setCurrentPageURL("")}},{key:"render",value:function(){var e=!1,t=0,a=null;return console.log("h5 viewer is rendering"),this.state.pages.length<1?e=!0:(t=this.currentPage&&this.currentPage<=this.state.pages.length?this.currentPage:this.state.pages.length,(a=this.state.pages[t-1])&&a.loaded||(e=!0)),e?p.default.createElement("div",{className:"book-view-container",ref:this.bookViewContainer},p.default.createElement(A.default,null),p.default.createElement(y.default,{contentText:this.state.errMessage})):a?p.default.createElement("div",{className:"book-view-container",ref:this.bookViewContainer},p.default.createElement("div",{key:a.id,className:"book-page-container page-"+t+" rendered cur-page"},p.default.createElement("div",{className:"thumbnail"},a.realPageNum>-1?p.default.createElement("iframe",{id:"h5-iframe-element",className:"book-page-4-h5",width:this.h5Width,height:this.h5Height,src:a.src,frameBorder:"0",key:_.default.book.bookUrl}):p.default.createElement("div",{className:"book-new-page-4-h5",style:{width:this.h5Width+"px",height:this.h5Height+"px"}}))),p.default.createElement(y.default,{contentText:this.state.errMessage})):void 0}}]),t}(p.Component);t.H5BookViewer=T},function(e,t,a){e.exports={loading:"loading_loading__1JJAB",loadingWrap:"loading_loadingWrap__2LNCE",loadingAnimal:"loading_loadingAnimal__1ck8e","loading-spin":"loading_loading-spin__3G4KO",loadingText:"loading_loadingText__vqdsJ"}},function(e,t,a){var n=a(5),o=a(27);Object.defineProperty(t,"__esModule",{value:!0}),t.OutPutDiff=void 0;var i,r=n(a(7)),l=n(a(8)),s=n(a(12)),u=n(a(13)),c=n(a(14)),d=o(a(0)),f=a(30),p=n(a(19)),h=(0,f.observer)(i=function(e){function t(){return(0,r.default)(this,t),(0,s.default)(this,(0,u.default)(t).apply(this,arguments))}return(0,c.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){return d.default.createElement(d.default.Fragment,null,d.default.createElement("span",null,p.default.home.fps+" ","fps"),d.default.createElement("div",null,(p.default.book.diffHistory.get(""+(+p.default.book.curPage-1))||[]).reverse().map(function(e,t,a){return d.default.createElement("div",{key:a.length-t-1},d.default.createElement("span",null,a.length-t,"-"),e.new.length>0&&d.default.createElement("span",{className:"add"},""+e.new.map(function(e){return e.svcId}).sort(function(e,t){return+e-t}).join("`")),e.del.length>0&&d.default.createElement("span",{className:"del"},""+e.del.map(function(e){return e.svcId}).sort(function(e,t){return+e-t}).join("`")))})))}}]),t}(d.Component))||i;t.OutPutDiff=h},function(e,t,a){var n=a(5),o=a(27);Object.defineProperty(t,"__esModule",{value:!0}),t.AuthAnimation=void 0;var i,r=n(a(7)),l=n(a(8)),s=n(a(12)),u=n(a(13)),c=n(a(14)),d=o(a(0)),f=a(30),p=n(a(19)),h=n(a(751)),m=(0,f.observer)(i=function(e){function t(){var e,a;(0,r.default)(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(a=(0,s.default)(this,(e=(0,u.default)(t)).call.apply(e,[this].concat(o)))).authAudioRef=d.default.createRef(),a.playAuthAudioRef=function(){if(3===p.default.Tool.role&&p.default.Tool.showAniAuth)return setTimeout(function(){a.authAudioRef.current.play()},528),!0},a.listener=function(e){p.default.Tool.showAniAuth=!1},a}return(0,c.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){return d.default.createElement(d.default.Fragment,null,this.playAuthAudioRef()&&d.default.createElement("div",{className:h.default.gka,style:{width:p.default.Tool.authAniWid,height:p.default.Tool.authAniHei}},d.default.createElement("div",{onAnimationEnd:this.listener,className:p.default.Tool.showAniAuth?""+h.default.gkaIn:""})),d.default.createElement("audio",{ref:this.authAudioRef},d.default.createElement("source",{src:a(752),type:"audio/mp3"})))}}]),t}(d.Component))||i;t.AuthAnimation=m},function(e,t,a){e.exports={gka:"auth_gka__1RfeA",gkaIn:"auth_gkaIn__UL2Dt","keyframes-magic-per":"auth_keyframes-magic-per__3xzSP"}},function(e,t,a){e.exports=a.p+"static/media/authAni.1e67b55c.mp3"},function(e,t,a){var n=a(5);Object.defineProperty(t,"__esModule",{value:!0}),t.CountDown=void 0;var o,i=n(a(41)),r=n(a(7)),l=n(a(8)),s=n(a(12)),u=n(a(13)),c=n(a(14)),d=n(a(0)),f=n(a(754)),p=n(a(19)),h=a(30),m=n(a(17)),g=a(25),_=a(16),E=n(a(28)),v=n(a(97)),S=n(a(262)),y=(0,h.observer)(o=function(e){function t(e){var a;return(0,r.default)(this,t),(a=(0,s.default)(this,(0,u.default)(t).call(this,e))).deltaTime=null,a.countDown=d.default.createRef(),a.ToastRef=d.default.createRef(),a.audioRef=d.default.createRef(),a.state={stat:"begin",startTime:0,countTime:0,remainTime:0,counting:!1},a.toolUpdate=function(e){if("tool_timer"===(e=e.param).type&&a.props.isTimer||"tool_countdown"===e.type&&!a.props.isTimer){if(a.cacheData={param:e},null===a.deltaTime)return;a.cacheData=void 0;var t=e.value;switch(a.setState({stat:t.stat,countTime:t.countTime,remainTime:t.remainTime,counting:t.counting}),t.stat){case"begin":a.onReset(!0);break;case"count":a.onStart(!0);break;case"pause":a.onPause(!0);break;case"end":a.onEnd(!0);break;case"close":a.onClose(!0)}"close"!==t.stat&&(p.default.home.tool=a.props.isTimer?"timer":"countdown")}},a.toServerTime=function(e){return Math.floor((1e3*e+(a.deltaTime||0))/1e3)},a.toLocalTime=function(e){return Math.floor((1e3*e-(a.deltaTime||0))/1e3)},a.getTs=function(){!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return Math.floor((new Date).getTime()/1e3)},a.onSend=function(){g.api.request("toolsStateInfo",{type:a.props.isTimer?"tool_timer":"tool_countdown",value:(0,i.default)({},a.state,{startTime:a.toServerTime(a.state.startTime)})})},a.onReset=function(e){a.state.countTime;a.setState({stat:"begin",startTime:0,countTime:0,remainTime:0,counting:!1},function(){!e&&a.onSend()})},a.onStart=function(e){e&&a.setState(function(e){return{startTime:a.props.isTimer?a.getTs()+1-(e.remainTime||0):a.getTs()+1,countTime:+(e.remainTime||0),counting:!0}},function(){setTimeout(a.onCount,1e3-(new Date).getTime()%1e3)}),!e&&(a.state.remainTime>0||a.props.isTimer)&&a.setState(function(e){return{stat:"count",startTime:a.props.isTimer?a.getTs()+1-(e.remainTime||0):a.getTs()+1,countTime:+(e.remainTime||0),counting:!0}},function(){a.onSend(),setTimeout(a.onCount,1e3-(new Date).getTime()%1e3)})},a.onPause=function(e){a.setState({stat:"pause",counting:!1},function(){!e&&a.onSend(),!a.props.isTimer&&a.audioPause()})},a.onCount=function(){if(a.state.counting){var e=a.getTs(),t=e-a.state.startTime<0?0:e-a.state.startTime;if(a.props.isTimer)a.setState({remainTime:t},function(){setTimeout(a.onCount,200)});else{var n=a.state.countTime-t;if(n<0)return void a.onEnd(!0);a.setState({remainTime:n},function(){setTimeout(a.onCount,200),a.state.remainTime<=10&&a.audioRef.current&&a.audioRef.current.play()})}}},a.onEnd=function(e){a.setState({stat:"end",counting:!1,remainTime:0},function(){!e&&a.onSend(),a.ToastRef.current.show(E.default.get("SIDE_TOOLS_COUNTDOWN_END")),!a.props.isTimer&&a.audioPause()})},a.onClose=function(e){a.setState({stat:"close",counting:!1,remainTime:0},function(){!e&&a.onSend(),("timer"===p.default.home.tool&&a.props.isTimer||"countdown"===p.default.home.tool&&!a.props.isTimer)&&(p.default.home.tool="more"),!a.props.isTimer&&a.audioPause()})},a.audioPause=function(){a.audioRef.current&&a.audioRef.current.pause()},a.el=document.createElement("div"),a}return(0,c.default)(t,e),(0,l.default)(t,[{key:"componentDidMount",value:function(){var e=this,t=document.getElementById("courseContainer");t&&t.appendChild(this.el),g.api.request("syncTime").then(function(t){e.deltaTime=0,e.cacheData&&e.toolUpdate(e.cacheData)}),g.api.listen("toolsStateInfoNotify",this.toolUpdate),(0,_.reaction)(function(){return p.default.home.wrapperMarginTop},function(t){t>0?e.countDown.current&&(e.countDown.current.style.top=t+25+"px"):e.countDown.current&&(e.countDown.current.style.top="25px")})}},{key:"componentWillUnmount",value:function(){var e=document.getElementById("courseContainer");e&&e.removeChild(this.el)}},{key:"onSet",value:function(e){var t=this;this.setState(function(a){var n=+t.state.remainTime;return n+e>=0&&n+e<86400?{remainTime:n+e}:{}})}},{key:"render",value:function(){var e=this,t=d.default.createElement("div",{className:f.default.row},d.default.createElement("span",{className:[f.default.sqr,f.default.timeNum].join(" ")},Math.floor(Math.floor(this.state.remainTime/3600)/10)),d.default.createElement("span",{className:[f.default.sqr,f.default.timeNum].join(" ")},Math.floor(this.state.remainTime/3600)%10)),n=d.default.createElement("div",{className:f.default.row},d.default.createElement("span",{className:[f.default.sqr,f.default.timeNum].join(" ")},Math.floor(Math.floor(this.state.remainTime%3600/60)/10)),d.default.createElement("span",{className:[f.default.sqr,f.default.timeNum].join(" ")},Math.floor(this.state.remainTime%3600/60)%10)),o=d.default.createElement("div",{className:f.default.row},d.default.createElement("span",{className:[f.default.sqr,f.default.timeNum].join(" ")},Math.floor(this.state.remainTime%60/10)),d.default.createElement("span",{className:[f.default.sqr,f.default.timeNum].join(" ")},this.state.remainTime%60%10)),i=function(t){return d.default.createElement("span",{className:[f.default.sqr,f.default.clickable,e.state.remainTime+t>=86400||e.state.remainTime+t<0?f.default.disabled:""].join(" ")},d.default.createElement("span",{onClick:function(){return e.onSet(t)},className:t>0?f.default.add:f.default.min}))},r=function(e,t,a){return d.default.createElement("div",{className:f.default.col},d.default.createElement("div",{className:f.default.row},d.default.createElement("span",{className:f.default.timeLabel},e)),d.default.createElement("div",{className:f.default.row},i(10*t),i(1*t)),a,d.default.createElement("div",{className:f.default.row},i(-10*t),i(-1*t)))};return m.default.createPortal(d.default.createElement(S.default,{bounds:"#courseContainer"},d.default.createElement("div",{ref:this.countDown,style:{display:p.default.home.tool===(this.props.isTimer?"timer":"countdown")?"block":"none"},className:f.default.container},d.default.createElement("div",{className:f.default.row},["count","pause","end"].includes(this.state.stat)||3===p.default.Tool.role||4===p.default.Tool.role||this.props.isTimer?d.default.createElement(d.default.Fragment,null,d.default.createElement("div",{className:f.default.col}," ",t," "),d.default.createElement("span",{className:[f.default.divide,f.default.oneline].join(" ")},":"),d.default.createElement("div",{className:f.default.col}," ",n," "),d.default.createElement("span",{className:[f.default.divide,f.default.oneline].join(" ")},":"),d.default.createElement("div",{className:f.default.col}," ",o," ")):d.default.createElement(d.default.Fragment,null," ",r(E.default.get("SIDE_TOOLS_HOUR"),3600,t)," ",d.default.createElement("span",{className:f.default.divide},":")," ",r(E.default.get("SIDE_TOOLS_MINUTE"),60,n)," ",d.default.createElement("span",{className:f.default.divide},":")," ",r(E.default.get("SIDE_TOOLS_SECOND"),1,o)," ")),(1===p.default.Tool.role||2===p.default.Tool.role)&&d.default.createElement(d.default.Fragment,null,d.default.createElement("div",{className:f.default.row},d.default.createElement("a",{onClick:function(){["pause","end"].includes(e.state.stat)&&e.onReset()},href:"javascript:void(0);",className:[f.default.secondary,f.default.btn,["pause","end"].includes(this.state.stat)?"":f.default.disabled].join(" ")},E.default.get("SIDE_TOOLS_RESET")),d.default.createElement("a",{onClick:function(){"begin"===e.state.stat?e.onStart():"count"===e.state.stat?e.onPause():e.onStart()},href:"javascript:void(0);",className:[f.default.primary,f.default.btn,"end"===this.state.stat?f.default.disabled:""].join(" ")},["begin","end","close"].includes(this.state.stat)?E.default.get("SIDE_TOOLS_START"):"count"===this.state.stat?E.default.get("SIDE_TOOLS_PAUSE"):E.default.get("SIDE_TOOLS_CONTINUE"))),d.default.createElement("a",{onClick:function(){return e.onClose()},href:"javascript:void(0);",className:[f.default.close].join(" ")})),d.default.createElement(v.default,{ref:this.ToastRef,widthStyle:{width:"190px"}}),(1===p.default.Tool.role||2===p.default.Tool.role)&&d.default.createElement("audio",{ref:this.audioRef},d.default.createElement("source",{src:a(755),type:"audio/mpeg"})))),this.el)}}]),t}(d.default.Component))||o;t.CountDown=y},function(e,t,a){e.exports={container:"countdown_container__3U0ce",close:"countdown_close__2Ogev",row:"countdown_row__3uAT9",divide:"countdown_divide__gfpij",oneline:"countdown_oneline__1AZal",btn:"countdown_btn__2TvZz",primary:"countdown_primary__aAzCY",secondary:"countdown_secondary__3kEk4",disabled:"countdown_disabled__3aHIE",col:"countdown_col__3Soe9",timeLabel:"countdown_timeLabel__1Li_V",sqr:"countdown_sqr__1y5Ju",clickable:"countdown_clickable__25QOc",add:"countdown_add__knLkk",min:"countdown_min__3xr-M",timeNum:"countdown_timeNum__3wWEJ"}},function(e,t,a){e.exports=a.p+"static/media/countdown-10-seconds.ce99669c.mp3"},function(e,t,a){var n=a(5),o=a(27);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,r=n(a(7)),l=n(a(8)),s=n(a(12)),u=n(a(13)),c=n(a(14)),d=o(a(0)),f=a(30),p=n(a(757)),h=n(a(19)),m=n(a(28)),g=a(25),_=n(a(17)),E=n(a(120)),v=/Mobi|Android/i.test(navigator.userAgent),S=(0,f.observer)(i=function(e){function t(e){var n;return(0,r.default)(this,t),(n=(0,s.default)(this,(0,u.default)(t).call(this,e))).timer=0,n.diceAnswer=d.default.createRef(),n.handleDiceNotify=function(e){h.default.home.tool="dice",n.setState({triggerDiceAnimation:!0,randomDice:e.param.value.dice})},n.animationStart=function(){n.setState({showAnswer:!1})},n.animationEnd=function(e){n.setState({txt:m.default.get("SIDE_TOOLS_DICE_RESTART"),triggerDiceAnimation:!1,showAnswer:!0},function(){n.diceAnswer.current&&(n.diceAnswer.current.style.backgroundImage="url("+n.state.imgList[n.state.randomDice-1].url+")")})},n.close=function(){g.api.request("toolsStateInfo",{type:"tool_dice",value:"tool_dice_close"}).then(function(e){e&&e.statusCode})},n.random=function(e,t){return Math.round(Math.random()*(t-e))+e},n.start=function(){n.setState({randomDice:n.random(1,6)},function(){g.api.request("toolsStateInfo",{type:"tool_dice",value:{dice:n.state.randomDice,role:h.default.Tool.role}}).then(function(e){e&&"0"===e.statusCode&&(n.timer++,n.timer>=1&&n.setState({txt:m.default.get("SIDE_TOOLS_DICE_RESTART")}),n.setState({showAnswer:!1,triggerDiceAnimation:!0}))})})},n.state={txt:m.default.get("SIDE_TOOLS_DICE_START"),imgList:[{id:1,url:a(758),desc:""},{id:2,url:a(759),desc:""},{id:3,url:a(760),desc:""},{id:4,url:a(761),desc:""},{id:5,url:a(762),desc:""},{id:6,url:a(763),desc:""}],showAnswer:!0,randomDice:1,triggerDiceAnimation:!1,initDiceNum:1},n.el=document.createElement("div"),n}return(0,c.default)(t,e),(0,l.default)(t,[{key:"componentDidMount",value:function(){var e=this,t=document.getElementById("courseContainerInner");t&&t.appendChild(this.el),this.setState({initDiceNum:this.random(1,6)}),g.api.listen("toolsStateInfoNotify",function(t){t&&t.param&&t.param.value&&("tool_dice"===t.param.type&&t.param.value.dice>=1&&t.param.value.dice<=6&&((3===h.default.Tool.role||4===h.default.Tool.role)&&e.handleDiceNotify(t),1===t.param.value.role&&(2===h.default.Tool.role||5===h.default.Tool.role)&&e.handleDiceNotify(t),2===t.param.value.role&&(1===h.default.Tool.role||5===h.default.Tool.role)&&e.handleDiceNotify(t),5===t.param.value.role&&(1===h.default.Tool.role||2===h.default.Tool.role)&&e.handleDiceNotify(t),1!==h.default.Tool.role&&2!==h.default.Tool.role&&5!==h.default.Tool.role||(h.default.home.tool="dice",e.setState({initDiceNum:t.param.value.dice}))),"tool_dice"===t.param.type&&"tool_dice_close"===t.param.value&&("dice"===h.default.home.tool&&(h.default.home.tool="more"),e.setState({triggerDiceAnimation:!1,showAnswer:!0,txt:m.default.get("SIDE_TOOLS_DICE_START")})))})}},{key:"componentWillUnmount",value:function(){var e=document.getElementById("courseContainerInner");e&&e.removeChild(this.el)}},{key:"render",value:function(){return _.default.createPortal(d.default.createElement("div",{className:p.default.container,style:{display:"dice"===h.default.home.tool?"block":"none",background:"rgba(38, 124, 127, .9)",boxShadow:v?"none":"0px 5px 10px 0px rgba(0, 0, 0, 0.1)"}},(1===h.default.Tool.role||2===h.default.Tool.role||5===h.default.Tool.role)&&d.default.createElement("span",{onClick:this.close,className:p.default.close}),d.default.createElement("div",{className:p.default.inner},d.default.createElement("div",{className:p.default.gkaWrap},d.default.createElement("div",{ref:this.diceAnswer,className:p.default.answer,style:{opacity:this.state.showAnswer?1:0,backgroundImage:"url("+this.state.imgList[this.state.initDiceNum-1].url+")"}}),d.default.createElement("div",{onAnimationStart:this.animationStart,onAnimationEnd:this.animationEnd,className:this.state.triggerDiceAnimation?""+p.default.animation:""})),(1===h.default.Tool.role||2===h.default.Tool.role||5===h.default.Tool.role)&&d.default.createElement(E.default,{className:""+p.default.btn,onClick:this.start,disabled:this.state.triggerDiceAnimation},this.state.txt))),this.el)}}]),t}(d.Component))||i;t.default=S},function(e,t,a){e.exports={container:"dice_container__UvAWU",close:"dice_close__1Dy5O",inner:"dice_inner__qbSfK",gkaWrap:"dice_gkaWrap__3hlc9",answer:"dice_answer__2YiWz",animation:"dice_animation__d_K62","dice-animation":"dice_dice-animation__3FLQ8",btn:"dice_btn__2oeqH"}},function(e,t,a){e.exports=a.p+"static/media/dice1.f25c0b95.png"},function(e,t,a){e.exports=a.p+"static/media/dice2.47212ef2.png"},function(e,t,a){e.exports=a.p+"static/media/dice3.b810d063.png"},function(e,t,a){e.exports=a.p+"static/media/dice4.88325dbd.png"},function(e,t,a){e.exports=a.p+"static/media/dice5.412b658f.png"},function(e,t,a){e.exports=a.p+"static/media/dice6.5ccc8aaf.png"},function(e){e.exports={HOME:"Home",SIDE_TOOLS_OUTLINE_TITLE:"Outline",SIDE_TOOLS_OUTLINE_NOTES:"Teaching notes",SIDE_TOOLS_OUTLINE_COLLAPSE:"Collapse",SIDE_TOOLS_MATERIAL_TITLE:"Teaching material",SIDE_TOOLS_MATERIAL_AUDIO:"Audio",SIDE_TOOLS_MATERIAL_VIDEO:"Video",SIDE_TOOLS_ANSWER_TITLE:"Answer sheet",SIDE_TOOLS_ANSWER_CHOOSE_CORRECT:"Choose the correct answer",SIDE_TOOLS_ANSWER_REWARD:"Reward",SIDE_TOOLS_ANSWER_CORRECT_ANSWER:"Correct answer",SIDE_TOOLS_ANSWER_CORRECT_RATIO:"Correct ratio",SIDE_TOOLS_ANSWER_COMPLETE:"Complete",SIDE_TOOLS_ANSWER_START:"Start",SIDE_TOOLS_ANSWER_NAME:"Name",SIDE_TOOLS_ANSWER_OPTION:"Option",SIDE_TOOLS_ANSWER_SETTING:"Setting",SIDE_TOOLS_ANSWER_FINISH:"Finish",SIDE_TOOLS_ANSWER_SUBMIT:"Submit",SIDE_TOOLS_ANSWER_SUBMIT_SHORT:"Submit",SIDE_TOOLS_ANSWER_SUBMIT_MULTI:"(Answered {done}/{total})",SIDE_TOOLS_ANSWER_CONFIRM:"Confirm",SIDE_TOOLS_ANSWER_RESTART:"Restart",SIDE_TOOLS_ANSWER_CORRECT:"Correct",SIDE_TOOLS_ANSWER_WRONG:"Wrong",SIDE_TOOLS_ANSWER_ANSWERED:"Answered",SIDE_TOOLS_ANSWER_UNANSWERED:"Unanswered",SIDE_TOOLS_ANSWER_COIN:"Coin",SIDE_TOOLS_ANSWER_STAR:"Star",SIDE_TOOLS_ANSWER_DO_NOT_INITIATE:"Students are responding now, please do not initiate a new question.",SIDE_TOOLS_ANSWER_PRAISE:"Praised",SIDE_TOOLS_ANSWER_ADD_QUIZ:"Add question",SIDE_TOOLS_ANSWER_TOTAL_QUIZ:"{number} questions in total",SIDE_TOOLS_ANSWER_QUESTION:"Question {number}",SIDE_TOOLS_ANSWER_STATISTICS:"Statistics",SIDE_TOOLS_ANSWER_MAX_COUNT:"Only the top {count} students",SIDE_TOOLS_ANSWER_COMPLETION_RATE:"Completion",SIDE_TOOLS_ANSWER_JOIN_NUMBER:"Completed",SIDE_TOOLS_ANSWER_SINGLE_CHOICE:"Single Choice",SIDE_TOOLS_ANSWER_MULTI_CHOICE:"Multiple Choice",SIDE_TOOLS_ANSWER_SUBMIT_CONFIRM:"{total} questions in total. {done} questions have been completed. {undone} questions are not answered. Submit it?",SIDE_TOOLS_ANSWER_GET_STAR:"Congratulations! You have gained {number} stars!",SIDE_TOOLS_ANSWER_NO_STAR:"No star gained. Keep going!",SIDE_TOOLS_ANSWER_QUIZ_TITLE:"Question",SIDE_TOOLS_ANSWER_CORR_ANSWER:"Correct answer",SIDE_TOOLS_ANSWER_MY_ANSWER:"My answer",SIDE_TOOLS_ANSWER_GAIN_STAR:"Stars ",SIDE_TOOLS_ANSWER_STU_QUIZ_NUM:"Question {number}",SIDE_TOOLS_ANSWER_POKE:"Poke",SIDE_TOOLS_ANSWER_POKE_AGAIN:"Poke again",SIDE_TOOLS_ANSWER_POKE_TEXT:"Please submit",SIDE_TOOLS_ANSWER_POKE_TEXTS:"the answer",SIDE_TOOLS_INTERACTION_NO_HANDS_UP:"No hands up, please do it again",SIDE_TOOLS_INTERACTION_MAX_TWO:"At most 2 students are allowed to join",SIDE_TOOLS_INTERACTION_OTHER_MIC:"mic failed to launch because of other mics linking",SIDE_TOOLS_INTERACTION_ASSIGN_RANDOM_MIC:"mic failed to launch because of assign/random mic",SIDE_TOOLS_INTERACTION_TITLE:"Connect",SIDE_TOOLS_INTERACTION_ASSIGN:"Assign students",SIDE_TOOLS_INTERACTION_RANDOM:"Random students",SIDE_TOOLS_INTERACTION_VIDEO:"Video",SIDE_TOOLS_INTERACTION_AUDIO:"Audio",SIDE_TOOLS_INTERACTION_ENABLE:"Start",SIDE_TOOLS_INTERACTION_DISABLE:"End",SIDE_TOOLS_INTERACTION_RANGE:"Range",SIDE_TOOLS_INTERACTION_WAY:"Way",SIDE_TOOLS_INTERACTION_TYPE:"Type",SIDE_TOOLS_INTERACTION_NAME:"Name",SIDE_TOOLS_INTERACTION_TIMES:"Times",SIDE_TOOLS_INTERACTION_OPERATION:"Setting",SIDE_TOOLS_INTERACTION_PEOPLE:"people",SIDE_TOOLS_INTERACTION_PEOPLEONE:"people",SIDE_TOOLS_INTERACTION_ALL:"All the students",SIDE_TOOLS_INTERACTION_INTERACTING:"Interacting",SIDE_TOOLS_INTERACTION_END:"End",SIDE_TOOLS_INTERACTION_OFFLINE:"mic failed to launch because of the offline",STUDENT_LAYER_TEACHER:"Teacher",STUDENT_LAYER_TA:"TA",STUDENT_HANDS_DOWN:"Hands down",STUDENT_HANDS_NOW:"Enabling",STUDENT_HANDS_RANDOM_INTERACTION:"Random students interaction",STUDENT_HANDS_ASSIGN_INTERACTION:"Assign students interaction",ASSESSMENT_COMMENT_TITLE:"Assessment comment",SIDE_TOOLS_DICE_TITLE:"Dice",SIDE_TOOLS_DICE_START:"Start",SIDE_TOOLS_DICE_RESTART:"Redo",SIDE_TOOLS_COUNTDOWN_TITLE:"CountDown",SIDE_TOOLS_TIMER_TITLE:"Timer",SIDE_TOOLS_MORE:"More Tools",SIDE_TOOLS_RESET:"Reset",SIDE_TOOLS_START:"Start",SIDE_TOOLS_PAUSE:"Pause",SIDE_TOOLS_CONTINUE:"Continue",SIDE_TOOLS_HOUR:"Hours",SIDE_TOOLS_MINUTE:"Minutes",SIDE_TOOLS_SECOND:"Seconds",SIDE_TOOLS_COUNTDOWN_END:"End of countdown",SIDE_TOOLS_ROSTER_TITLE:"Roster",ROSTER_ONLINE:"Online",CONFIRM_CANCEL:"Cancel",CONFIRM_OK:"Confirm",CONFIRM_CONTENT:"Clear screen will not be able to restore, are you sure to continue?",CONFIRM_IMG_FAIL:"Failed to load image",BTOOL_HOVTEXT_NEWPAGE:"new page",BTOOL_HOVTEXT_COLOR:"color",BTOOL_HOVTEXT_FONT:"font",BTOOL_HOVTEXT_PEN:"pen",BTOOL_HOVTEXT_SHAPE:"shape",BTOOL_HOVTEXT_ERASE:"eraser",BTOOL_HOVTEXT_ERASE_RADIUS:"Erase Radius",BTOOL_HOVTEXT_UNDO:"undo",BTOOL_HOVTEXT_REDO:"redo",BTOOL_HOVTEXT_CLEAR:"clear screen",BTOOL_HOVTEXT_MOVE:"move",BTOOL_HOVTEXT_PENCIL:"pencil",BTOOL_HOVTEXT_PRESSURE_PEN:"pen",BTOOL_HOVTEXT_SIGNPEN:"signpen",BTOOL_HOVTEXT_WHOLEERASE:"wholeeraser",BTOOL_HOVTEXT_PARTERASE:"parteraser",BTOOL_HOVTEXT_OPERATEONICW:"Operate On Interactive Course Ware",BOOK_LOAD_FAIL_MESSAGE:"Failed to load courseware, please re-enter classroom and try later",ICW_SDK_INIT_FAILED_MESSAGE:"failed to initialize websocket connection, and please re-enter classroom, then try",ICW_BOOK_LOADING:"loading...",ICW_LOAD_PAGE_ERROR:"Failed to load current page, and please re-enter the class room, then try again.",AUDIO_PLAY_LAYER_PLAYING:"Playing",ANSWER_STAT_DETAIL:"Answer detail",ANSWER_STAT_TOTAL:"Total",ANSWER_STAT_RIGHT:"Correct answer",ANSWER_STAT_ACCURACY:"Accuracy",ANSWER_STAT_TITLE:"Answer statistics",ANSWER_STAT_GAINS:"Gains",ANSWER_STAT_ALL:"All",ANSWER_STAT_SELECTED:"Choose"}},function(e){e.exports={HOME:"\u9996\u9875",SIDE_TOOLS_OUTLINE_TITLE:"\u5927\u7eb2",SIDE_TOOLS_OUTLINE_NOTES:"\u6559\u6848",SIDE_TOOLS_OUTLINE_COLLAPSE:"\u6536\u8d77",SIDE_TOOLS_MATERIAL_TITLE:"\u6559\u6750",SIDE_TOOLS_MATERIAL_AUDIO:"\u97f3\u9891",SIDE_TOOLS_MATERIAL_VIDEO:"\u89c6\u9891",SIDE_TOOLS_ANSWER_TITLE:"\u7b54\u9898\u5361",SIDE_TOOLS_ANSWER_CHOOSE_CORRECT:"\u70b9\u51fb\u5b57\u6bcd\u9884\u8bbe\u6b63\u786e\u7b54\u6848",SIDE_TOOLS_ANSWER_REWARD:"\u7b54\u5bf9\u5956\u52b1",SIDE_TOOLS_ANSWER_CORRECT_ANSWER:"\u6b63\u786e\u7b54\u6848",SIDE_TOOLS_ANSWER_CORRECT_RATIO:"\u6b63\u786e\u7387",SIDE_TOOLS_ANSWER_COMPLETE:"\u5b8c\u6210\u4eba\u6570",SIDE_TOOLS_ANSWER_START:"\u53d1\u9898",SIDE_TOOLS_ANSWER_NAME:"\u59d3\u540d",SIDE_TOOLS_ANSWER_OPTION:"\u9009\u9879",SIDE_TOOLS_ANSWER_SETTING:"\u64cd\u4f5c",SIDE_TOOLS_ANSWER_FINISH:"\u7ed3\u675f\u7b54\u9898",SIDE_TOOLS_ANSWER_SUBMIT:"\u63d0\u4ea4\u7b54\u6848",SIDE_TOOLS_ANSWER_SUBMIT_SHORT:"\u63d0\u4ea4",SIDE_TOOLS_ANSWER_SUBMIT_MULTI:"\uff08\u5df2\u7b54{done}/{total}\uff09",SIDE_TOOLS_ANSWER_CONFIRM:"\u786e\u8ba4",SIDE_TOOLS_ANSWER_RESTART:"\u91cd\u65b0\u5f00\u59cb",SIDE_TOOLS_ANSWER_CORRECT:"\u7b54\u5bf9",SIDE_TOOLS_ANSWER_WRONG:"\u7b54\u9519",SIDE_TOOLS_ANSWER_ANSWERED:"\u5df2\u7b54",SIDE_TOOLS_ANSWER_UNANSWERED:"\u672a\u7b54",SIDE_TOOLS_ANSWER_COIN:"\u91d1\u5e01",SIDE_TOOLS_ANSWER_STAR:"\u661f\u661f",SIDE_TOOLS_ANSWER_DO_NOT_INITIATE:"\u6b63\u5728\u7b54\u9898\u4e2d\uff0c\u4e0d\u80fd\u53d1\u8d77\u65b0\u7684\u7b54\u9898",SIDE_TOOLS_ANSWER_PRAISE:"\u83b7\u5f97\u8868\u626c",SIDE_TOOLS_ANSWER_ADD_QUIZ:"\u6dfb\u52a0\u9898\u76ee",SIDE_TOOLS_ANSWER_TOTAL_QUIZ:"\u5171{number}\u9053\u9898",SIDE_TOOLS_ANSWER_QUESTION:"\u9898\u76ee{number}",SIDE_TOOLS_ANSWER_STATISTICS:"\u7b54\u9898\u7edf\u8ba1",SIDE_TOOLS_ANSWER_MAX_COUNT:"\u4ec5\u5c55\u793a\u524d{count}\u540d\u5b66\u751f",SIDE_TOOLS_ANSWER_COMPLETION_RATE:"\u5b8c\u6210\u7387",SIDE_TOOLS_ANSWER_JOIN_NUMBER:"\u5b8c\u6210\u4eba\u6570",SIDE_TOOLS_ANSWER_SINGLE_CHOICE:"\u5355\u9009\u9898",SIDE_TOOLS_ANSWER_MULTI_CHOICE:"\u591a\u9009\u9898",SIDE_TOOLS_ANSWER_SUBMIT_CONFIRM:"\u5f53\u524d\u5171{total}\u9053\u9898\uff0c\u4f60\u5df2\u4f5c\u7b54{done}\u9053\u9898\uff0c\u5c1a\u6709{undone}\u9053\u9898\u672a\u4f5c\u7b54\uff0c\u662f\u5426\u63d0\u4ea4\uff1f",SIDE_TOOLS_ANSWER_GET_STAR:"\u606d\u559c\u4f60\uff01\u83b7\u5f97{number}\u9897\u661f\u661f",SIDE_TOOLS_ANSWER_NO_STAR:"\u672a\u83b7\u5f97\u661f\u661f\uff0c\u52a0\u6cb9\u54e6\uff01",SIDE_TOOLS_ANSWER_QUIZ_TITLE:"\u9898\u76ee",SIDE_TOOLS_ANSWER_CORR_ANSWER:"\u6b63\u786e\u7b54\u6848",SIDE_TOOLS_ANSWER_MY_ANSWER:"\u6211\u7684\u7b54\u6848",SIDE_TOOLS_ANSWER_GAIN_STAR:"\u83b7\u5f97\u661f\u661f",SIDE_TOOLS_ANSWER_STU_QUIZ_NUM:"\u7b2c{number}\u9898",SIDE_TOOLS_ANSWER_POKE:"\u6233\u4e00\u6233",SIDE_TOOLS_ANSWER_POKE_AGAIN:"\u518d\u6233\u4e00\u6233",SIDE_TOOLS_ANSWER_POKE_TEXT:"\u505a\u5b8c\u9898\u522b\u5fd8\u4e86",SIDE_TOOLS_ANSWER_POKE_TEXTS:"\u63d0\u4ea4\u7b54\u6848\u54e6",SIDE_TOOLS_INTERACTION_NO_HANDS_UP:"\u65e0\u4eba\u4e3e\u624b\uff0c\u8bf7\u518d\u6765\u4e00\u6b21",SIDE_TOOLS_INTERACTION_MAX_TWO:"\u540c\u65f6\u6700\u591a\u53ef\u8fde\u9ea62\u4eba",SIDE_TOOLS_INTERACTION_OTHER_MIC:"\u5f53\u524d\u6b63\u5728\u5355\u4eba\u8fde\u9ea6\uff0c\u53d1\u8d77\u5931\u8d25",SIDE_TOOLS_INTERACTION_ASSIGN_RANDOM_MIC:"\u5f53\u524d\u6b63\u5728\u6307\u5b9a/\u968f\u673a\u8fde\u9ea6\uff0c\u53d1\u8d77\u5931\u8d25",SIDE_TOOLS_INTERACTION_TITLE:"\u8fde\u9ea6",SIDE_TOOLS_INTERACTION_ASSIGN:"\u6307\u5b9a\u8fde\u9ea6",SIDE_TOOLS_INTERACTION_RANDOM:"\u968f\u673a\u8fde\u9ea6",SIDE_TOOLS_INTERACTION_VIDEO:"\u89c6\u9891\u8fde\u9ea6",SIDE_TOOLS_INTERACTION_AUDIO:"\u8bed\u97f3\u8fde\u9ea6",SIDE_TOOLS_INTERACTION_ENABLE:"\u5f00\u59cb\u8fde\u9ea6",SIDE_TOOLS_INTERACTION_DISABLE:"\u7ed3\u675f\u8fde\u9ea6",SIDE_TOOLS_INTERACTION_RANGE:"\u8fde\u9ea6\u8303\u56f4",SIDE_TOOLS_INTERACTION_WAY:"\u8fde\u9ea6\u65b9\u5f0f",SIDE_TOOLS_INTERACTION_TYPE:"\u8fde\u9ea6\u7c7b\u578b",SIDE_TOOLS_INTERACTION_NAME:"\u59d3\u540d",SIDE_TOOLS_INTERACTION_TIMES:"\u8fde\u9ea6\u6b21\u6570",SIDE_TOOLS_INTERACTION_OPERATION:"\u64cd\u4f5c",SIDE_TOOLS_INTERACTION_PEOPLE:"\u4eba\u6570",SIDE_TOOLS_INTERACTION_PEOPLEONE:"\u4eba",SIDE_TOOLS_INTERACTION_ALL:"\u5168\u73ed\u7528\u6237",SIDE_TOOLS_INTERACTION_INTERACTING:"\u8fde\u9ea6\u4e2d",SIDE_TOOLS_INTERACTION_END:"\u7ed3\u675f",SIDE_TOOLS_INTERACTION_OFFLINE:"\u8be5\u5b66\u751f\u5df2\u79bb\u7ebf\uff0c\u8fde\u9ea6\u53d1\u8d77\u5931\u8d25",STUDENT_LAYER_TEACHER:"\u8001\u5e08",STUDENT_LAYER_TA:"\u52a9\u6559",STUDENT_HANDS_DOWN:"\u53d6\u6d88\u4e3e\u624b",STUDENT_HANDS_NOW:"\u6b63\u5728\u53d1\u8d77",STUDENT_HANDS_RANDOM_INTERACTION:"\u968f\u673a\u8fde\u9ea6",STUDENT_HANDS_ASSIGN_INTERACTION:"\u6307\u5b9a\u8fde\u9ea6",ASSESSMENT_COMMENT_TITLE:"\u8bc4\u6d4b\u8bfe\u548c\u8bfe\u540e\u8bc4\u8bed",SIDE_TOOLS_DICE_TITLE:"\u9ab0\u5b50",SIDE_TOOLS_DICE_START:"\u5f00\u59cb",SIDE_TOOLS_DICE_RESTART:"\u91cd\u63b7",SIDE_TOOLS_COUNTDOWN_TITLE:"\u5012\u8ba1\u65f6",SIDE_TOOLS_TIMER_TITLE:"\u8ba1\u65f6\u5668",SIDE_TOOLS_MORE:"\u66f4\u591a\u5de5\u5177",SIDE_TOOLS_RESET:"\u91cd\u7f6e",SIDE_TOOLS_START:"\u5f00\u59cb",SIDE_TOOLS_PAUSE:"\u6682\u505c",SIDE_TOOLS_CONTINUE:"\u7ee7\u7eed",SIDE_TOOLS_HOUR:"\u5c0f\u65f6",SIDE_TOOLS_MINUTE:"\u5206\u949f",SIDE_TOOLS_SECOND:"\u79d2",SIDE_TOOLS_COUNTDOWN_END:"\u5012\u8ba1\u65f6\u7ed3\u675f",SIDE_TOOLS_ROSTER_TITLE:"\u82b1\u540d\u518c",ROSTER_ONLINE:"\u5728\u7ebf\u4eba\u6570",CONFIRM_CANCEL:"\u53d6\u6d88",CONFIRM_OK:"\u786e\u8ba4",CONFIRM_CONTENT:"\u6e05\u7a7a\u540e\u65e0\u6cd5\u6062\u590d\uff0c\u786e\u8ba4\u6e05\u5c4f\u5417\uff1f",CONFIRM_IMG_FAIL:"\u56fe\u7247\u52a0\u8f7d\u5931\u8d25",BTOOL_HOVTEXT_NEWPAGE:"\u65b0\u9875",BTOOL_HOVTEXT_COLOR:"\u989c\u8272",BTOOL_HOVTEXT_FONT:"\u5b57\u4f53",BTOOL_HOVTEXT_PEN:"\u7b14",BTOOL_HOVTEXT_SHAPE:"\u5f62\u72b6",BTOOL_HOVTEXT_ERASE:"\u6a61\u76ae\u64e6",BTOOL_HOVTEXT_ERASE_RADIUS:"\u64e6\u9664\u534a\u5f84",BTOOL_HOVTEXT_UNDO:"\u64a4\u9500",BTOOL_HOVTEXT_REDO:"\u8fd8\u539f",BTOOL_HOVTEXT_CLEAR:"\u6e05\u5c4f",BTOOL_HOVTEXT_MOVE:"\u79fb\u52a8",BTOOL_HOVTEXT_PENCIL:"\u94c5\u7b14",BTOOL_HOVTEXT_PRESSURE_PEN:"\u753b\u7b14",BTOOL_HOVTEXT_SIGNPEN:"\u8367\u5149\u7b14",BTOOL_HOVTEXT_WHOLEERASE:"\u6574\u4f53\u64e6\u9664",BTOOL_HOVTEXT_PARTERASE:"\u5c40\u90e8\u64e6\u9664",BTOOL_HOVTEXT_OPERATEONICW:"\u64cd\u4f5c\u4e92\u52a8\u8bfe\u4ef6",BOOK_LOAD_FAIL_MESSAGE:"\u52a0\u8f7d\u6559\u6750\u5931\u8d25\uff0c\u8bf7\u91cd\u65b0\u8fdb\u6559\u5ba4\uff0c\u518d\u5c1d\u8bd5\u52a0\u8f7d",ICW_SDK_INIT_FAILED_MESSAGE:"\u4e92\u52a8\u6559\u6750\u540c\u670d\u52a1\u5668\u5efa\u7acb\u957f\u94fe\u63a5\u5931\u8d25\uff0c\u8bf7\u91cd\u65b0\u8fdb\u6559\u5ba4\uff0c\u518d\u5c1d\u8bd5\u8fde\u63a5",ICW_BOOK_LOADING:"\u52a0\u8f7d\u4e2d...",ICW_LOAD_PAGE_ERROR:"\u52a0\u8f7d\u5f53\u524d\u9875\u5931\u8d25\uff0c\u8bf7\u91cd\u65b0\u8fdb\u6559\u5ba4\uff0c\u518d\u5c1d\u8bd5\u52a0\u8f7d",AUDIO_PLAY_LAYER_PLAYING:"\u6b63\u5728\u64ad\u653e",ANSWER_STAT_DETAIL:"\u4f5c\u7b54\u60c5\u51b5",ANSWER_STAT_TOTAL:"\u5b8c\u6210\u4eba\u6570",ANSWER_STAT_RIGHT:"\u6b63\u786e\u7b54\u6848",ANSWER_STAT_ACCURACY:"\u6b63\u786e\u7387",ANSWER_STAT_TITLE:"\u7b54\u9898\u7edf\u8ba1",ANSWER_STAT_GAINS:"\u83b7\u5f97",ANSWER_STAT_ALL:"\u5168\u90e8",ANSWER_STAT_SELECTED:"\u9009\u62e9"}},,,,function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0}),t.register=function(e){if("serviceWorker"in navigator){var t=new URL(".",window.location.href);if(t.origin!==window.location.origin)return;window.addEventListener("load",function(){var t="./service-worker.js";n?(!function(e,t){fetch(e).then(function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):o(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):o(t,e)})}},t.unregister=function(){"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})};var n=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function o(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}}]),[[292,1,2]]]);